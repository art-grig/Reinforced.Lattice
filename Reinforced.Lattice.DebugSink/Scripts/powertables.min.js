var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},Reinforced;(function(n){var t;(function(n){var t,i,r,u,f;(function(n){n[n.UserMessage=0]="UserMessage";n[n.Banner=1]="Banner"})(n.MessageType||(n.MessageType={}));t=n.MessageType,function(n){n[n.Ascending=0]="Ascending";n[n.Descending=1]="Descending";n[n.Neutral=2]="Neutral"}(n.Ordering||(n.Ordering={}));i=n.Ordering,function(n){n[n.AllVisible=0]="AllVisible";n[n.OnlyIfAllDataVisible=1]="OnlyIfAllDataVisible";n[n.AllLoadedData=2]="AllLoadedData";n[n.Disabled=3]="Disabled"}(n.SelectAllBehavior||(n.SelectAllBehavior={}));r=n.SelectAllBehavior,function(n){n[n.DontReset=0]="DontReset";n[n.ServerReload=1]="ServerReload";n[n.ClientReload=2]="ClientReload"}(n.ResetSelectionBehavior||(n.ResetSelectionBehavior={}));u=n.ResetSelectionBehavior,function(n){n[n.Client=0]="Client";n[n.Server=1]="Server";n[n.Sequential=2]="Sequential"}(n.PartitionType||(n.PartitionType={}));f=n.PartitionType})(t=n.Lattice||(n.Lattice={}))})(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){(function(n){n[n.All=0]="All";n[n.BodyOnly=1]="BodyOnly";n[n.Parent=2]="Parent"})(n.OverlapMode||(n.OverlapMode={}));var t=n.OverlapMode})(t=n.LoadingOverlap||(n.LoadingOverlap={}))})(t=n.Plugins||(n.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t,i;(function(n){n[n.LoadFromCacheWhenPossible=0]="LoadFromCacheWhenPossible";n[n.AlwaysLoadRemotely=1]="AlwaysLoadRemotely"})(n.NodeExpandBehavior||(n.NodeExpandBehavior={}));t=n.NodeExpandBehavior,function(n){n[n.IncludeCollapsed=0]="IncludeCollapsed";n[n.ExcludeCollapsed=1]="ExcludeCollapsed"}(n.TreeCollapsedNodeFilterBehavior||(n.TreeCollapsedNodeFilterBehavior={}));i=n.TreeCollapsedNodeFilterBehavior})(t=n.Hierarchy||(n.Hierarchy={}))})(t=n.Plugins||(n.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){(function(n){n[n.LeaveAsIs=0]="LeaveAsIs";n[n.All=1]="All";n[n.Nothing=2]="Nothing"})(n.SelectionToggle||(n.SelectionToggle={}));var t=n.SelectionToggle})(t=n.Adjustments||(n.Adjustments={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){(function(n){n[n.Rows=0]="Rows";n[n.Cells=1]="Cells"})(n.RegularSelectMode||(n.RegularSelectMode={}));var t=n.RegularSelectMode})(t=n.RegularSelect||(n.RegularSelect={}))})(t=n.Plugins||(n.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){(function(n){n[n.Client=0]="Client";n[n.Server=1]="Server"})(n.CommandType||(n.CommandType={}));var t=n.CommandType})(t=n.Commands||(n.Commands={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t,i,r;(function(n){n[n.Right=0]="Right";n[n.Left=1]="Left";n[n.Top=2]="Top";n[n.Bottom=3]="Bottom"})(n.StickDirection||(n.StickDirection={}));t=n.StickDirection,function(n){n[n.Internal=0]="Internal";n[n.External=1]="External"}(n.StickHollow||(n.StickHollow={}));i=n.StickHollow,function(n){n[n.Manual=0]="Manual";n[n.MouseOver=1]="MouseOver";n[n.MouseClick=2]="MouseClick"}(n.KeyboardScrollFocusMode||(n.KeyboardScrollFocusMode={}));r=n.KeyboardScrollFocusMode})(t=n.Scrollbar||(n.Scrollbar={}))})(t=n.Plugins||(n.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t,i;(function(n){n[n.Server=0]="Server";n[n.Client=1]="Client";n[n.Transboundary=2]="Transboundary"})(n.QueryScope||(n.QueryScope={}));t=n.QueryScope,function(n){n[n.Before=0]="Before";n[n.After=1]="After";n[n.Undirected=2]="Undirected"}(n.EventDirection||(n.EventDirection={}));i=n.EventDirection})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i;(function(i){var r=function(n){function t(){n.apply(this,arguments);this._globalHierarchy={};this._currentHierarchy={};this._notInHierarchy={}}return __extends(t,n),t.prototype.init=function(t){n.prototype.init.call(this,t);this._parentKeyFunction=this.MasterTable.DataHolder.compileKeyFunction(this.Configuration.ParentKeyFields);this.MasterTable.DataHolder.registerClientFilter(this)},t.prototype.expandRow=function(n){this.toggleSubtreeByObject(this.MasterTable.DataHolder.StoredCache[n.Row],!0)},t.prototype.expandLoadRow=function(n){this.loadRow(this.MasterTable.DataHolder.StoredCache[n.Row])},t.prototype.toggleLoadRow=function(n){this.toggleSubtreeOrLoad(this.MasterTable.DataHolder.StoredCache[n.Row],null)},t.prototype.collapseRow=function(n){this.toggleSubtreeByObject(this.MasterTable.DataHolder.StoredCache[n.Row],!1)},t.prototype.toggleRow=function(n){this.toggleSubtreeByObject(this.MasterTable.DataHolder.StoredCache[n.Row],null)},t.prototype.toggleSubtreeOrLoad=function(n,t){n!=null&&n!=undefined&&((t==null||t==undefined)&&(t=!n.__isExpanded),n.__isExpanded!==t)&&(t?n.__isLoaded?this.expand(n):this.loadRow(n):this.collapse(n,!0))},t.prototype.toggleSubtreeByObject=function(n,t){n!=null&&n!=undefined&&((t==null||t==undefined)&&(t=!n.__isExpanded),n.__isExpanded!==t)&&(t?this.expand(n):this.collapse(n,!0))},t.prototype.loadRow=function(n){var t=this;n.IsLoading=!0;n.IsExpanded=!0;n.__isExpanded=!0;this.MasterTable.Controller.redrawVisibleDataObject(n);this.MasterTable.Commands.triggerCommand("_Children",n,function(){n.IsLoading=!1;n.__isLoaded=!0;t.MasterTable.Controller.redrawVisibleDataObject(n)});return},t.prototype.isParentExpanded=function(n){if(n.__parent==null)return!0;var t=this.MasterTable.DataHolder.getByPrimaryKey(n.__parent);return t.__isExpanded},t.prototype.expand=function(n){var o,a,r,f,l,u,e;if(n.IsExpanded=!0,n.__isExpanded=!0,this.isParentExpanded(n)){for(o=this.toggleVisibleChildren(n,!0),a=this.MasterTable.DataHolder.StoredCache,this.MasterTable.Controller.redrawVisibleDataObject(n),r=[],f=0;f<o.length;f++)r.push(a[o[f]]);r=this.MasterTable.DataHolder.orderWithCurrentOrderings(r);r=this.orderHierarchy(r,n.Deepness+1);var y=this.MasterTable.DataHolder.Ordered,s=this.MasterTable.DataHolder.DisplayedData,p=y.indexOf(n);this.MasterTable.DataHolder.Ordered.splice.apply(this.MasterTable.DataHolder.Ordered,[p+1,0].concat(r));var h=s.indexOf(n),i=r,w=this.MasterTable.DataHolder.DisplayedData.length,v=s.slice(0,h+1),t=s.slice(h+1),c=null;if(this.MasterTable.Partition.Take>0){if(h===w-1){this.firePartitionChange();return}if(l=v.length+i.length+t.length,l>this.MasterTable.Partition.Take)if(u=l-this.MasterTable.Partition.Take,u<t.length)this.removeNLastRows(u),t=t.slice(0,t.length-u),this.appendNodes(i,t);else for(this.removeNLastRows(t.length),u-=t.length,t=[],u>0&&(i=i.slice(0,i.length-u)),c=this.MasterTable.Controller.produceRowsFromData(i),e=0;e<c.length;e++)this.MasterTable.Renderer.Modifier.appendRow(c[e]);else this.appendNodes(i,t)}else this.appendNodes(i,t);this.MasterTable.DataHolder.DisplayedData=v.concat(i,t);this.firePartitionChange()}},t.prototype.appendNodes=function(n,t){for(var u=t[0].__i,r=this.MasterTable.Controller.produceRowsFromData(n),i=0;i<r.length;i++)this.MasterTable.Renderer.Modifier.appendRow(r[i],u)},t.prototype.firePartitionChange=function(n,t){n=n==null?this.MasterTable.Partition.Take:n;t=t==null?this.MasterTable.Partition.Skip:t;var i=this.MasterTable.Partition.Take,r=this.MasterTable.Partition.Skip;this.MasterTable.Partition.Take=n;this.MasterTable.Partition.Skip=t;this.MasterTable.Events.PartitionChanged.invokeAfter(this,{Take:n,PreviousTake:i,Skip:t,PreviousSkip:r})},t.prototype.removeNLastRows=function(n){for(var r,u=this.MasterTable.DataHolder.DisplayedData[this.MasterTable.DataHolder.DisplayedData.length-1],t=this.MasterTable.Renderer.Locator.getRowElementByObject(u),i=0;i<n;i++)r=t.previousElementSibling,this.MasterTable.Renderer.Modifier.destroyElement(t),t=r},t.prototype.toggleVisibleChildren=function(n,t,i){var r,u,f,e,o;if(i||(i=this._currentHierarchy),r=i[n.__i],!r)return[];for(u=[],f=0;f<r.length;f++)e=this.MasterTable.DataHolder.StoredCache[r[f]],o=this.toggleVisible(e,t),u=u.concat(o);return u},t.prototype.toggleVisible=function(n,t,i){var r,f,u,e;if(i||(i=this._currentHierarchy),r=[n.__i],n.__visible=t,!n.__isExpanded)return r;for(f=i[n.__i],u=0;u<f.length;u++)e=this.MasterTable.DataHolder.StoredCache[f[u]],e.__visible=t,r=r.concat(this.toggleVisible(e,t));return r},t.prototype.collapse=function(n,t){var c,p,g,u,l,a;if(n.IsExpanded=!1,n.__isExpanded=!1,this.isParentExpanded(n)){var i=this.MasterTable.DataHolder.DisplayedData,o=this.MasterTable.DataHolder.Ordered,nt=this.toggleVisibleChildren(n,!1),w=nt.length;this.MasterTable.Controller.redrawVisibleDataObject(n);var tt=this.MasterTable.Renderer.Locator.getRowElementByIndex(n.__i),f=o.indexOf(n),b=i.indexOf(n);o.splice(f+1,w);var k=i.length,v=i.splice(b+1,w).length,h=[],e=i.splice(b+1),s=o.slice(f+1+e.length,f+1+e.length+v),y=0,r=null,d=i.length+e.length+s.length;if(d<k&&this.MasterTable.Partition.Skip>0&&(r=this.MasterTable.Partition.Skip,r-=k-d,r<0&&(y=-r,r=0),h=o.slice(r,f-1)),y>0&&(s=o.slice(f+1+e.length,f+1+v+y+e.length)),i=h.concat(i,e,s),this.MasterTable.DataHolder.DisplayedData=i,console.log(i.length),t){for(c=tt.nextElementSibling,p=0;p<v;p++)g=c.nextElementSibling,this.MasterTable.Renderer.Modifier.destroyElement(c),c=g;if(u=null,h.length>0)for(u=this.MasterTable.Controller.produceRowsFromData(h),l=u.length-1;l>=0;l--)this.MasterTable.Renderer.Modifier.prependRow(u[l]);if(s.length>0)for(u=this.MasterTable.Controller.produceRowsFromData(s),a=0;a<u.length;a++)this.MasterTable.Renderer.Modifier.appendRow(u[a]);this.firePartitionChange(null,r)}}},t.prototype.onFiltered_after=function(){var n=this.MasterTable.DataHolder.Filtered,u=!0,f,r,t;for(n.length===this.MasterTable.DataHolder.StoredData.length&&(this._currentHierarchy=this._globalHierarchy,u=!1,this.restoreHierarchyData(n)),f=this.Configuration.CollapsedNodeFilterBehavior===i.TreeCollapsedNodeFilterBehavior.IncludeCollapsed,f&&this.expandParents(n),r=[],t=0;t<n.length;t++)n[t].__visible&&r.push(n[t]);n=r;u&&this.buildCurrentHierarchy(n);this.MasterTable.DataHolder.Filtered=n},t.prototype.expandParents=function(n){for(var t,f,i,r={},u=0;u<n.length;u++)this.addParents(n[u],r);for(t=0;t<n.length;t++)r[n[t].__i]&&delete r[n[t].__i];for(f in r)i=this.MasterTable.DataHolder.StoredCache[f],i.IsExpanded=!0,i.__isExpanded=!0,this.toggleVisibleChildren(i,!0),n.push(i)},t.prototype.restoreHierarchyData=function(n){for(var t,i=0;i<n.length;i++)t=n[i],t.__serverChildrenCount=t.ChildrenCount,t.LocalChildrenCount=this._globalHierarchy[t.__i].length,t.__visible=this.visible(t)},t.prototype.buildCurrentHierarchy=function(n){var t,u,i,r,f;for(this._currentHierarchy={},t=0;t<n.length;t++)for(u=n[t].__i,this._currentHierarchy[u]=[],i=0;i<n.length;i++)n[i].__parent===n[t].__key&&this._currentHierarchy[u].push(n[i].__i);for(r=0;r<n.length;r++)f=n[r],f.LocalChildrenCount=this._currentHierarchy[f.__i].length},t.prototype.addParents=function(n,t){if(n.__parent!=null)while(n.__parent!=null)n=this.MasterTable.DataHolder.getByPrimaryKey(n.__parent),t[n.__i]=!0},t.prototype.onOrdered_after=function(){var n=this.MasterTable.DataHolder.Ordered;this.MasterTable.DataHolder.Ordered=this.orderHierarchy(n,0)},t.prototype.orderHierarchy=function(n,t){for(var i=this.buildHierarchy(n,t),u=[],r=0;r<i.roots.length;r++)this.appendChildren(u,i.roots[r],i.Hierarchy);return u},t.prototype.appendChildren=function(n,t,i){var u=this.MasterTable.DataHolder.StoredCache[t],r;for(n.push(u),r=0;r<i[t].length;r++)this.appendChildren(n,i[t][r],i)},t.prototype.buildHierarchy=function(n,t){for(var f,r,u={},e=[],i=0;i<n.length;i++)for(f=n[i].__i,u[f]=[],n[i].Deepness===t&&e.push(n[i].__i),r=0;r<n.length;r++)n[r].__parent===n[i].__key&&u[f].push(n[r].__i);return{roots:e,Hierarchy:u}},t.prototype.isParentNull=function(n){for(var t=0;t<this.Configuration.ParentKeyFields.length;t++)if(n[this.Configuration.ParentKeyFields[t]]!=null)return!1;return!0},t.prototype.deepness=function(n){for(var t=0;n.__parent!=null;)if(t++,n=this.MasterTable.DataHolder.getByPrimaryKey(n.__parent),!n)throw new Error("Fields "+this.Configuration.ParentKeyFields.concat(", ")+" must be all null in root nodes");return t},t.prototype.visible=function(n){var t=this.MasterTable.DataHolder.satisfyCurrentFilters(n);if(!t)return!1;while(n.__parent!=null)if(n=this.MasterTable.DataHolder.getByPrimaryKey(n.__parent),!n.__isExpanded)return!1;return!0},t.prototype.onDataReceived_after=function(n){var t,u,e,i,f,r;if(!n.EventArgs.IsAdjustment){for(t=this.MasterTable.DataHolder.StoredData,this._globalHierarchy={},u=0;u<t.length;u++)for(e=t[u].__i,this._globalHierarchy[e]=[],t[u].__isExpanded=t[u].IsExpanded,i=0;i<t.length;i++)t[i].__parent||(t[i].__parent=this.isParentNull(t[i])?null:this._parentKeyFunction(t[i])),t[i].__parent===t[u].__key&&this._globalHierarchy[e].push(t[i].__i);for(f=0;f<this.MasterTable.DataHolder.StoredData.length;f++)r=this.MasterTable.DataHolder.StoredData[f],r.__serverChildrenCount=r.ChildrenCount,r.LocalChildrenCount=this._globalHierarchy[r.__i].length,r.Deepness=this.deepness(r),r.__visible=this.visible(r)}},t.prototype.setServerChildrenCount=function(n){n.ChildrenCount=n.__serverChildrenCount},t.prototype.setLocalChildrenCount=function(n){n.ChildrenCount=n.LocalChildrenCount},t.prototype.setChildrenCount=function(n,t){n.ChildrenCount=t},t.prototype.proceedAddedData=function(n){for(var r,f,u,t,i=0;i<n.length;i++)n[i].__parent=this.isParentNull(n[i])?null:this._parentKeyFunction(n[i]),this._globalHierarchy[n[i].__i]=[];for(r=0;r<n.length;r++)n[r].__parent!=null&&(f=this.MasterTable.DataHolder.getByPrimaryKey(n[r].__parent),this._globalHierarchy[f.__i].push(n[r].__i));for(u=0;u<n.length;u++)t=n[u],t.__serverChildrenCount=t.ChildrenCount,t.LocalChildrenCount=this._globalHierarchy[t.__i].length,t.Deepness=this.deepness(t),t.__visible=this.visible(t)},t.prototype.proceedUpdatedData=function(n){for(var u,r,t=null,i=0;i<n.length;i++)t=n[i],u=null,this.isParentNull(n[i])||(u=this._parentKeyFunction(t)),this.moveItem(t,u);for(r=0;r<n.length;r++)t=n[r],t.__isExpanded!==t.IsExpanded&&(t.IsExpanded?(t.__isExpanded=!0,this.toggleVisibleChildren(t,!0,this._globalHierarchy)):(t.__isExpanded=!1,this.toggleVisibleChildren(t,!1,this._globalHierarchy)))},t.prototype.moveItems=function(n,t){for(var r=t?t.__key:null,i=0;i<n.length;i++)this.moveItem(n[i],r);this.MasterTable.DataHolder.filterStoredDataWithPreviousQuery();this.MasterTable.Controller.redrawVisibleData()},t.prototype.moveItem=function(n,t){var e=n.__parent,r,u,f,i;if(e!=null){if(r=this.MasterTable.DataHolder.getByPrimaryKey(e),!r){this.moveFromNotInHierarchy(n.__key,t);return}u=this._globalHierarchy[r.__i];f=u.indexOf(n.__i);f>-1&&u.splice(f,1)}if(t==null){n.__visible=this.MasterTable.DataHolder.satisfyCurrentFilters(n);return}if(i=this.MasterTable.DataHolder.getByPrimaryKey(t),!i)throw new Error("Cannot find parent "+t+" to move");n.__parent=i.__i;n.__visible=i.__isExpanded&&this.MasterTable.DataHolder.satisfyCurrentFilters(n)},t.prototype.moveFromNotInHierarchy=function(n,t){var i,e,r,o,f,u;if(this._notInHierarchy[n]&&(i=this.MasterTable.DataHolder.getByPrimaryKey(n),i)){if(e=[],this._globalHierarchy[i.__i]=e,t==null)i.__parent=null;else{if(r=this.MasterTable.DataHolder.getByPrimaryKey(t),!r)throw new Error("Cannot find parent "+t+" to move from outside of tree");i.__parent=t;o=this._globalHierarchy[r.__i];o.push(i.__i);i.__visible=r.__isExpanded&&this.MasterTable.DataHolder.satisfyCurrentFilters(i)}for(f=this._notInHierarchy[n],u=0;u<f.length;u++)this.moveFromNotInHierarchy(f[u],i.__key);delete this._notInHierarchy[n]}},t.prototype.cleanupNotInHierarchy=function(){var n,t;for(n in this._notInHierarchy){for(t=0;t<this._notInHierarchy[n].length;t++)this.MasterTable.DataHolder.detachByKey(this._notInHierarchy[n][t]);this.MasterTable.DataHolder.detachByKey(n)}this._notInHierarchy={}},t.prototype.onAdjustment_after=function(n){var t=n.EventArgs;this.proceedAddedData(t.AddedData);this.proceedUpdatedData(t.TouchedData);this.cleanupNotInHierarchy();t.NeedRefilter=!0},t.prototype.onAdjustment_before=function(n){var u=n.EventArgs,r=u.RemoveKeys,t,i;for(this._notInHierarchy={},t=0;t<r.length;t++)i=this.MasterTable.DataHolder.getByPrimaryKey(r[t]),this.removeFromHierarchySubtrees(i,this._globalHierarchy),this.removeFromHierarchySubtrees(i,this._currentHierarchy),this.moveToNotInHierarchy(i.__i)},t.prototype.moveToNotInHierarchy=function(n){var t=this._globalHierarchy[n],e=this.MasterTable.DataHolder.StoredCache[n],u,i,f,r;if(e){for(u=[],this._notInHierarchy[n.__key]=u,i=0;i<t.length;i++)f=this.MasterTable.DataHolder.StoredCache[t[i]],f&&u.push(f.__key);for(r=0;r<t.length;r++)this.moveToNotInHierarchy(t[r])}},t.prototype.removeFromHierarchySubtrees=function(n,t){var i,r,u;n.__parent!=null&&(i=this.MasterTable.DataHolder.getByPrimaryKey(n.__parent),t[i.__i]&&(r=t[i.__i],u=r.indexOf(n.__i),u>-1&&r.splice(u,1)))},t.prototype.subscribe=function(n){n.DataReceived.subscribeAfter(this.onDataReceived_after.bind(this),"hierarchy");n.Filtered.subscribeAfter(this.onFiltered_after.bind(this),"hierarchy");n.Ordered.subscribeAfter(this.onOrdered_after.bind(this),"hierarchy");n.Adjustment.subscribeAfter(this.onAdjustment_after.bind(this),"hierarchy");n.Adjustment.subscribeBefore(this.onAdjustment_before.bind(this),"hierarchy")},t.prototype.filterPredicate=function(){return!0},t}(t.PluginBase);i.HierarchyPlugin=r;n.ComponentsContainer.registerComponent("Hierarchy",r)})(i=t.Hierarchy||(t.Hierarchy={}))})(t=n.Plugins||(n.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(t){var i=function(){function t(n,t){this._element=n;this._handler=t;this._resizeBoud=this.onResized.bind(this);this.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(n){return window.setTimeout(n,20)}}return t.prototype.attach=function(){this._sensor=document.createElement("div");this._sensor.className="resize-sensor";var i="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",r="position: absolute; left: 0; top: 0; transition: 0s;";this._sensor.style.cssText=i;this._sensor.innerHTML='<div class="resize-sensor-expand" style="'+i+'"><div style="'+r+'"><\/div><\/div><div class="resize-sensor-shrink" style="'+i+'"><div style="'+r+' width: 200%; height: 200%"><\/div><\/div>';this._element.appendChild(this._sensor);t.getComputedStyle(this._element,"position")=="static"&&(this._element.style.position="relative");this._expand=this._sensor.childNodes.item(0);this._expandChild=this._expand.childNodes[0];this._shrink=this._sensor.childNodes[1];this._lastWidth=this._element.offsetWidth;this._lastHeight=this._element.offsetHeight;this.reset();n.Lattice.Services.EventsDelegatorService.addHandler(this._expand,"scroll",this.onScroll.bind(this));n.Lattice.Services.EventsDelegatorService.addHandler(this._shrink,"scroll",this.onScroll.bind(this))},t.prototype.onResized=function(){(this._rafId=0,this._dirty)&&(this._lastWidth=this._newWidth,this._lastHeight=this._newHeight,this._handler.call())},t.prototype.onScroll=function(){this._newWidth=this._element.offsetWidth;this._newHeight=this._element.offsetHeight;this._dirty=this._newWidth!=this._lastWidth||this._newHeight!=this._lastHeight;var n=this._resizeBoud;this._dirty&&!this._rafId&&(this._rafId=this.requestAnimationFrame.call(window,function(){n()}));this.reset()},t.prototype.reset=function(){this._expandChild.style.width="100000px";this._expandChild.style.height="100000px";this._expand.scrollLeft=1e5;this._expand.scrollTop=1e5;this._shrink.scrollLeft=1e5;this._shrink.scrollTop=1e5},t.getComputedStyle=function(n,t){return n.currentStyle?n.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(n,null).getPropertyValue(t):n.style[t]},t}();t.Resensor=i})(i=t.Rendering||(t.Rendering={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(t){var r=function(){function t(t,i){this.Html="";this._stack=new n.Lattice.Templating.RenderingStack;this.BackInfo={CachedVisualStates:{},CallbacksQueue:[],DatepickersQueue:[],DestroyCallbacksQueue:[],EventsQueue:[],HasVisualStates:!1,MarkQueue:[]};this.w=this.append.bind(this);this.s=this.spaceW.bind(this);this.UiColumns=t();this.Executor=i}return t.prototype.append=function(n){if(n!=null&&n!=undefined)if(this.Context.CurrentTrack==null||this.Context.IsTrackWritten)this.Html+=n.toString();else{var t=n.toString();this.autotrack(t)}},t.prototype.autotrack=function(n){var t,i,r;(this.Context.TrackBuffer+=n,t=this.findStartTag(this.Context.TrackBuffer),t<0)||(t===this.Context.TrackBuffer.length?this.Context.TrackBuffer+=this.trackAttr():(i=this.Context.TrackBuffer.substr(0,t),r=this.Context.TrackBuffer.substring(t,this.Context.TrackBuffer.length),this.Context.TrackBuffer=i+this.trackAttr()+r),this.Html+=this.Context.TrackBuffer,this.Context.IsTrackWritten=!0)},t.prototype.findStartTag=function(n){var i=n.indexOf("<");if(i<0)return-1;while(i+1<n.length-1&&!t.alphaRegex.test(n.charAt(i+1)))i=n.indexOf("<",i+1);if(i<0)return-1;for(i++;i<n.length&&t.alphaRegex.test(n.charAt(i));)i++;return i},t.prototype.nest=function(n,t){this.Executor.nest(n,t,this)},t.prototype.spc=function(n){var t,i;if(this.Executor.Spaces[n])return this.Executor.Spaces[n];for(t="",i=0;i<n;i++)t+=" ";return this.Executor[n]=t,t},t.prototype.spaceW=function(){for(var n=0;n<arguments.length;n++)typeof arguments[n]=="number"?this.w(this.spc(arguments[n])):this.w(arguments[n])},t.prototype.nestElement=function(n,t,i){if(n.renderElement)this.d(n,i),n.renderElement(this),this.u();else{if(!t)throw new Error("Renderable object must have either .renderElement implemented or templateId specified");this.nest(n,t)}},t.prototype.nestContent=function(n,t){if(n.renderContent)n.renderContent(this);else{if(!t)throw new Error("Renderable object must have either .renderContent implemented or templateId specified");this.nest(n,t)}},t.prototype.d=function(n,t){this._stack.push(t,n);this.Context=this._stack.Current},t.prototype.u=function(){this._stack.popContext();this.Context=this._stack.Current?this._stack.Current:null},t.prototype.vs=function(n,t){t.Receiver=this.Context.Object;this.BackInfo.CachedVisualStates[n]||(this.BackInfo.CachedVisualStates[n]=[]);var i=this.BackInfo.CachedVisualStates[n].length;this.BackInfo.CachedVisualStates[n].push(t);this.BackInfo.HasVisualStates=!0;this.w("data-state-"+n+'="'+i+'"')},t.prototype.e=function(n,t,i){var u={EventReceiver:this.Context.Object,Functions:n.split(","),Events:t.split(","),EventArguments:i},r=this.BackInfo.EventsQueue.length;this.BackInfo.EventsQueue.push(u);this.w("data-be-"+r+'="'+r+'" data-evb="true"')},t.prototype.rc=function(n,t){var i=this.BackInfo.CallbacksQueue.length;this.BackInfo.CallbacksQueue.push({Callback:n,CallbackArguments:t,Target:window});this.w('data-cb="'+i+'"')},t.prototype.dc=function(n,t){var i=this.BackInfo.DestroyCallbacksQueue.length;this.BackInfo.DestroyCallbacksQueue.push({Callback:n,CallbackArguments:t,Target:window});this.w('data-dcb="'+i+'"')},t.prototype.m=function(t,i,r){var o=this.BackInfo.MarkQueue.length,f=this.Context.Object,u,e;r!=null&&(u=n.Lattice.Rendering.BackBinder.traverseWindowPath(r),f=u.target||u.parent);e={ElementReceiver:f,FieldName:t,Key:i};this.BackInfo.MarkQueue.push(e);this.w('data-mrk="'+o+'"')},t.prototype.dp=function(n,t){var r=this.BackInfo.DatepickersQueue.length,i;n&&(i={ElementReceiver:this.Context.Object,IsNullable:t},this.BackInfo.DatepickersQueue.push(i),this.w('data-dp="'+r+'"'))},t.prototype.trackAttr=function(){var t=this._stack.Current.CurrentTrack,n;return t.length===0?null:(n='data-track="'+t+'"',(this.Context.Type===i.Row||this.Context.Type===i.Partition)&&this.Context.Object.IsSpecial&&(n+=" data-spr='true'")," "+n+" ")},t.prototype.isLoc=function(n){var t=this.Context.Object.PluginLocation;return t.length<n.length?!1:t.length===n.length&&t===n?!0:t.substring(0,n.length)===n?!0:!1},t.prototype.isLocation=function(){if(this.Context.Type===i.Plugin)for(var n=0;n<arguments.length;n++)if(this.isLoc(arguments[n]))return!0;return!1},t.alphaRegex=/[a-zA-Z]/,t}(),i;t.TemplateProcess=r,function(n){n[n.Plugin=0]="Plugin";n[n.Header=1]="Header";n[n.Row=2]="Row";n[n.Cell=3]="Cell";n[n.Message=4]="Message";n[n.Partition=5]="Partition";n[n.Custom=6]="Custom"}(t.RenderedObject||(t.RenderedObject={}));i=t.RenderedObject})(i=t.Templating||(t.Templating={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function t(){}return t._=function(n,i,r){t._lib[n]||(t._lib[n]={Prefix:n,Templates:{}});t._lib[n].Templates[i]=r},t.executor=function(i,r){if(!t._lib.hasOwnProperty(i))throw new Error("Cannot find templates set with prefix "+i);return new n.TemplatesExecutor(t._lib[i],r)},t._lib={},t}();n._ltcTpl=t})(t=n.Templating||(n.Templating={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(t){var i=function(){function i(n,t){var u=this,r,i;for(this.ColumnRenderes={},this.Spaces={},this._lib=n,this._master=t,this.CoreTemplateIds=t.Configuration.CoreTemplates,this.cacheColumnRenderers(t.InstanceManager.Columns),this._uiColumns=function(){return u.Instances.getUiColumns()},this.Instances=t.InstanceManager,r=" ",i=1;i<=30;i++)this.Spaces[i]=r,r+=" "}return i.prototype.cacheColumnRenderers=function(n){var i,t;for(i in n)if(n.hasOwnProperty(i)){if(t=n[i].Configuration,t.CellRenderingValueFunction){this.ColumnRenderes[t.RawColumnName]=t.CellRenderingValueFunction;continue}if(t.CellRenderingTemplateId){this.ColumnRenderes[t.RawColumnName]="template";continue}this.ColumnRenderes[t.RawColumnName]=function(n){return n.Data!==null&&n.Data!=undefined?n.Data:""}}},i.prototype.executeLayout=function(){return this.execute(null,this.CoreTemplateIds.Layout)},i.prototype.beginProcess=function(){return new t.TemplateProcess(this._uiColumns,this)},i.prototype.endProcess=function(n){return{Html:n.Html,BackbindInfo:n.BackInfo}},i.prototype.execute=function(i,r){if(!this._lib.Templates.hasOwnProperty(r))throw new Error("Cannot find template "+r);var u=new t.TemplateProcess(this._uiColumns,this);return this._lib.Templates[r](i,n.Lattice.Templating.Driver,u.w,u,u.s),{Html:u.Html,BackbindInfo:u.BackInfo}},i.prototype.nest=function(t,i,r){if(!this._lib.Templates.hasOwnProperty(i))throw new Error("Cannot find template "+i);this._lib.Templates[i](t,n.Lattice.Templating.Driver,r.w,r,r.s)},i.prototype.hasTemplate=function(n){return this._lib.Templates.hasOwnProperty(n)},i.prototype.obtainRowTemplate=function(n){if(n.TemplateIdOverride)return n.TemplateIdOverride;if(this._master.Configuration.TemplateSelector){var t=this._master.Configuration.TemplateSelector(n);!t||(n.TemplateIdOverride=t)}return n.TemplateIdOverride?n.TemplateIdOverride:this.CoreTemplateIds.RowWrapper},i.prototype.obtainCellTemplate=function(n){return n.TemplateIdOverride?n.TemplateIdOverride:(n.Column.Configuration.TemplateSelector&&(n.TemplateIdOverride=n.Column.Configuration.TemplateSelector(n)),n.TemplateIdOverride)?n.TemplateIdOverride:this.CoreTemplateIds.CellWrapper},i}();t.TemplatesExecutor=i})(i=t.Templating||(t.Templating={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function t(){}return t.body=function(n){n.w('<input type="hidden" data-track="tableBodyHere" style="display:none;"/>')},t.content=function(i,r){if(i.Context.Object.renderContent)i.Context.Object.renderContent(i);else switch(i.Context.Type){case n.RenderedObject.Header:t.headerContent(i.Context.Object,i);break;case n.RenderedObject.Plugin:throw new Error("It is required to override renderContent for plugin");case n.RenderedObject.Row:t.rowContent(i.Context.Object,i,r);break;case n.RenderedObject.Cell:t.cellContent(i.Context.Object,i);break;default:throw new Error("Unknown rendering context type");}},t.row=function(t,i){t.nestElement(i,t.Executor.obtainRowTemplate(i),n.RenderedObject.Row)},t.headerContent=function(n,t){var i=n.Column.Configuration.Title||n.Column.RawName;t.w(i)},t.rowContent=function(n,i,r){for(var u,e=i.UiColumns,f=0;f<e.length;f++)u=n.Cells[e[f].RawName],r!=null&&r!=undefined&&typeof r=="string"?u.Column.RawName===r&&t.cell(i,u):t.cell(i,u)},t.cell=function(t,i){t.nestElement(i,t.Executor.obtainCellTemplate(i),n.RenderedObject.Cell)},t.cellContent=function(n,t){var i=t.Executor.ColumnRenderes[n.Column.RawName];typeof i=="string"?t.nest(n,n.Column.Configuration.CellRenderingTemplateId):t.w(i(n))},t.plugin=function(n,i,r){var u=n.Executor.Instances.getPlugin(r,i);t.renderPlugin(n,u)},t.plugins=function(n,i){var r=n.Executor.Instances.getPlugins(i),u,f;if(r)for(u in r)r.hasOwnProperty(u)&&(f=r[u],t.renderPlugin(n,f))},t.renderPlugin=function(t,i){if(i.renderElement){t.d(i,n.RenderedObject.Plugin);i.renderElement(t);t.u();return}i.renderContent&&t.nest(i,t.Executor.CoreTemplateIds.PluginWrapper)},t.colHeader=function(n,i){try{t.header(n,n.Executor.Instances.getColumn(i))}catch(r){}},t.header=function(t,i){i.Header.renderElement?(t.d(i.Header,n.RenderedObject.Header),i.Header.renderElement(t),t.u()):t.nest(i.Header,i.Header.TemplateIdOverride||t.Executor.CoreTemplateIds.HeaderWrapper)},t.headers=function(n){var i=n.UiColumns;for(var r in i)i.hasOwnProperty(r)&&t.header(n,i[r])},t}();n.Driver=t})(t=n.Templating||(n.Templating={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t=function(){function t(n){this._beforeCount=0;this._afterCount=0;this._handlersAfter={};this._handlersBefore={};this._masterTable=n}return t.prototype.invokeBefore=function(t,i){var f,e;if(this._beforeCount!==0){var o={MasterTable:this._masterTable,EventArgs:i,EventDirection:n.EventDirection.Before},u=this._handlersBefore,r=0;for(f in u)if(u.hasOwnProperty(f)){for(e=u[f],r=0;r<e.length;r++)e[r].apply(t,[o]);r=0}}},t.prototype.invokeAfter=function(t,i){var f,e;if(this._afterCount!==0){var o={MasterTable:this._masterTable,EventArgs:i,EventDirection:n.EventDirection.After},u=this._handlersAfter,r=0;for(f in u)if(u.hasOwnProperty(f)){for(e=u[f],r=0;r<e.length;r++)e[r].apply(t,[o]);r=0}}},t.prototype.invoke=function(n,t){this.invokeAfter(n,t)},t.prototype.subscribeAfter=function(n,t){this._handlersAfter[t]||(this._handlersAfter[t]=[]);this._handlersAfter[t].push(n);this._afterCount++},t.prototype.subscribe=function(n,t){this.subscribeAfter(n,t)},t.prototype.subscribeBefore=function(n,t){this._handlersBefore[t]||(this._handlersBefore[t]=[]);this._handlersBefore[t].push(n);this._beforeCount++},t.prototype.unsubscribe=function(n){this.unsubscribeBefore(n);this.unsubscribeAfter(n)},t.prototype.unsubscribeAfter=function(n){this._handlersAfter[n]=null;delete this._handlersAfter[n];this._afterCount--},t.prototype.unsubscribeBefore=function(n){this._handlersBefore[n]=null;delete this._handlersBefore[n];this._beforeCount--},t}();n.TableEvent=t})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t=function(){function n(){}return n.getCellTrack=function(t){var i=t.Column.Order,r=t.Row.Index;return n.getCellTrackByIndexes(r,i)},n.getCellTrackByIndexes=function(n,t){return"c-r"+n+"-c"+t},n.getPluginTrack=function(n){return"p-"+n.PluginLocation},n.getPluginTrackByLocation=function(n){return"p-"+n},n.getHeaderTrack=function(n){return"h-"+n.Column.RawName},n.getHeaderTrackByColumnName=function(n){return"h-"+n},n.getRowTrack=function(n){return this.getRowTrackByIndex(n.Index)},n.getRowTrackByObject=function(n){return this.getRowTrackByIndex(n.__i)},n.getMessageTrack=function(){return"r-msg"},n.getPartitionRowTrack=function(){return"r-partition"},n.getRowTrackByIndex=function(n){return"r-"+n},n.getCellLocation=function(n){if(!n||!n.getAttribute)return null;var t=n.getAttribute("data-track").substring(3).split("-c");return{RowIndex:parseInt(t[0]),ColumnIndex:parseInt(t[1])}},n.getRowIndex=function(n){if(!n||!n.getAttribute)return null;var t=n.getAttribute("data-track").substring(2);return parseInt(t)},n}();n.TrackHelper=t})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t=function(){function n(){}return n.registerComponent=function(n,t){this._components[n]=t},n.resolveComponent=function(n,t){if(this._components[n]==null||this._components[n]==undefined)throw new Error("Component "+n+" is not registered. Please ensure that you have connected all the additional scripts");if(t){var i=this._components[n],r=Function.prototype.bind.apply(i,[null].concat(t));return new r}return new this._components[n]},n.registerComponentEvents=function(n,t,i){if(this._components[n]==null||this._components[n]==undefined)throw new Error("Component "+n+" is not registered. Please ensure that you have connected all the additional scripts");this._components[n].registerEvents&&typeof this._components[n].registerEvents=="function"&&this._components[n].registerEvents.call(t,t,i)},n.registerAllEvents=function(n,t){for(var i in this._components)this._components[i].registerEvents&&typeof this._components[i].registerEvents=="function"&&this._components[i].registerEvents.call(n,n,t)},n._components={},n}();n.ComponentsContainer=t})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){this._datepickerOptions=n}return n.prototype.ensureDpo=function(){if(this._datepickerOptions==null||this._datepickerOptions==undefined)throw new Error("For this functionality you need 3rd-party datepicker. Please connect one using .Datepicker method");},n.prototype.isValidDate=function(n){return n===null?!0:n==undefined?!1:Object.prototype.toString.call(n)==="[object Date]"?isNaN(n.getTime())?!1:!0:!1},n.prototype.serialize=function(n){if(n===null||n==undefined)return"";if(Object.prototype.toString.call(n)==="[object Date]")return isNaN(n.getTime())?"":Date.prototype.toISOString.call(n);throw new Error(n+" is not a date at all");},n.prototype.parse=function(n){var t=new Date(n);if(Object.prototype.toString.call(t)==="[object Date]")return isNaN(t.getTime())?null:t;throw new Error(n+" is not a date at all");},n.prototype.getDateFromDatePicker=function(n){if(this.ensureDpo(),n==null||n==undefined)return null;var t=this._datepickerOptions.GetFromDatePicker(n);if(t==null)return null;if(Object.prototype.toString.call(t)==="[object Date]")return isNaN(t.getTime())?null:t;throw new Error(t+" from datepicker is not a date at all");},n.prototype.createDatePicker=function(n,t){(this.ensureDpo(),n!=null&&n!=undefined)&&(t||(t=!1),this._datepickerOptions.CreateDatePicker(n,t))},n.prototype.destroyDatePicker=function(n){(this.ensureDpo(),n!=null&&n!=undefined)&&this._datepickerOptions.DestroyDatepicker(n)},n.prototype.putDateToDatePicker=function(n,t){(this.ensureDpo(),n!=null&&n!=undefined)&&this._datepickerOptions.PutToDatePicker(n,t)},n}();n.DateService=t})(t=n.Services||(n.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={}));Date.prototype.toISOString||function(){function n(n){return n<10?"0"+n:n}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),function(n){var t;(function(t){var i;(function(t){var i=function(){function t(n){this._master=n}return t.prototype.IsSetFinite=function(){return this._master.Partition.isAmountFinite()},t.prototype.Mode=function(){return this._master.Configuration.Partition.Type},t.prototype.ServerCount=function(){return this._master.Partition.totalAmount()},t.prototype.Stored=function(){return this._master.DataHolder.StoredData.length},t.prototype.Filtered=function(){return this._master.DataHolder.Filtered?this._master.DataHolder.Filtered.length:0},t.prototype.Displayed=function(){return this._master.DataHolder.DisplayedData?this._master.DataHolder.DisplayedData.length:0},t.prototype.Ordered=function(){return this._master.DataHolder.Ordered?this._master.DataHolder.Ordered.length:0},t.prototype.Skip=function(){return this._master.Partition.Skip},t.prototype.Take=function(){return this._master.Partition.Take},t.prototype.Pages=function(){if(this._master.Partition.Take===0)return 1;var n=this._master.Partition.amount()/this._master.Partition.Take;return n!==Math.floor(n)&&(n=Math.floor(n)+1),n},t.prototype.CurrentPage=function(){if(this._master.Partition.Skip+this._master.Partition.Take>=this._master.Partition.amount())return this.Pages()-1;if(this._master.Partition.Take===0||this._master.Partition.Skip<this._master.Partition.Take)return 0;var n=this._master.Partition.Skip/this._master.Partition.Take;return Math.floor(n)},t.prototype.IsAllDataLoaded=function(){if(this._master.Configuration.Partition.Type===n.Lattice.PartitionType.Client)return!0},t}();t.StatsService=i})(i=t.Services||(t.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i=function(){function t(n,t,i,r,u){this._outSubscriptions={};this._previousMousePos={row:0,column:0};this._domEvents={};this._outEvents={};this._cellDomSubscriptions={};this._rowDomSubscriptions={};this._directSubscriptions=[];this._destroyCallbacks=[];this._locator=n;this._bodyElement=t;this._layoutElement=i;this._rootId=r;this._masterTable=u;this._matches=function(n){if(!n)return null;var t=n.prototype;return t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector}(Element)}return t.addHandler=function(n,t,i,r){r==null&&(r=!1);n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent.call(n,"on"+t,i):n["on"+t]=i},t.removeHandler=function(n,t,i,r){r==null&&(r=!1);n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent?n.detachEvent.call(n,"on"+t,i):n["on"+t]=null},t.prototype.traverseAndFire=function(n,t,i){var r,u;if(n)for(r=0;r<n.length;r++){if(n[r].Selector)for(u=0;u<t.length;u++){if(this._matches.call(t[u],"#"+this._rootId+" "+n[r].Selector)&&this.filterEvent(i.OriginalEvent,n[r].filter)){n[r].Handler(i);break}if(i.Stop)break}else n[r].Handler(i);if(i.Stop)break}},t.prototype.ensureMouseOpSubscriptions=function(){if(!this._domEvents.hasOwnProperty("mousemove")){var n=this.onMouseMoveEvent.bind(this);t.addHandler(this._bodyElement,"mousemove",n);this._domEvents.mousemove=n}},t.prototype.checkMouseEvent=function(n){if(n==="mouseover"||n==="mouseout")throw Error("Mouseover and mouseout events are not supported. Please use mouseenter and mouseleave events instead");return n==="mouseenter"||n==="mouseleave"||n==="mousemove"?(this.ensureMouseOpSubscriptions(),!0):!1},t.prototype.onMouseMoveEvent=function(t){var i=t.target||t.srcElement,v=t.type,f={mouseenter:this._rowDomSubscriptions.mouseenter,mouseleave:this._rowDomSubscriptions.mouseleave,mousemove:this._rowDomSubscriptions.mousemove},e={mouseenter:this._cellDomSubscriptions.mouseenter,mouseleave:this._cellDomSubscriptions.mouseleave,mousemove:this._cellDomSubscriptions.mousemove},s,h,c,l;if(f.mouseenter||f.mouseleave||f.mousemove||e.mouseenter||e.mousemove||e.mouseleave){for(var r=[],a=[],u=null,o=null;i!==this._bodyElement;)if(this._locator.isCell(i)&&(u=n.TrackHelper.getCellLocation(i)),this._locator.isRow(i)&&(o=n.TrackHelper.getRowIndex(i)),u==null&&r.push(i),o==null&&a.push(i),i=i.parentElement,i.parentElement==null)return;u!=null?(s={Master:this._masterTable,OriginalEvent:t,Row:u.RowIndex,Column:u.ColumnIndex,Stop:!1},(this._previousMousePos.row!==u.RowIndex||this._previousMousePos.column!==u.ColumnIndex)&&(h={Master:this._masterTable,OriginalEvent:t,Row:this._previousMousePos.row,Column:this._previousMousePos.column,Stop:!1},this.traverseAndFire(e.mouseleave,r,h),this.traverseAndFire(e.mouseenter,r,s),this._previousMousePos.row!==u.RowIndex&&(this.traverseAndFire(f.mouseleave,r,h),this.traverseAndFire(f.mouseenter,r,s)),this._previousMousePos.row=u.RowIndex,this._previousMousePos.column=u.ColumnIndex),this.traverseAndFire(e.mousemove,r,s),this.traverseAndFire(f.mousemove,r,s)):o!=null&&(c={Master:this._masterTable,OriginalEvent:t,Row:o,Stop:!1},this._previousMousePos.row!==o&&(l={Master:this._masterTable,OriginalEvent:t,Row:this._previousMousePos.row,Stop:!1},this.traverseAndFire(f.mouseleave,r,l),this.traverseAndFire(f.mouseenter,r,c),this._previousMousePos.row=o),this.traverseAndFire(f.mousemove,r,c))}},t.prototype.ensureEventSubscription=function(n){if(!this.checkMouseEvent(n)&&!this._domEvents.hasOwnProperty(n)){var i=this.onTableEvent.bind(this);t.addHandler(this._bodyElement,n,i);this._domEvents[n]=i}},t.prototype.ensureOutSubscription=function(n){if(!this.checkMouseEvent(n)&&!this._outEvents.hasOwnProperty(n)){var i=this.onOutTableEvent.bind(this);t.addHandler(this._layoutElement,n,i);this._outEvents[n]=i}},t.prototype.subscribeCellEvent=function(n){var t=this.parseEventId(n.EventId);n.EventId=t.__event;n.filter=t;this._cellDomSubscriptions[n.EventId]||(this._cellDomSubscriptions[n.EventId]=[]);this._cellDomSubscriptions[n.EventId].push(n);this.ensureEventSubscription(n.EventId)},t.prototype.subscribeRowEvent=function(n){var t=this.parseEventId(n.EventId);n.EventId=t.__event;n.filter=t;this._rowDomSubscriptions[n.EventId]||(this._rowDomSubscriptions[n.EventId]=[]);this._rowDomSubscriptions[n.EventId].push(n);this.ensureEventSubscription(n.EventId)},t.prototype.subscribeEvent=function(n,i,r,u,f){var o=this.parseEventId(i),e,s;o.__no?(e=function(t){r.call(u,{Element:n,EventObject:t,Receiver:u,EventArguments:f})},t.addHandler(n,i,e)):(i=o.__event,s=this.filterEvent,e=function(t){s(t,o)&&r.call(u,{Element:n,EventObject:t,Receiver:u,EventArguments:f})},t.addHandler(n,i,e));n.setAttribute("data-dsub","true");this._directSubscriptions.push({Element:n,Handler:e,EventId:i})},t.prototype.subscribeOutOfElementEvent=function(n,t,i,r,u){var f=this.parseEventId(t);t=f.__event;this.ensureOutSubscription(t);this._outSubscriptions.hasOwnProperty(t)||(this._outSubscriptions[t]=[]);this._outSubscriptions[t].push({Element:n,EventArguments:u,EventObject:null,Receiver:r,handler:i,filter:f});n.setAttribute("data-outsub","true")},t.prototype.subscribeDestroy=function(n,t){t.Element=n;n.setAttribute("data-dstrycb","true");this._destroyCallbacks.push(t)},t.prototype.parseEventId=function(n){var i,t,r,f;if(n.indexOf("|")<0)return{__event:n,__no:!0};if(i={},n.substr(0,1)==="|")for(t=n.split("|"),i.__event=t[t.length-1],i.__altern={},r=0;r<t.length-1;r++)if(t[r].length!==0){var s=t[r].indexOf("="),h=t[r].substring(0,s),o=t[r].substring(s+1),e=o.substring(2,o.length-1),u;switch(o.charAt(0)){case"b":u=e.toUpperCase()==="TRUE";break;case"i":u=parseInt(e);break;case"f":u=parseFloat(e);break;default:u=e}f=h.split("+");f.length>1?(i[f[0]]=u,i.__altern[f[0]]=f.slice(1)):i[h]=u}return i},t.prototype.filterEvent=function(n,t){var i,u,r;if(t.__no)return!0;for(i in t)if(i!=="__event"&&i!=="__altern"&&n[i]!==t[i]){if(t.__altern[i]){for(u=!1,r=0;r<t.__altern[i].length;r++)if(n[t.__altern[i][r]]===t[i]){u=!0;break}return u}return!1}return!0},t.prototype.onTableEvent=function(t){var i=t.target||t.srcElement,h=t.type,r=this._rowDomSubscriptions[h],f=this._cellDomSubscriptions[h],s,l;if(r||(r=[]),f||(f=[]),r.length!==0||f.length!==0){for(var o=[],c=[],u=null,e=null;i!==this._bodyElement;)if(this._locator.isCell(i)&&(u=n.TrackHelper.getCellLocation(i)),this._locator.isRow(i)&&(e=n.TrackHelper.getRowIndex(i)),u==null&&o.push(i),e==null&&c.push(i),i=i.parentElement,i.parentElement==null)return;u!=null?(s={Master:this._masterTable,OriginalEvent:t,Row:u.RowIndex,Column:u.ColumnIndex,Stop:!1},this.traverseAndFire(f,o,s),this.traverseAndFire(r,o,s)):e!=null&&(l={Master:this._masterTable,OriginalEvent:t,Row:e,Stop:!1},this.traverseAndFire(r,c,l))}},t.prototype.onOutTableEvent=function(n){for(var u=this._outSubscriptions[n.type],e=n.target||n.srcElement,r=0;r<u.length;r++){for(var t=u[r],i=e,f=!1;i!==this._layoutElement;){if(i===t.Element){f=!0;break}if(i=i.parentElement,i.parentElement==null)return}f||this.filterEvent(n,t.filter)&&(t.EventObject=n,t.handler.apply(t.Receiver,t))}},t.prototype.handleElementDestroy=function(n){var i=this.collectElementsHavingAttribute(n,"data-outsub"),e,s,o,f,c,r,u,h;if(i.length!==0)for(e in this._outSubscriptions){for(s=this._outSubscriptions[e],o=0;o<s.length;o++)if(i.indexOf(s[o].Element)>-1){s.splice(o,1);break}this._outSubscriptions[e].length===0&&(t.removeHandler(this._layoutElement,e,this._outEvents[e]),delete this._outEvents[e])}if(i=this.collectElementsHavingAttribute(n,"data-dsub"),i.length!==0)for(f=0;f<this._directSubscriptions.length;f++)i.indexOf(this._directSubscriptions[f].Element)>-1&&t.removeHandler(this._directSubscriptions[f].Element,this._directSubscriptions[f].EventId,this._directSubscriptions[f].Handler);if(i=this.collectElementsHavingAttribute(n,"data-dstrycb"),i.length){for(c=[],r=0;r<this._destroyCallbacks.length;r++)i.indexOf(this._destroyCallbacks[r].Element)>-1&&(u=this._destroyCallbacks[r],typeof u.Callback=="function"?u.Callback.apply(u.Target,[this._destroyCallbacks[r].Element].concat(u.CallbackArguments)):window[u.Callback].apply(u.Target,[this._destroyCallbacks[r].Element].concat(u.CallbackArguments))),c.push(r);for(h=0;h<c.length;h++)this._destroyCallbacks.splice(h,1)}},t.prototype.collectElementsHavingAttribute=function(n,t){for(var u=n.querySelectorAll("["+t+"]"),i=[],r=0;r<u.length;r++)i.push(u[r]);return n.hasAttribute(t)&&i.push(n),i},t}();t.EventsDelegatorService=i})(t=n.Services||(n.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i=function(){function t(t){this._masterTable=t;this.QueryGathering=new n.TableEvent(t);this.ClientQueryGathering=new n.TableEvent(t);this.Loading=new n.TableEvent(t);this.LoadingError=new n.TableEvent(t);this.ColumnsCreation=new n.TableEvent(t);this.DataReceived=new n.TableEvent(t);this.LayoutRendered=new n.TableEvent(t);this.ClientDataProcessing=new n.TableEvent(t);this.DataRendered=new n.TableEvent(t);this.DeferredDataReceived=new n.TableEvent(t);this.Adjustment=new n.TableEvent(t);this.Edit=new n.TableEvent(t);this.EditValidationFailed=new n.TableEvent(t);this.SelectionChanged=new n.TableEvent(t);this.PartitionChanged=new n.TableEvent(t);this.Filtered=new n.TableEvent(t);this.Ordered=new n.TableEvent(t);this.Partitioned=new n.TableEvent(t);this.AdjustmentRender=new n.TableEvent(t)}return t.prototype.registerEvent=function(t){this[t]=new n.TableEvent(this._masterTable)},t}();t.EventsService=i})(t=n.Services||(n.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){this._additionalRowsProviders=[];this._masterTable=n;n.Loader.registerAdditionalDataReceiver("Reload",this)}return n.prototype.registerAdditionalRowsProvider=function(n){this._additionalRowsProviders.push(n)},n.prototype.reload=function(n){var t=this;this._masterTable.Loader.query(function(n){if(n==null){t.redrawVisibleData();return}n.Success===!1&&n.Message&&n.Message.__Go7XIV13OA===!0||t.redrawVisibleData()},null,null,n)},n.prototype.redrawVisibleDataObject=function(n){var i=n.__i,t;return(n=this._masterTable.DataHolder.StoredCache[i],!n)?null:this._masterTable.DataHolder.DisplayedData.indexOf(n)<0?null:(t=this.produceRow(n),this._masterTable.Renderer.Modifier.redrawRow(t))},n.prototype.redrawVisibleData=function(){var n=this.produceRows();this._masterTable.Renderer.body(n)},n.prototype.replaceVisibleData=function(n){this._masterTable.Renderer.body(n)},n.prototype.redrawVisibleCells=function(n,t){var u=this._masterTable.DataHolder.localLookupDisplayedDataObject(n),r,i;if(u==null)throw new Error("Cannot redraw cells because proposed object it is not displaying currently");for(r=this.produceRow(n),i=0;i<t.length;i++)r.Cells.hasOwnProperty(t[i].RawName)&&this._masterTable.Renderer.Modifier.redrawCell(r.Cells[t[i].RawName])},n.prototype.redrawColumns=function(n){for(var t,r=this.produceRows(),i=0;i<r.length;i++)for(t=0;t<n.length;t++)this._masterTable.Renderer.Modifier.redrawCell(r[i].Cells[n[t].RawName])},n.prototype.drawAdjustmentResult=function(n){var t,i,f,r,s,e,u,h,o;for(this._masterTable.Events.AdjustmentRender.invokeBefore(this,n),n.NeedRefilter&&this._masterTable.DataHolder.filterStoredDataWithPreviousQuery(),t=this.produceRows(),i=0;i<t.length;i++){if(f=!1,r=[],n.AddedData.indexOf(t[i])>-1)t[i].IsAdded=!0,f=!0;else if(s=n.TouchedData.indexOf(t[i].DataObject),s>-1)for(t[i].IsUpdated=!0,f=!0,e=n.TouchedColumns[s],u=0;u<e.length;u++)t[i].Cells.hasOwnProperty(e[u])&&(h=t[i].Cells[e[u]],h.IsUpdated=!0,r.push(h));if(!n.NeedRefilter)if(f)this._masterTable.Renderer.Modifier.redrawRow(t[i]);else if(r.length>0)for(o=0;o<r.length;o++)this._masterTable.Renderer.Modifier.redrawCell(r[o])}n.NeedRefilter&&(t.length==0?this.redrawVisibleData():this._masterTable.Renderer.body(t));this._masterTable.Events.AdjustmentRender.invokeAfter(this,n)},n.prototype.produceCell=function(n,t,i){return{Column:t,Data:n[t.RawName],DataObject:n,Row:i,renderContent:null,renderElement:null,IsSelected:this._masterTable.Selection.isCellSelected(n,t)}},n.prototype.produceRow=function(n,t){var i,u,r,f,e;if(!n)return null;for(t||(t=this._masterTable.InstanceManager.getUiColumns()),i={DataObject:n,Index:n.__i,MasterTable:this._masterTable,IsSelected:this._masterTable.Selection.isSelected(n),CanBeSelected:this._masterTable.Selection.canSelect(n),Cells:null},u={},r=0;r<t.length;r++)f=t[r],e=this.produceCell(n,f,i),u[f.RawName]=e;return i.Cells=u,i},n.prototype.produceRowsFromData=function(n){var i,u,t,f,r;for(this._masterTable.Events.DataRendered.invokeBefore(this,null),i=[],u=this._masterTable.InstanceManager.getUiColumns(),t=0;t<n.length;t++)(f=n[t],r=this.produceRow(f,u),r)&&i.push(r);return i},n.prototype.produceRows=function(){for(var r,t,n=this.produceRowsFromData(this._masterTable.DataHolder.DisplayedData),u=n.length,i=0;i<this._additionalRowsProviders.length;i++)this._additionalRowsProviders[i].provide(n);if(u!==n.length)for(r=-1,t=0;t<n.length;t++)n[t].IsSpecial&&(n[t].Index=r,r--);return n},n.prototype.handleAdditionalData=function(n){if(n!=null&&n!==undefined&&(this.reload(n.ForceServer),n.ReloadTableIds&&n.ReloadTableIds.length>0))for(var t=0;t<n.ReloadTableIds.length;t++)window.__latticeInstances[n.ReloadTableIds[t]]&&window.__latticeInstances[n.ReloadTableIds[t]].Controller.reload(n.ForceServer)},n}();n.Controller=t})(t=n.Services||(n.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i=function(){function t(n){var i,t;this._comparators={};this._filters=[];this._anyClientFiltration=!1;this._clientValueFunction={};this.DisplayedData=[];this.StoredData=[];this._manadatoryOrderings=[];this.StoredCache={};this._rawColumnNames=n.InstanceManager.getColumnNames();this._events=n.Events;this._instances=n.InstanceManager;this._masterTable=n;for(i in n.InstanceManager.Columns)t=n.InstanceManager.Columns[i],t.Configuration.ClientValueFunction!=null&&t.Configuration.ClientValueFunction!=undefined&&(this._clientValueFunction[t.RawName]=t.Configuration.ClientValueFunction);this._configuration=n.Configuration;this.compileComparisonFunction()}return t.prototype.registerClientFilter=function(n){this._anyClientFiltration=!0;this._filters.push(n)},t.prototype.getClientFilters=function(){return this._filters},t.prototype.clearClientFilters=function(){this._anyClientFiltration=!1;this._filters=[]},t.prototype.compileKeyFunction=function(n){var r,i,t,u;for(window.___ltcstrh||(window.___ltcstrh=function(n){var i,t;if(n==null)return"";for(i="",t=0;t<n.length;t++)i+=n[t]==="\\"?"\\\\":n[t]===":"?"\\:":n[t];return i}),r=[],i=0;i<n.length;i++)t=n[i],this._instances.Columns[n[i]].IsDateTime?r.push("((x."+t+")==null?'':((x."+t+").getTime()))"):this._instances.Columns[n[i]].IsBoolean?r.push("((x."+t+")==null?'':(x."+t+"?'1':'0'))"):this._instances.Columns[n[i]].IsString?r.push("(window.___ltcstrh(x."+t+"))"):r.push("((x."+t+")==null?'':(x."+t+".toString()))");return u=r.join('+":"+'),eval("(function(x) { return ("+u+") + ':'; })")},t.prototype.compileComparisonFunction=function(){if(!this._configuration.KeyFields||this._configuration.KeyFields.length===0){this.DataObjectComparisonFunction=function(){throw Error("You must specify key fields for table row to use current setup. Please call .PrimaryKey on configuration object and specify set of columns exposing primary key.");};this.PrimaryKeyFunction=function(){throw Error("You must specify key fields for table row to use current setup. Please call .PrimaryKey on configuration object and specify set of columns exposing primary key.");};this._hasPrimaryKey=!1;return}this._configuration.KeyFields.length!==0&&(this.DataObjectComparisonFunction=function(n,t){return n.__key===t.__key},this.PrimaryKeyFunction=this.compileKeyFunction(this._configuration.KeyFields),this._hasPrimaryKey=!0)},t.prototype.registerClientOrdering=function(n,t,i){i===void 0&&(i=!1);this._anyClientFiltration=!0;this._comparators[n]=t;i&&this._manadatoryOrderings.push(n)},t.prototype.isClientFiltrationPending=function(){return this._anyClientFiltration},t.prototype.deserializeData=function(n){for(var f,e=[],t={},i=this.getNextNonSpecialColumn(-1),u=this._rawColumnNames[i],r=0;r<n.length;r++){if(t[u]=this._instances.Columns[u].IsDateTime?n[r]?this._masterTable.Date.parse(n[r]):null:n[r],i=this.getNextNonSpecialColumn(i),i===-1){i=this.getNextNonSpecialColumn(i);for(f in this._clientValueFunction)t[f]=this._clientValueFunction[f](t);e.push(t);this._hasPrimaryKey&&(t.__key=this.PrimaryKeyFunction(t),this._pkDataCache.hasOwnProperty(t.__key)&&(t.__i=this._pkDataCache[t.__key].__i));t={}}u=this._rawColumnNames[i]}return e},t.prototype.getNextNonSpecialColumn=function(n){do if(n++,n>=this._rawColumnNames.length)return-1;while(this._instances.Columns[this._rawColumnNames[n]].Configuration.IsSpecial);return n},t.prototype.storeResponse=function(n,t){var f=[],i={},r=this.getNextNonSpecialColumn(-1),e=this._rawColumnNames[r],u,o;for(t.IsBackgroundDataFetch||(this._pkDataCache={},this.StoredCache={}),u=0;u<n.Data.length;u++){if(i[e]=this._instances.Columns[e].IsDateTime?n.Data[u]?this._masterTable.Date.parse(n.Data[u]):null:n.Data[u],r=this.getNextNonSpecialColumn(r),r===-1){r=this.getNextNonSpecialColumn(r);for(o in this._clientValueFunction)i[o]=this._clientValueFunction[o](i);this._hasPrimaryKey?(i.__key=this.PrimaryKeyFunction(i),this._pkDataCache[i.__key]||f.push(i),this._pkDataCache[i.__key]=i):f.push(i);i.__i=t.Partition.Skip+f.length-1;this.StoredCache[i.__i]=i;i={}}e=this._rawColumnNames[r]}this.StoredData=t.IsBackgroundDataFetch?this.StoredData.concat(f):f},t.prototype.filterSet=function(n,t){var e=[],i,f,r,u,o;if(this._filters.length!==0){for(i=0;i<n.length;i++){for(f=n[i],r=!0,u=0;u<this._filters.length;u++)if(o=this._filters[u],r=o.filterPredicate(f,t),!r)break;r&&e.push(f)}return e}return n},t.prototype.satisfyCurrentFilters=function(n){return this.RecentClientQuery?this.satisfyFilters(n,this.RecentClientQuery):!0},t.prototype.satisfyFilters=function(n,t){var i,r,u;if(this._filters.length===0)return!0;for(i=!0,r=0;r<this._filters.length;r++)if(u=this._filters[r],i=u.filterPredicate(n,t),!i)break;return i},t.prototype.orderWithCurrentOrderings=function(n){return this.orderSet(n,this.RecentClientQuery)},t.prototype.orderSet=function(t,i){var o,u,s,h,c,l;if(i.Orderings){var r="",f="",e=[];for(o=0;o<this._rawColumnNames.length;o++)if(u=this._rawColumnNames[o],i.Orderings.hasOwnProperty(u)||this._manadatoryOrderings.indexOf(u)>=0){if(s=i.Orderings[u],s===n.Ordering.Neutral)continue;if(!this._comparators[u])continue;h=s===n.Ordering.Descending;r+="cc=f"+e.length+"(a,b); ";f+="f"+e.length+",";e.push(this._comparators[u]);r+="if (cc!==0) return "+(h?"-cc":"cc")+"; "}return r.length===0?t:(f=f.substr(0,f.length-1),r="(function("+f+"){ return (function (a,b) { var cc = 0; "+r+" return 0; }); })",c=eval(r).apply(null,e),l=t.sort(c),l)}return t},t.prototype.filterStoredData=function(n,t){if(this._events.ClientDataProcessing.invokeBefore(this,n),this.DisplayedData=this.StoredData,this.Filtered=this.StoredData,this.Ordered=this.StoredData,this.RecentClientQuery=n,this.isClientFiltrationPending()&&!!n){var i=this.StoredData.slice();this._masterTable.Events.Filtered.invokeBefore(this,i);this.Filtered=this.filterSet(i,n);this._masterTable.Events.Filtered.invokeAfter(this,this.Filtered);this._masterTable.Events.Ordered.invokeBefore(this,this.Filtered);this.Ordered=this.orderSet(this.Filtered,n);this._masterTable.Events.Ordered.invokeAfter(this,this.Ordered)}this.DisplayedData=this._masterTable.Partition.partitionAfterQuery(this.Ordered,n,t);this._events.ClientDataProcessing.invokeAfter(this,{Displaying:this.DisplayedData,Filtered:this.Filtered,Ordered:this.Ordered,Source:this.StoredData})},t.prototype.filterStoredDataWithPreviousQuery=function(){this.filterStoredData(this.RecentClientQuery,-1)},t.prototype.localLookup=function(n,t){var i,r,u,f;for(t===void 0&&(t=this.StoredData),i=[],r=0;r<t.length;r++)n(t[r])&&i.push({DataObject:t[r],IsCurrentlyDisplaying:!1,LoadedIndex:t[r].__i,DisplayedIndex:-1});for(u=0;u<i.length;u++)f=this.DisplayedData.indexOf(i[u].DataObject),f>=0&&(i[u].IsCurrentlyDisplaying=!0,i[u].DisplayedIndex=f);return i},t.prototype.localLookupDisplayedDataObject=function(n){var t=this.DisplayedData.indexOf(n);return t<0?null:{DataObject:n,IsCurrentlyDisplaying:!0,DisplayedIndex:t,LoadedIndex:n.__i}},t.prototype.localLookupStoredDataObject=function(n){var t=this.StoredData.indexOf(n);return t<0?null:{DataObject:n,IsCurrentlyDisplaying:!0,DisplayedIndex:this.DisplayedData.indexOf(n),LoadedIndex:t}},t.prototype.localLookupStoredData=function(n){if(n<0||n>this.StoredData.length)return null;return{DataObject:this.StoredData[n],IsCurrentlyDisplaying:!0,DisplayedIndex:this.DisplayedData.indexOf(this.StoredData[n]),LoadedIndex:n}},t.prototype.getByPrimaryKeyObject=function(n){return this._pkDataCache[this.PrimaryKeyFunction(n)]},t.prototype.getByPrimaryKey=function(n){return this._pkDataCache[n]},t.prototype.detachByKey=function(n){var t=this.getByPrimaryKey(n);t&&this.detach(t)},t.prototype.detach=function(n){if(n){delete this.StoredCache[n.__i];delete this._pkDataCache[n.__key];var t=this.StoredData.indexOf(n);t>-1&&this.StoredData.splice(t,1);t=this.Filtered.indexOf(n);t>-1&&this.Filtered.splice(t,1);t=this.Ordered.indexOf(n);t>-1&&this.Ordered.splice(t,1);t=this.DisplayedData.indexOf(n);t>-1&&this.DisplayedData.splice(t,1)}},t.prototype.localLookupPrimaryKey=function(n,t){var i,r,u,f;return(t===void 0&&(t=this.StoredData),i=null,r={DataObject:null,IsCurrentlyDisplaying:!1,DisplayedIndex:-1,LoadedIndex:-1},!this._hasPrimaryKey)?r:(u=this.PrimaryKeyFunction(n),!this._pkDataCache.hasOwnProperty(u))?r:(i=this._pkDataCache[u],f=this.DisplayedData.indexOf(i),{DataObject:i,IsCurrentlyDisplaying:f>-1,DisplayedIndex:f,LoadedIndex:i.__i})},t.prototype.copyData=function(n,t){var f=[],i,r,u;for(i in this._instances.Columns)this._instances.Columns[i].Configuration.IsSpecial||n.hasOwnProperty(i)&&(r=n[i],u=t[i],this._instances.Columns[i].IsDateTime&&(r=r==null?null:r.getTime(),u=u==null?null:u.getTime()),r!==u&&(f.push(i),t[i]=n[i]));return f},t.prototype.defaultObject=function(){for(var n,r,t={},i=0;i<this._rawColumnNames.length;i++)n=this._masterTable.InstanceManager.Columns[this._rawColumnNames[i]],(n.IsInteger||n.IsFloat)&&(t[n.RawName]=0),n.IsBoolean&&(t[n.RawName]=!1),n.IsDateTime&&(t[n.RawName]=new Date),n.IsString&&(t[n.RawName]=""),n.IsEnum&&(t[n.RawName]=0),n.Configuration.IsNullable&&(t[n.RawName]=null);for(r in this._clientValueFunction)t[r]=this._clientValueFunction[r](t);return this._hasPrimaryKey&&(t.__key=this.PrimaryKeyFunction(t)),t.__i=this.StoredData.length-1,t},t.prototype.proceedAdjustments=function(n){var t,f,e,r,s,a,h;if(this._masterTable.Events.Adjustment.invokeBefore(this,n),this.RecentClientQuery==null||this.RecentClientQuery==undefined)return null;var u=!1,v=[],c=[],l=[],o=[],i=this.deserializeData(n.UpdatedData);for(t=0;t<i.length;t++)f=this.getByPrimaryKey(i[t].__key),f?(l.push(this.copyData(i[t],f)),c.push(f),this.DisplayedData.indexOf(f)>-1&&v.push(f),u=!0):(this.StoredData.push(i[t]),i[t].hasOwnProperty("__i")||(i[t].__i=this._masterTable.Partition.Skip+this.StoredData.length-1),o.push(i[t]),this._pkDataCache[i[t].__key]=i[t],this.StoredCache[i[t].__i]=i[t],u=!0);for(e=0;e<n.RemoveKeys.length;e++)(r=this.getByPrimaryKey(n.RemoveKeys[e]),r!=null&&r!=undefined)&&(s=this.StoredData.indexOf(r),s>-1&&(a=this.StoredData[s],this.StoredData.splice(this.StoredData.indexOf(r),1),u=!0,delete this._pkDataCache[n.RemoveKeys[e]],delete this.StoredCache[a.__i]),this.Filtered.indexOf(r)>-1&&(this.Filtered.splice(this.Filtered.indexOf(r),1),u=!0),this.Ordered.indexOf(r)>-1&&(this.Ordered.splice(this.Ordered.indexOf(r),1),u=!0));return this._masterTable.Selection.handleAdjustments(o,n.RemoveKeys),h={NeedRefilter:u,AddedData:o,TouchedData:c,TouchedColumns:l},this._masterTable.Events.Adjustment.invokeAfter(this,h),h},t}();t.DataHolderService=i})(t=n.Services||(n.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i=function(){function t(n,t,i){this.Columns={};this.Plugins={};this._rawColumnNames=[];this._configuration=n;this._masterTable=t;this._events=i;this._isHandlingSpecialPlacementCase=!!this._configuration.EmptyFiltersPlaceholder;this._specialCasePlaceholder=this._configuration.EmptyFiltersPlaceholder;this.initColumns()}return t.classifyType=function(n){return{IsDateTime:t._datetimeTypes.indexOf(n)>-1,IsString:t._stringTypes.indexOf(n)>-1,IsFloat:t._floatTypes.indexOf(n)>-1,IsInteger:t._integerTypes.indexOf(n)>-1,IsBoolean:t._booleanTypes.indexOf(n)>-1,IsNullable:t.endsWith(n,"?")}},t.prototype.initColumns=function(){for(var f,r,u,n=[],i=0;i<this._configuration.Columns.length;i++)f=this._configuration.Columns[i],r=t.createColumn(f,this._masterTable,i),this.Columns[r.RawName]=r,n.push(r);for(n=n.sort(function(n,t){return n.Order-t.Order}),u=0;u<n.length;u++)this._rawColumnNames.push(n[u].RawName)},t.createColumn=function(n,i,r){var u={Configuration:n,RawName:n.RawColumnName,MasterTable:i,Header:null,Order:r==null?0:r,IsDateTime:t._datetimeTypes.indexOf(n.ColumnType)>-1,IsString:t._stringTypes.indexOf(n.ColumnType)>-1,IsFloat:t._floatTypes.indexOf(n.ColumnType)>-1,IsInteger:t._integerTypes.indexOf(n.ColumnType)>-1,IsBoolean:t._booleanTypes.indexOf(n.ColumnType)>-1,IsEnum:n.IsEnum,UiOrder:0};return u.Header={Column:u,renderContent:null,renderElement:null},u},t.prototype.initPlugins=function(){var c=this._configuration.PluginsConfiguration,o={},l=!1,e,i,r,s,f,h;for(n.ComponentsContainer.registerAllEvents(this._events,this._masterTable),e=0;e<c.length;e++)i=c[e],r=n.ComponentsContainer.resolveComponent(i.PluginId),r.PluginLocation=i.Placement?i.Placement+"-"+i.PluginId:i.PluginId,r.RawConfig=i,r.Order=i.Order||0,r.init(this._masterTable),this._isHandlingSpecialPlacementCase&&t.startsWith(i.Placement,this._specialCasePlaceholder)?(o[i.Placement+"-"]=r,l=!0):this.Plugins[r.PluginLocation]=r;if(this._events.ColumnsCreation.invokeBefore(this,this.Columns),this._isHandlingSpecialPlacementCase&&l)for(s=this.getUiColumnNames(),f=0;f<s.length;f++){var v=s[f],a=this._specialCasePlaceholder+"-"+v+"-",u=null;for(h in o)t.startsWith(h,a)&&(u=o[h]);u==null&&(u={PluginLocation:a+"-empty",renderContent:function(){return""},Order:0,RawConfig:null,renderElement:null,init:null});u.Order=f;this.Plugins[u.PluginLocation]=u}this._events.ColumnsCreation.invokeAfter(this,this.Columns)},t.startsWith=function(n,t){if(n==undefined||n===null||t.length>n.length)return!1;if(n===t)return!0;var i=n.substring(0,t.length);return i===t},t.endsWith=function(n,t){if(n==undefined||n===null||t.length>n.length)return!1;if(n===t)return!0;var i=n.substring(n.length-t.length-1,t.length);return i===t},t.prototype._subscribeConfiguredEvents=function(){for(var n,r,u,i=this._masterTable.Renderer.Delegator,t=0;t<this._configuration.Subscriptions.length;t++)n=this._configuration.Subscriptions[t],n.IsRowSubscription?(r=function(n){return function(t){n(t)}}(n.Handler),i.subscribeRowEvent({EventId:n.DomEvent,Selector:n.Selector,Handler:r,SubscriptionId:"configured-row-"+t})):(u=n.ColumnName==null?n.Handler:function(n,t,i){return function(r){t.getColumnNames().indexOf(i)===r.Column&&n(r)}}(n.Handler,this._masterTable.InstanceManager,n.ColumnName),i.subscribeCellEvent({EventId:n.DomEvent,Selector:n.Selector,Handler:u,SubscriptionId:"configured-cell-"+t}))},t.prototype.getPlugin=function(n,i){var r,u,f;if(i||(i=""),r=i.length===0?n:i+"-"+n,this.Plugins[r])return this.Plugins[r];for(u in this.Plugins)if(this.Plugins.hasOwnProperty(u)&&(f=this.Plugins[u],t.startsWith(f.RawConfig.PluginId,n)))return f;throw new Error("There is no plugin "+n+" on place "+i);},t.prototype.getPlugins=function(n){var r=[],i,u;t.endsWith(n,"-")||(n+="-");for(i in this.Plugins)this.Plugins.hasOwnProperty(i)&&(u=(i+"-").substring(0,n.length),u===n&&r.push(this.Plugins[i]));return r.sort(function(n,t){return n.Order-t.Order})},t.prototype.getColumnFilter=function(n){var i="filter-"+n,t,r;for(t in this.Plugins)if(this.Plugins.hasOwnProperty(t)&&(r=t.substring(0,i.length),r===i))return this.Plugins[t];throw new Error("There is no filter for "+n);},t.prototype.getColumnNames=function(){return this._rawColumnNames},t.prototype.getUiColumnNames=function(){for(var t=[],i=this.getUiColumns(),n=0;n<i.length;n++)t.push(i[n].RawName);return t},t.prototype.getUiColumns=function(){var n=[],i,r,t;for(i in this.Columns)if(this.Columns.hasOwnProperty(i)){if(r=this.Columns[i],r.Configuration.IsDataOnly)continue;n.push(r)}for(n=n.sort(function(n,t){return n.Configuration.DisplayOrder-t.Configuration.DisplayOrder}),t=0;t<n.length;t++)n[t].UiOrder=t;return n},t.prototype.getColumn=function(n){if(!this.Columns.hasOwnProperty(n))throw new Error("Column "+n+" not found for rendering");return this.Columns[n]},t.prototype.getColumnByOrder=function(n){return this.Columns[this._rawColumnNames[n]]},t._datetimeTypes=["DateTime","DateTime?"],t._stringTypes=["String"],t._floatTypes=["Single","Double","Decimal","Single?","Double?","Decimal?"],t._integerTypes=["Int32","Int64","Int16","SByte","Byte","UInt32","UInt64","UInt16","Int32?","Int64?","Int16?","SByte?","Byte?","UInt32?","UInt64?","UInt16?"],t._booleanTypes=["Boolean","Boolean?"],t}();t.InstanceManagerService=i})(t=n.Services||(n.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i=function(){function t(n,t,i){this._queryPartProviders=[];this._additionalDataReceivers={};this._isFirstTimeLoading=!1;this._runningBackgroundRequests=[];this._isLoading=!1;this._staticData=n;this._operationalAjaxUrl=t;this._masterTable=i;this._events=this._masterTable.Events;this._dataHolder=this._masterTable.DataHolder}return t.prototype.registerQueryPartProvider=function(n){this._queryPartProviders.push(n)},t.prototype.registerAdditionalDataReceiver=function(n,t){this._additionalDataReceivers[n]||(this._additionalDataReceivers[n]=[]);this._additionalDataReceivers[n].push(t)},t.prototype.prefetchData=function(t){var i=this.gatherQuery(n.QueryScope.Client),u=this.gatherQuery(n.QueryScope.Server),r;this._masterTable.Partition.partitionBeforeQuery(u,i,!1);r={Data:{Data:t,AdditionalData:null,Success:!0,BatchSize:0,Message:null,PageIndex:0,ResultsCount:0},Request:null,XMLHttp:null,IsAdjustment:!1};this._masterTable.Events.DataReceived.invokeBefore(this,r);this._dataHolder.storeResponse({Data:t},i);this._previousQueryString=JSON.stringify(i);this._masterTable.Events.DataReceived.invokeAfter(this,r)},t.prototype.gatherQuery=function(t){var i={Orderings:{},Filterings:{},AdditionalData:{},StaticDataJson:this._masterTable.Configuration.StaticData,Selection:null,IsBackgroundDataFetch:!1,Partition:null},r;for(t===n.QueryScope.Client?this._events.ClientQueryGathering.invokeBefore(this,{Query:i,Scope:t}):this._events.QueryGathering.invokeBefore(this,{Query:i,Scope:t}),r=0;r<this._queryPartProviders.length;r++)this._queryPartProviders[r].modifyQuery(i,t);return t===n.QueryScope.Client?this._events.ClientQueryGathering.invokeAfter(this,{Query:i,Scope:t}):this._events.QueryGathering.invokeAfter(this,{Query:i,Scope:t}),i},t.prototype.createXmlHttp=function(){var n;try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{n=new ActiveXObject("Microsoft.XMLHTTP")}catch(i){n=!1}}return n||typeof XMLHttpRequest=="undefined"||(n=new XMLHttpRequest),n},t.prototype.cancelBackground=function(){for(var n=0;n<this._runningBackgroundRequests.length;n++)this._runningBackgroundRequests[n].abort();this._runningBackgroundRequests=[]},t.prototype.getXmlHttp=function(n){n||this._previousRequest&&(this._previousRequest.abort(),this._previousRequest=null,this.cancelBackground());var t=this.createXmlHttp();return t.open("POST",this._operationalAjaxUrl,!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("Content-type","application/json"),n?this._runningBackgroundRequests.push(t):this._previousRequest=t,t},t.prototype.checkError=function(n,t){return n==null?!1:n.__ZBnpwvibZm&&n.Success!=undefined&&!n.Success?(this._masterTable.MessageService.showMessage(n.Message),this._events.LoadingError.invoke(this,{Request:t,Reason:n.Message}),!0):!1},t.prototype.checkMessage=function(t){if(t==null)return!1;if(t.Message&&t.Message.__Go7XIV13OA){var i=t.Message;return(this._masterTable.MessageService.showMessage(i),i.Type===n.MessageType.Banner)?!0:!1}return!1},t.prototype.checkAdditionalData=function(n){var r,t,u,i;if(n!=null&&n.AdditionalData&&n.AdditionalData.__TxQeah2p){r=n.AdditionalData.Data;for(t in r)if(this._additionalDataReceivers[t])for(u=this._additionalDataReceivers[t],i=0;i<u.length;i++)u[i].handleAdditionalData(r[t])}},t.prototype.checkAdjustment=function(n,t){if(n==null)return!1;if(n.__XqTFFhTxSu){this._events.DataReceived.invokeBefore(this,{Request:t,Data:n,IsAdjustment:!0});this._masterTable.proceedAdjustments(n);for(var i in n.OtherTablesAdjustments)n.OtherTablesAdjustments.hasOwnProperty(i)&&window.__latticeInstances[i]&&window.__latticeInstances[i].proceedAdjustments(n.OtherTablesAdjustments[i]);return this._events.DataReceived.invokeAfter(this,{Request:t,Data:n,IsAdjustment:!0}),!0}return!1},t.prototype.handleRegularJsonResponse=function(n,t,i,r,u){var f=JSON.parse(n),o=this.checkError(f,t),s=this.checkMessage(f),e;if(s){this.checkAdditionalData(f);r(f);return}if(e=this.checkAdjustment(f,t),e){this.checkAdditionalData(f);r(f);return}o?(this.checkAdditionalData(f),u&&u(f)):t.Command==="query"?(this._events.DataReceived.invokeBefore(this,{Request:t,Data:f,IsAdjustment:!1}),this._dataHolder.storeResponse(f,i),this._events.DataReceived.invokeAfter(this,{Request:t,Data:f,IsAdjustment:!1}),this._dataHolder.filterStoredData(i,f.ResultsCount),this.checkAdditionalData(f),r(f),t.Query.Selection=null,t.Query.Partition=null,t.Query.IsBackgroundDataFetch||(this._previousQueryString=JSON.stringify(t.Query))):(this.checkAdditionalData(f),r(f))},t.prototype.handleDeferredResponse=function(n,t,i){if(n.indexOf("$Token=")===0){var r=n.substr(7,n.length-7),u=this._operationalAjaxUrl+(this._operationalAjaxUrl.indexOf("?")>-1?"&":"?")+"q="+r;this._events.DeferredDataReceived.invoke(this,{Request:t,Token:r,DataUrl:u});i({$isDeferred:!0,$url:u,$token:r})}},t.prototype.isLoading=function(){return this._isLoading},t.prototype.doServerQuery=function(n,t,i,r){var f=this,u,e,o;this._isLoading=!0;u=this.getXmlHttp(n.Query.IsBackgroundDataFetch);e=JSON.stringify(n);this._events.Loading.invokeBefore(this,{Request:n,XMLHttp:u});o=u.onload?"onload":"onreadystatechange";u[o]=function(){if(u.readyState!==4)return!1;if(u.status===200){var e=u.getResponseHeader("content-type");e&&(e=e.toLowerCase());e&&e.indexOf("application/json")>=0?f.handleRegularJsonResponse(u.responseText,n,t,i,r):e&&e.indexOf("lattice/service")>=0?f.handleDeferredResponse(u.responseText,n,i):i&&i(u.responseText)}else{if(u.status===0)return!1;f._events.LoadingError.invoke(f,{Request:n,XMLHttp:u,Reason:"Network error"});r&&r(u.responseText)}f._isLoading=!1;f._events.Loading.invokeAfter(f,{Request:n,XMLHttp:u})};u.send(e)},t.prototype.query=function(t,i,r,u){var h=this,o=this.gatherQuery(n.QueryScope.Server),f=this.gatherQuery(n.QueryScope.Client),c,e,s;i&&(i(o),i(f));c=JSON.stringify(o)===this._previousQueryString;e=u||!c;e=this._masterTable.Partition.partitionBeforeQuery(o,f,e);this._masterTable.Selection.modifyQuery(o,n.QueryScope.Server);s={Command:"query",Query:e?o:f};this._masterTable.Configuration.QueryConfirmation?this._masterTable.Configuration.QueryConfirmation(s,e?n.QueryScope.Server:n.QueryScope.Client,function(){e?h.doServerQuery(s,f,t,r):h.doClientQuery(f,t)}):e?this.doServerQuery(s,f,t,r):this.doClientQuery(f,t)},t.prototype.doClientQuery=function(n,t){this._isLoading=!0;this._dataHolder.filterStoredData(n,-1);t(null);this._isLoading=!1},t.prototype.command=function(t,i,r,u,f){var s=this,e,o;if(t==="query"){this.query(i,r,u,f);return}e=this.gatherQuery(n.QueryScope.Transboundary);r&&r(e);this._masterTable.Selection.modifyQuery(e,n.QueryScope.Transboundary);o={Command:t,Query:e};this._masterTable.Configuration.QueryConfirmation?this._masterTable.Configuration.QueryConfirmation(o,n.QueryScope.Transboundary,function(){return s.doServerQuery(o,null,i,u)}):this.doServerQuery(o,null,i,u)},t}();t.LoaderService=i})(t=n.Services||(n.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var u=function(){function t(n){this._masterTable=n;this._commandsCache=this._masterTable.Configuration.Commands}return t.prototype.canExecute=function(n,t){if(t===void 0&&(t=null),!this._commandsCache.hasOwnProperty(n))return!0;var i=this._commandsCache[n];return i.CanExecute?i.CanExecute({Subject:t,Master:this._masterTable}):!0},t.prototype.triggerCommandOnRow=function(n,t,i){i===void 0&&(i=null);this.triggerCommand(n,this._masterTable.DataHolder.StoredCache[t],i)},t.prototype.triggerCommand=function(n,t,i){var u,f,o,e;if(i===void 0&&(i=null),u=this._commandsCache[n],u==null||u==undefined){this.triggerCommandWithConfirmation(n,t,null,i);return}(!u.CanExecute||u.CanExecute({Subject:t,Master:this._masterTable}))&&(u.Confirmation!=null&&u.Confirmation!=undefined?(f=new r(this._masterTable,u,t,i),o=this._masterTable.Renderer.renderObject(u.Confirmation.TemplateId,f,u.Confirmation.TargetSelector),f.RootElement=o,f.rendered()):u.ConfirmationDataFunction!=null&&u.ConfirmationDataFunction!=undefined?(e=u.ConfirmationDataFunction({CommandDescription:this._commandsCache[n],Master:this._masterTable,Selection:this._masterTable.Selection.getSelectedObjects(),Subject:t,Result:null,Confirmation:null,confirm:null,dismiss:null,Details:null}),e!=null&&this.triggerCommandWithConfirmation(n,t,e,i)):this.triggerCommandWithConfirmation(n,t,null,i))},t.prototype.redrawSubjectRow=function(n){if(n!=null&&n!=undefined){var t=this._masterTable.Controller.produceRow(n);t.IsCommandSubject=!0;this._masterTable.Renderer.Modifier.redrawRow(t)}},t.prototype.restoreSubjectRow=function(n){n!=null&&n!=undefined&&this._masterTable.Controller.redrawVisibleDataObject(n)},t.prototype.triggerCommandWithConfirmation=function(t,i,r,u){var o=this,e,f;if(u===void 0&&(u=null),e={CommandDescription:null,Master:this._masterTable,Selection:this._masterTable.Selection.getSelectedObjects(),Subject:i,Result:null,Confirmation:r,confirm:null,dismiss:null,Details:null},this.redrawSubjectRow(i),f=this._commandsCache[t],f==null||f==undefined){this._masterTable.Loader.command(t,function(n){if(o.restoreSubjectRow(i),e.Result=n,u&&u(e),n.$isDeferred&&n.$url){window.location.href=n.$url;return}},function(n){return n.AdditionalData.CommandConfirmation=JSON.stringify(r),n.AdditionalData.CommandSubject=JSON.stringify(i),n},function(){o.restoreSubjectRow(i)});return}if(e.CommandDescription=f,f.CanExecute&&!f.CanExecute({Subject:i,Master:this._masterTable})){this.restoreSubjectRow(i);return}f.OnBeforeExecute!=null&&f.OnBeforeExecute!=undefined&&(e.Confirmation=f.OnBeforeExecute(e));f.Type===n.Lattice.Commands.CommandType.Server?this._masterTable.Loader.command(f.ServerName,function(n){if(o.restoreSubjectRow(i),e.Result=n,u&&u(e),f.OnSuccess&&f.OnSuccess(e),n.$isDeferred&&n.$url){window.location.href=n.$url;return}},function(n){return n.AdditionalData.CommandConfirmation=JSON.stringify(r),n.AdditionalData.CommandSubject=JSON.stringify(i),n},function(n){o.restoreSubjectRow(i);e.Result=n;u&&u(e);f.OnFailure&&f.OnFailure(e)}):(f.ClientFunction(e),this.restoreSubjectRow(i))},t}(),r;i.CommandsService=u;r=function(){function i(n,t,i,r){var s,u,f,e,o;if(this.RootElement=null,this.ContentPlaceholder=null,this.DetailsPlaceholder=null,this.TemplatePieces={},this.RecentDetails={Data:null},this._detailsLoaded=!1,this._editorColumn={},this._originalCallback=null,this._autoformFields={},this._loadDetailsTimeout=null,this._isloadingContent=!1,this.EditorsSet={},this.ActiveEditors=[],this.ValidationMessages=[],this.MasterTable=n,this._commandDescription=t,this._config=t.Confirmation,this._originalCallback=r,this.DataObject={},this._editorObjectModified={},this.Subject=i,this.Selection=this.MasterTable.Selection.getSelectedObjects(),this._embedBound=this.embedConfirmation.bind(this),t.Confirmation.Autoform!=null&&this.produceAutoformColumns(t.Confirmation.Autoform),s={CommandDescription:this._commandDescription,Master:this.MasterTable,Confirmation:this._editorObjectModified,Result:null,Selection:this.Selection,Subject:i,confirm:null,dismiss:null,Details:null},t.Confirmation.InitConfirmationObject){t.Confirmation.InitConfirmationObject(this.DataObject,s);u=this.DataObject;for(f in u)u.hasOwnProperty(f)&&(this._editorObjectModified[f]=u[f])}t.Confirmation.Autoform!=null&&this.initAutoform(t.Confirmation.Autoform);e=this._config.TemplatePieces;for(o in e)e.hasOwnProperty(o)&&(this.TemplatePieces[o]=e[o](s))}return i.prototype.rendered=function(){var n,t;for(this.stripNotRenderedEditors(),n=0;n<this.ActiveEditors.length;n++)t=this.ActiveEditors[n].FieldName,this.ActiveEditors[n].setValue(this.DataObject[t]);this.initFormWatchDatepickers(this.RootElement);this.loadContent();this._config.Details!=null&&this._config.Details!=undefined&&this._config.Details.LoadImmediately&&this.loadDetailsInternal()},i.prototype.stripNotRenderedEditors=function(){for(var t,n=[],i=0;i<this.ActiveEditors.length;i++)this.ActiveEditors[i]._IsRendered&&n.push(this.ActiveEditors[i]);if(n.length!==this.ActiveEditors.length)for(this.ActiveEditors=n,this.EditorsSet={},t=0;t<n.length;t++)this.EditorsSet[n[t].FieldName]=n[t]},i.prototype.loadContent=function(){var n=this,t,i;if(this.ContentPlaceholder!=null&&(this._config.ContentLoadingUrl||this._config.ContentLoadingCommand)){if(this.VisualStates!=null&&this.VisualStates.mixinState("contentLoading"),this._config.Autoform!=null&&this._config.Autoform.DisableWhenContentLoading)for(t=0;t<this.ActiveEditors.length;t++)this.ActiveEditors[t].VisualStates!=null&&this.ActiveEditors[t].VisualStates.mixinState("loading");this._isloadingContent=!0;this._config.ContentLoadingUrl!=null&&this._config.ContentLoadingUrl!=undefined?(i=this._config.ContentLoadingUrl(this.Subject),this.loadContentByUrl(i,this._config.ContentLoadingMethod||"GET")):this.MasterTable.Loader.command(this._config.ContentLoadingCommand,function(t){n.ContentPlaceholder.innerHTML=t;n.initFormWatchDatepickers(n.ContentPlaceholder);n.contentLoaded()},this._embedBound,function(t){n.ContentPlaceholder.innerHTML=t;n.contentLoaded()})}},i.prototype.contentLoaded=function(){if(this._isloadingContent=!1,this.VisualStates!=null&&this.VisualStates.unmixinState("contentLoading"),this._config.Autoform!=null&&this._config.Autoform.DisableWhenContentLoading)for(var n=0;n<this.ActiveEditors.length;n++)this.ActiveEditors[n].VisualStates!=null&&this.ActiveEditors[n].VisualStates.unmixinState("loading");this._config.OnContentLoaded&&this._config.OnContentLoaded(this.collectCommandParameters())},i.prototype.loadContentByUrl=function(n,t){var r=this,i,u;n=encodeURI(n);i=this.MasterTable.Loader.createXmlHttp();i.open(t,n,!0);i.setRequestHeader("X-Requested-With","XMLHttpRequest");u=i.onload?"onload":"onreadystatechange";i[u]=function(){if(i.readyState!==4)return!1;r.ContentPlaceholder.innerHTML=i.responseText;r.contentLoaded()};t==="GET"||this.Subject===null?i.send():i.send(JSON.stringify(this.Subject))},i.prototype.loadDetails=function(){var n=this;this.DetailsPlaceholder!=null&&this._config.Details!=null&&this._config.Details!=undefined&&(this._config.Details.LoadDelay<=0?this.loadDetailsInternal():(clearTimeout(this._loadDetailsTimeout),this._loadDetailsTimeout=setTimeout(function(){n.loadDetailsInternal()},this._config.Details.LoadDelay)))},i.prototype.loadDetailsInternal=function(){var t=this,i=this.collectCommandParameters(),n;if(this._config.Details.ValidateToLoad==null||this._config.Details.ValidateToLoad(i)){if(this.VisualStates!=null&&this.VisualStates.mixinState("detailsLoading"),this._config.Autoform!=null&&this._config.Autoform.DisableWhileDetailsLoading)for(n=0;n<this.ActiveEditors.length;n++)this.ActiveEditors[n].VisualStates!=null&&this.ActiveEditors[n].VisualStates.mixinState("loading");this._config.Details.CommandName!=null&&this._config.Details.CommandName!=undefined?this.MasterTable.Loader.command(this._config.Details.CommandName,function(n){t.detailsLoaded(n)},this._embedBound,function(n){t.detailsLoaded(n)}):this._config.Details.DetailsFunction!=null&&this._config.Details.DetailsFunction!=undefined?this.detailsLoaded(this._config.Details.DetailsFunction(i)):this.detailsLoaded(this.getConfirmation())}},i.prototype.detailsLoaded=function(n){var i,t;if(n!=null&&n!=undefined&&(typeof n=="string"?(this.DetailsPlaceholder.innerHTML=n,this.initFormWatchDatepickers(this.DetailsPlaceholder)):this._config.Details.TempalteId!=null&&this._config.Details.TempalteId!=undefined?(this.RecentDetails.Data!=null&&this.MasterTable.Renderer.Modifier.destroyElement(this.DetailsPlaceholder),i={Subject:this.Subject,Details:n,Confirmation:this.getConfirmation()},this.MasterTable.Renderer.renderObjectTo(this._config.Details.TempalteId,i,this.DetailsPlaceholder),this.initFormWatchDatepickers(this.DetailsPlaceholder)):(this.DetailsPlaceholder.innerHTML=n.toString(),this.initFormWatchDatepickers(this.DetailsPlaceholder))),this._detailsLoaded=!0,this.RecentDetails.Data=n,this.VisualStates!=null&&this.VisualStates.unmixinState("detailsLoading"),this._config.Autoform!=null&&this._config.Autoform.DisableWhileDetailsLoading)for(t=0;t<this.ActiveEditors.length;t++)this.ActiveEditors[t].VisualStates!=null&&this.ActiveEditors[t].VisualStates.unmixinState("loading");this._config.OnDetailsLoaded&&this._config.OnDetailsLoaded(this.collectCommandParameters())},i.prototype.embedConfirmation=function(n){return n.AdditionalData.CommandConfirmation=JSON.stringify(this.getConfirmation()),n.AdditionalData.CommandSubject=JSON.stringify(this.Subject),n},i.prototype.collectCommandParameters=function(){return{CommandDescription:this._commandDescription,Master:this.MasterTable,Selection:this.Selection,Subject:this.Subject,Result:null,Confirmation:this.getConfirmation(),confirm:this.confirm.bind(this),dismiss:this.dismiss.bind(this),Details:this.RecentDetails.Data}},i.prototype.getConfirmation=function(){var t=null,i,r;if(this._config.Formwatch!=null&&(t=n.Lattice.Plugins.Formwatch.FormwatchPlugin.extractFormData(this._config.Formwatch,this.RootElement,this.MasterTable.Date)),this._config.Autoform!=null&&(this._isloadingContent||this.collectAutoForm()),this._editorObjectModified!=null){t==null&&(t={});i=this._editorObjectModified;for(r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},i.prototype.initFormWatchDatepickers=function(n){var r=this._commandDescription.Confirmation.Formwatch,i,t,u;if(r!=null)for(i=0;i<r.length;i++)t=r[i],t.TriggerSearchOnEvents&&t.TriggerSearchOnEvents.length>0&&(u=n.querySelector(t.FieldSelector),t.AutomaticallyAttachDatepicker&&this.MasterTable.Date.createDatePicker(u))},i.prototype.confirm=function(){var n=this,i=this.collectCommandParameters(),t;if(!(this.ValidationMessages.length>0)){if(this.VisualStates!=null&&this.VisualStates.mixinState("saving"),this._config.Autoform!=null&&this._config.Autoform.DisableWhenContentLoading)for(t=0;t<this.ActiveEditors.length;t++)this.ActiveEditors[t].VisualStates!=null&&this.ActiveEditors[t].VisualStates.mixinState("saving");this._config.OnCommit&&this._config.OnCommit(i);this.MasterTable.Commands.triggerCommandWithConfirmation(this._commandDescription.Name,this.Subject,this.getConfirmation(),function(t){i.Result=t;n.RootElement=null;n.ContentPlaceholder=null;n.DetailsPlaceholder=null;n.MasterTable.Renderer.Modifier.cleanSelector(n._commandDescription.Confirmation.TargetSelector);n._originalCallback&&n._originalCallback(i)})}},i.prototype.dismiss=function(){var n=this.collectCommandParameters();this.MasterTable.Renderer.Modifier.cleanSelector(this._commandDescription.Confirmation.TargetSelector);this.RootElement=null;this.ContentPlaceholder=null;this.DetailsPlaceholder=null;this._config.OnDismiss&&this._config.OnDismiss(n);this._originalCallback&&this._originalCallback(n)},i.prototype.Editors=function(n){for(var t=0;t<this.ActiveEditors.length;t++)this.editor(n,this.ActiveEditors[t])},i.prototype.editor=function(n,t){t._IsRendered=!0;t.renderContent(n)},i.prototype.Editor=function(n,t){var i=this.EditorsSet[t];i!=null&&i!=undefined&&this.editor(n,i)},i.prototype.createEditor=function(n,i){var u=this._autoformFields[n],r=t.ComponentsContainer.resolveComponent(u.PluginId);return r.DataObject=this.DataObject,r.ModifiedDataObject=this._editorObjectModified,r.Data=this.DataObject[n],r.FieldName=n,r.Column=i,r.CanComplete=!1,r.IsFormEdit=!0,r.IsRowEdit=!1,r.IsCellEdit=!(r.IsFormEdit||r.IsRowEdit),r.Row=this,r.RawConfig={Configuration:u,Order:0,PluginId:u.PluginId,Placement:"",TemplateId:u.TemplateId},r.init(this.MasterTable),r},i.prototype.defaultValue=function(n){return n.IsInteger||n.IsFloat?0:n.IsBoolean?!1:n.IsDateTime?new Date:n.IsString?"":n.IsEnum?0:(n.Configuration.IsNullable,null)},i.prototype.produceAutoformColumns=function(t){for(var r,i=t.Autoform,u=0;u<i.length;u++)this._autoformFields[i[u].FieldName]=i[u];for(r=0;r<i.length;r++)this._editorColumn[i[r].FieldName]=n.Lattice.Services.InstanceManagerService.createColumn(i[r].FakeColumn,this.MasterTable),this.DataObject[i[r].FieldName]=this.defaultValue(this._editorColumn[i[r].FieldName]),this._editorObjectModified[i[r].FieldName]=this.DataObject[i[r].FieldName]},i.prototype.initAutoform=function(n){for(var r=n.Autoform,t=0;t<r.length;t++){var i=r[t],f=this._editorColumn[i.FieldName],u=this.createEditor(i.FieldName,f);this.EditorsSet[i.FieldName]=u;this.ActiveEditors.push(u)}},i.prototype.notifyChanged=function(n){this.retrieveEditorData(n);for(var t=0;t<this.ActiveEditors.length;t++)this.ActiveEditors[t].notifyObjectChanged();this._config.Details!=null&&this._config.Details!=undefined&&(this._config.Details.LoadOnce&&this._detailsLoaded||this.loadDetails())},i.prototype.reject=function(n){this._editorObjectModified[n.FieldName]=this.DataObject[n.FieldName];this.setEditorValue(n)},i.prototype.commit=function(n){var t=this.ActiveEditors.indexOf(n),i;if(this.ActiveEditors.length>t+1){for(t=-1,i=0;i<this.ActiveEditors.length;i++)if(!this.ActiveEditors[i].IsValid){t=i;break}t!==-1&&this.ActiveEditors[t].focus()}},i.prototype.retrieveEditorData=function(n,t){var f=!!t,i,r,u;for(t=t||[],i=[],this._editorObjectModified[n.FieldName]=n.getValue(i),r=0;r<i.length;r++)i[r].Message=n.getErrorMessage(i[r].Code);for(n.Data=this._editorObjectModified[n.FieldName],n.ValidationMessages=i,u=0;u<i.length;u++)t.push(i[u]);i.length>0?(n.IsValid=!1,n.VisualStates!=null&&n.VisualStates.changeState("invalid")):(n.IsValid=!0,n.VisualStates!=null&&n.VisualStates.normalState());f||this.ValidationMessages.concat(t)},i.prototype.setEditorValue=function(n){n.IsInitialValueSetting=!0;n.setValue(this._editorObjectModified[n.FieldName]);n.IsInitialValueSetting=!1},i.prototype.collectAutoForm=function(){var t,n;for(this.ValidationMessages=[],t=[],n=0;n<this.ActiveEditors.length;n++)this.retrieveEditorData(this.ActiveEditors[n],t);return(this.ValidationMessages=t,this.ValidationMessages.length>0)?(this.MasterTable.Events.EditValidationFailed.invokeAfter(this,{OriginalDataObject:this.DataObject,ModifiedDataObject:this._editorObjectModified,Messages:this.ValidationMessages}),!1):!0},i}();i.ConfirmationWindowViewModel=r})(i=t.Services||(t.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(t){var i=function(){function t(t){var i=this;this._selectionData={};this._masterTable=t;this._configuration=this._masterTable.Configuration.SelectionConfiguration;this._configuration.SelectSingle&&(this._configuration.SelectAllBehavior=n.Lattice.SelectAllBehavior.Disabled);this._configuration.ResetSelectionBehavior===n.Lattice.ResetSelectionBehavior.ClientReload&&t.Events.ClientDataProcessing.subscribeAfter(function(){return i.resetSelection()},"selection");this._configuration.ResetSelectionBehavior===n.Lattice.ResetSelectionBehavior.ServerReload&&t.Events.DataReceived.subscribeBefore(function(n){n.EventArgs.Request.Command==="query"&&i.resetSelection()},"selection");t.Loader.registerAdditionalDataReceiver("Selection",this)}return t.prototype.isSelected=function(n){return this.isSelectedPrimaryKey(n.__key)},t.prototype.isAllSelected=function(){if(this._masterTable.DataHolder.DisplayedData.length===0)return!1;for(var n=0;n<this._masterTable.DataHolder.DisplayedData.length;n++)if(this.canSelect(this._masterTable.DataHolder.DisplayedData[n])&&!this._selectionData.hasOwnProperty(this._masterTable.DataHolder.DisplayedData[n].__key))return!1;return!0},t.prototype.canSelect=function(n){return this._configuration.CanSelectRowFunction==null?!0:this._configuration.CanSelectRowFunction(n)},t.prototype.canSelectAll=function(){return this._masterTable.DataHolder.DisplayedData.length===0?!1:this._configuration.SelectAllBehavior===n.Lattice.SelectAllBehavior.Disabled?!1:this._configuration.SelectAllBehavior===n.Lattice.SelectAllBehavior.OnlyIfAllDataVisible?this._masterTable.DataHolder.StoredData.length===this._masterTable.DataHolder.DisplayedData.length:!0},t.prototype.resetSelection=function(){var n,t,r,u,i;this._masterTable.Events.SelectionChanged.invokeBefore(this,this._selectionData);n=[];for(t in this._selectionData)r=this._selectionData[t],u=this._masterTable.DataHolder.getByPrimaryKey(t),this._masterTable.DataHolder.DisplayedData.indexOf(u)>=0&&n.push(r),delete this._selectionData[t];if(n.length>this._masterTable.DataHolder.DisplayedData.length/2)this._masterTable.Controller.redrawVisibleData();else for(i=0;i<n.length;i++)this._masterTable.Controller.redrawVisibleDataObject(n[i]);this._masterTable.Events.SelectionChanged.invokeAfter(this,this._selectionData)},t.prototype.toggleAll=function(t){var r,i,e;if(this._configuration.SelectAllBehavior!==n.Lattice.SelectAllBehavior.Disabled&&(this._configuration.SelectAllBehavior!==n.Lattice.SelectAllBehavior.OnlyIfAllDataVisible||this._masterTable.DataHolder.StoredData.length===this._masterTable.DataHolder.DisplayedData.length)){this._masterTable.Events.SelectionChanged.invokeBefore(this,this._selectionData);t==null&&(t=!this.isAllSelected());var u=[],f=null;if(f=this._configuration.SelectAllBehavior===n.Lattice.SelectAllBehavior.AllVisible||this._configuration.SelectAllBehavior===n.Lattice.SelectAllBehavior.OnlyIfAllDataVisible?this._masterTable.DataHolder.DisplayedData:this._masterTable.DataHolder.StoredData,t)for(r=0;r<f.length;r++)i=f[r],this.canSelect(i)&&(this._selectionData.hasOwnProperty(i.__key)||(u.push(i),this._selectionData[i.__key]=[]));else for(r=0;r<f.length;r++)i=f[r],this.canSelect(i)&&this._selectionData.hasOwnProperty(i.__key)&&(u.push(i),delete this._selectionData[i.__key]);if(u.length>this._masterTable.DataHolder.DisplayedData.length/2)this._masterTable.Controller.redrawVisibleData();else for(e=0;e<u.length;e++)this._masterTable.Controller.redrawVisibleDataObject(u[e]);this._masterTable.Events.SelectionChanged.invokeAfter(this,this._selectionData)}},t.prototype.isCellSelected=function(n,t){var i=this._selectionData[n.__key];return i?i.indexOf(t.Order)>=0:!1},t.prototype.hasSelectedCells=function(n){var t=this._selectionData[n.__key];return t?t.length>0:!1},t.prototype.getSelectedCells=function(n){var t=this._selectionData[n.__key];return t?t:null},t.prototype.getSelectedCellsByPrimaryKey=function(n){var t=this._selectionData[n.__key];return t?t.length>0:!1},t.prototype.isSelectedPrimaryKey=function(n){var t=this._selectionData[n];return t?t.length===0:!1},t.prototype.toggleRow=function(n,t){var i,u,r;if(this._masterTable.Events.SelectionChanged.invokeBefore(this,this._selectionData),(t==undefined||t==null)&&(t=!this.isSelectedPrimaryKey(n)),t){if(!this._selectionData.hasOwnProperty(n)){if(this._configuration.SelectSingle){i=[];for(u in this._selectionData)i.push(u);for(r=0;r<i.length;r++)delete this._selectionData[i[r]],this._masterTable.Controller.redrawVisibleDataObject(this._masterTable.DataHolder.getByPrimaryKey(i[r]))}this._selectionData[n]=[];this._masterTable.Controller.redrawVisibleDataObject(this._masterTable.DataHolder.getByPrimaryKey(n));this._masterTable.Events.SelectionChanged.invokeAfter(this,this._selectionData)}}else if(this._selectionData.hasOwnProperty(n)){if(this._configuration.SelectSingle){i=[];for(u in this._selectionData)i.push(u);for(r=0;r<i.length;r++)delete this._selectionData[i[r]],this._masterTable.Controller.redrawVisibleDataObject(this._masterTable.DataHolder.getByPrimaryKey(i[r]))}else delete this._selectionData[n],this._masterTable.Controller.redrawVisibleDataObject(this._masterTable.DataHolder.getByPrimaryKey(n));this._masterTable.Events.SelectionChanged.invokeAfter(this,this._selectionData)}},t.prototype.toggleDisplayingRow=function(n,t){this.toggleRow(this._masterTable.DataHolder.StoredCache[n].__key,t)},t.prototype.toggleObjectSelected=function(n,t){this.toggleRow(n.__key,t)},t.prototype.handleAdjustments=function(n,t){for(var i=0;i<t.length;i++)this._selectionData.hasOwnProperty(t[i])&&delete this._selectionData[t[i]]},t.prototype.modifyQuery=function(n){n.Selection=this._selectionData},t.prototype.getSelectedKeys=function(){var n=[];for(var t in this._selectionData)n.push(t);return n},t.prototype.getSelectedObjects=function(){var n=[];for(var t in this._selectionData)n.push(this._masterTable.DataHolder.getByPrimaryKey(t));return n},t.prototype.getSelectedColumns=function(n){var i=this._masterTable.InstanceManager.Columns,r,u,t,f;if(!this.isSelectedPrimaryKey(n))return[];for(r=this._selectionData[n],u=[],t=0;t<r.length;t++)for(f in i)i[f].Order===r[t]&&u.push(i[f]);return u},t.prototype.getSelectedColumnsByObject=function(n){return this.getSelectedColumns(n.__key)},t.prototype.toggleCellsByDisplayIndex=function(n,t,i){n<0||n>=this._masterTable.DataHolder.DisplayedData.length||this.toggleCells(this._masterTable.DataHolder.DisplayedData[n].__key,t,i)},t.prototype.toggleCellsByObject=function(n,t,i){this.toggleCells(n.__key,t,i)},t.prototype.toggleCells=function(n,t,i){var r,u;this._masterTable.Events.SelectionChanged.invokeBefore(this,this._selectionData);r=null;this._selectionData.hasOwnProperty(n)?r=this._selectionData[n]:(r=[],this._selectionData[n]=r);var o=this._masterTable.InstanceManager.Columns,s=[],h=this._masterTable.DataHolder.getByPrimaryKey(n);for(u=0;u<t.length;u++){var c=o[t[u]].Order,e=r.indexOf(c),l=r.length,f=i;this._configuration.NonselectableColumns.indexOf(t[u])<0||((f==null||f==undefined)&&(f=e>-1?!1:!0),this._configuration.CanSelectCellFunction==null||this._configuration.CanSelectCellFunction(h,t[u],f))&&(f&&e<0&&r.push(c),!f&&e>-1&&r.splice(e,1),l!==r.length&&s.push(o[t[u]]))}r.length===0&&delete this._selectionData[n];this._masterTable.Controller.redrawVisibleCells(h,s);this._masterTable.Events.SelectionChanged.invokeAfter(this,this._selectionData)},t.prototype.setCellsByDisplayIndex=function(n,t){n<0||n>=this._masterTable.DataHolder.DisplayedData.length||this.setCells(this._masterTable.DataHolder.DisplayedData[n].__key,t)},t.prototype.setCellsByObject=function(n,t){this.setCells(n.__key,t)},t.prototype.setCells=function(n,t){var u,r,h,f;this._masterTable.Events.SelectionChanged.invokeBefore(this,this._selectionData);u=null;u=this._selectionData.hasOwnProperty(n)?this._selectionData[n]:[];var o=this._masterTable.InstanceManager.Columns,s=[],c=this._masterTable.DataHolder.getByPrimaryKey(n),i=[],l=this._masterTable.InstanceManager.getColumnNames();for(r=0;r<t.length;r++)this._configuration.NonselectableColumns&&this._configuration.NonselectableColumns.indexOf(t[r])<0||(this._configuration.CanSelectCellFunction==null||this._configuration.CanSelectCellFunction(c,t[r],!0))&&i.push(o[t[r]].Order);for(h=i.length>u.length?i:u,f=0;f<h.length;f++){var e=h[f],a=i.indexOf(e)>-1,v=u.indexOf(e)>-1;a&&!v&&s.push(o[l[e]]);v&&!a&&s.push(o[l[e]])}i.length===0?delete this._selectionData[n]:this._selectionData[n]=i;this._masterTable.Controller.redrawVisibleCells(c,s);this._masterTable.Events.SelectionChanged.invokeAfter(this,this._selectionData)},t.prototype.handleAdditionalData=function(t){var i=t,r,u;if(i.SelectionToggle===n.Lattice.Adjustments.SelectionToggle.All)this.toggleAll(!0);else if(i.SelectionToggle===n.Lattice.Adjustments.SelectionToggle.Nothing)this.resetSelection();else{for(r in i.Select)i.Select[r]==null||i.Select[r].length===0?this.toggleRow(r,!0):this.setCells(r,i.Select[r]);for(u in i.Unselect)i.Unselect[u]==null||i.Unselect[u].length===0?this.toggleRow(u,!0):this.toggleCells(u,i.Unselect[u],!1)}},t}();t.SelectionService=i})(i=t.Services||(t.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function t(n){this._dateService=n}return t.prototype.backBind=function(n,t){this.backbindDatepickers(n,t);this.backbindMark(n,t);this.backbindEvents(n,t);this.backbindVisualStates(n,t);this.backbindCallbacks(n,t)},t.prototype.traverseBackbind=function(n,t,i,r,u){for(var e,l,a,s,o=0;o<n.length;o++){var f=n[o],h=null,c=[];for(e=0;e<f.attributes.length;e++)f.attributes.item(e).name.substring(0,r.length)===r&&(h=f.attributes.item(e),l=parseInt(h.value),a=i[l],u.call(this,a,f),c.push(h.name));for(s=0;s<c.length;s++)f.removeAttribute(c[s])}},t.prototype.getMatchingElements=function(n,t){var u,i,r;if(n==null)return[];for(u=n.querySelectorAll("["+t+"]"),i=[],r=0;r<u.length;r++)i.push(u.item(r));return n.hasAttribute(t)&&i.push(n),i},t.prototype.backbindDatepickers=function(n,t){var i=this,r=this.getMatchingElements(n,"data-dp");this.traverseBackbind(r,n,t.DatepickersQueue,"data-dp",function(n,t){i._dateService.createDatePicker(t,n.IsNullable);i.Delegator.subscribeDestroy(t,{Callback:i._dateService.destroyDatePicker,CallbackArguments:[],Target:i._dateService})})},t.prototype.backbindMark=function(n,t){var i=this.getMatchingElements(n,"data-mrk");this.traverseBackbind(i,n,t.MarkQueue,"data-mrk",function(n,t){var i=n.ElementReceiver;Object.prototype.toString.call(n.ElementReceiver[n.FieldName])==="[object Array]"?i[n.FieldName].push(t):n.Key!=null&&n.Key!=undefined?typeof n.ElementReceiver[n.FieldName]=="object"&&(i[n.FieldName][n.Key]=t):i[n.FieldName]=t})},t.prototype.backbindCallbacks=function(n,t){var i=this,r=this.getMatchingElements(n,"data-cb");this.traverseBackbind(r,n,t.CallbacksQueue,"data-cb",function(n,t){var r=i.evalCallback(n.Callback);r.fn.apply(r.target,[t].concat(n.CallbackArguments))});r=this.getMatchingElements(n,"data-dcb");this.traverseBackbind(r,n,t.DestroyCallbacksQueue,"data-dcb",function(n,t){var r=i.evalCallback(n.Callback);i.Delegator.subscribeDestroy(t,{CallbackArguments:n.CallbackArguments,Target:r.target,Callback:r.fn})})},t.prototype.backbindEvents=function(n,t){var i=this,r=this.getMatchingElements(n,"data-evb");this.traverseBackbind(r,n,t.EventsQueue,"data-be",function(n,t){for(var s,r,f=0;f<n.Functions.length;f++){var e=n.Functions[f],o=null,u=n.EventReceiver;for(u[e]&&typeof u[e]=="function"?o=n.EventReceiver[e]:(s=i.evalCallback(e),u=s.target,o=s.fn),r=0;r<n.Events.length;r++)n.Events[r].length>4&&n.Events[r].substring(0,4)==="out-"?i.Delegator.subscribeOutOfElementEvent(t,n.Events[r].substring(4),o,u,n.EventArguments):i.Delegator.subscribeEvent(t,n.Events[r],o,u,n.EventArguments)}})},t.prototype.evalCallback=function(n){var r,i;if(typeof n=="function")return{fn:n,target:window};if(n.trim().substr(0,8)==="function")return r=null,eval("cb = ("+n+");"),{fn:r,target:window};if(i=t.traverseWindowPath(n),typeof i.target!="function")throw new Error(n+" supplied for rendering callback is not a function");return{fn:i.target,target:i.parent}},t.traverseWindowPath=function(n){var t;if(n.indexOf(".")>-1){var u=n.split("."),i=window,r=window;for(t=0;t<u.length;t++)i=r,r=i[u[t]];return{target:r,parent:i}}return{target:window[n],parent:window}},t.prototype.backbindVisualStates=function(t,i){var e,u,o,s,f,h,r;if(i.HasVisualStates){e=[];for(u in i.CachedVisualStates)if(i.CachedVisualStates.hasOwnProperty(u))for(o=i.CachedVisualStates[u],s=this.getMatchingElements(t,"data-state-"+u),f=0;f<s.length;f++)h=s[f],o[f].Element=h,h.removeAttribute("data-state-"+u),r=o[f].Receiver,e.indexOf(r)<0&&(e.push(r),r.VisualStates=new n.VisualState),r.VisualStates||(r.VisualStates=new n.VisualState),r.VisualStates.States.hasOwnProperty(u)||(r.VisualStates.States[u]=[]),r.VisualStates.States[u].push(o[f]);i.HasVisualStates=!1;this.resolveNormalStates(e);i.CachedVisualStates={}}},t.prototype.resolveNormalStates=function(n){for(var t=0;t<n.length;t++)this.addNormalState(n[t].VisualStates.States,n[t])},t.prototype.addNormalState=function(n,t){var f=[],s=[],i,r,e,u,o;for(i in n)if(n.hasOwnProperty(i))for(r=0;r<n[i].length;r++){if(e=s.indexOf(n[i][r].Element),e<0)for(e=f.length,s.push(n[i][r].Element),u={Element:n[i][r].Element,attrs:{},classes:[],styles:{},id:"normal",Receiver:t,content:n[i][r].content!=null&&n[i][r].content.length>0?n[i][r].Element.innerHTML:null},f.push(u),o=0;o<u.Element.classList.length;o++)u.classes.push(u.Element.classList.item(o));this.mixinToNormal(f[e],n[i][r])}n._normal=f},t.prototype.mixinToNormal=function(n,t){var i,r;if(t.attrs)for(i in t.attrs)t.attrs.hasOwnProperty(i)&&(n.attrs.hasOwnProperty(i)||(n.attrs[i]=n.Element.hasAttribute(i)?n.Element.getAttribute(i):null));if(t.styles)for(r in t.styles)t.styles.hasOwnProperty(r)&&(n.styles.hasOwnProperty(r)||(n.styles[r]=n.Element.style.getPropertyValue(r)))},t}();n.BackBinder=t})(t=n.Rendering||(n.Rendering={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(t){var i=function(){function i(n,t,i,r,u,f){this.displayCache={};this._locator=t;this._backBinder=i;this._instances=r;this._ed=u;this._tpl=n;this._bodyElement=f}return i.prototype.destroyPartitionRow=function(){var n=this._locator.getPartitionRowElement();n&&this.destroyElement(n)},i.prototype.getRealDisplay=function(n){if(n.currentStyle)return n.currentStyle.display;if(window.getComputedStyle){var t=window.getComputedStyle(n,null);return t.getPropertyValue("display")}return""},i.prototype.hideElement=function(n){var t=n;n&&(n.getAttribute("displayOld")||n.setAttribute("displayOld",t.style.display),t.style.display="none")},i.prototype.showElement=function(n){var f=n,e,i,u,t,r;n&&this.getRealDisplay(n)==="none"&&(e=n.getAttribute("displayOld"),f.style.display=e||"",this.getRealDisplay(n)==="none"&&(i=n.nodeName,u=document.body,this.displayCache[i]?t=this.displayCache[i]:(r=document.createElement(i),u.appendChild(r),t=this.getRealDisplay(r),t==="none"&&(t="block"),u.removeChild(r),this.displayCache[i]=t),n.setAttribute("displayOld",t),f.style.display=t))},i.prototype.cleanSelector=function(n){for(var t=document.querySelector(n),i=0;i<t.children.length;i++)this._ed.handleElementDestroy(t.children.item(i));t.innerHTML=""},i.prototype.destroyElement=function(n){n.parentElement.removeChild(n);this._ed.handleElementDestroy(n)},i.prototype.destroyElements=function(n){for(var t=0;t<n.length;t++)this.destroyElement(n.item(t))},i.prototype.hideElements=function(n){if(n)for(var t=0;t<n.length;t++)this.hideElement(n.item(t))},i.prototype.showElements=function(n){if(n)for(var t=0;t<n.length;t++)this.showElement(n.item(t))},i.prototype.redrawPlugin=function(t){var f=this._locator.getPluginElement(t),u=this._tpl.beginProcess(),i,r;return n.Lattice.Templating.Driver.renderPlugin(u,t),i=this._tpl.endProcess(u),r=this.replaceElement(f,i.Html),this._backBinder.backBind(r,i.BackbindInfo),r},i.prototype.renderPlugin=function(t){var i=this._tpl.beginProcess(),r;return n.Lattice.Templating.Driver.renderPlugin(i,t),r=this._tpl.endProcess(i),this.createElement(r.Html)},i.prototype.redrawPluginsByPosition=function(n){for(var i=this._instances.getPlugins(n),t=0;t<i.length;t++)this.redrawPlugin(i[t])},i.prototype.hidePlugin=function(n){var t=this._locator.getPluginElement(n);this.hideElement(t)},i.prototype.showPlugin=function(n){var t=this._locator.getPluginElement(n);this.showElement(t)},i.prototype.destroyPlugin=function(n){var t=this._locator.getPluginElement(n);this.destroyElement(t)},i.prototype.hidePluginsByPosition=function(n){for(var i=this._instances.getPlugins(n),t=0;t<i.length;t++)this.hidePlugin(i[t])},i.prototype.showPluginsByPosition=function(n){for(var i=this._instances.getPlugins(n),t=0;t<i.length;t++)this.showPlugin(i[t])},i.prototype.destroyPluginsByPosition=function(n){for(var i=this._instances.getPlugins(n),t=0;t<i.length;t++)this.destroyPlugin(i[t])},i.prototype.redrawRow=function(t){var i=this._tpl.beginProcess();n.Lattice.Templating.Driver.row(i,t);var r=this._tpl.endProcess(i),f=this._locator.getRowElement(t),u=this.replaceElement(f,r.Html);return this._backBinder.backBind(u,r.BackbindInfo),u},i.prototype.destroyRowByObject=function(n){var t=this._locator.getRowElementByObject(n);t&&this.destroyElement(t)},i.prototype.destroyRow=function(n){var t=this._locator.getRowElement(n);t&&this.destroyElement(t)},i.prototype.hideRow=function(n){var t=this._locator.getRowElement(n);t&&this.hideElement(t)},i.prototype.showRow=function(n){var t=this._locator.getRowElement(n);t&&this.showElement(t)},i.prototype.appendRow=function(t,i){var s=this._tpl.beginProcess(),f,r,e,u,o;if(n.Lattice.Templating.Driver.row(s,t),f=this._tpl.endProcess(s),r=this.createElement(f.Html),i!=null&&i!=undefined)e=this._locator.getRowElementByIndex(i),e.parentNode.insertBefore(r,e);else{if(this._locator.isSpecialRow(this._bodyElement.lastElementChild)){u=null;o=this._bodyElement.childElementCount;do o--,u=this._bodyElement.children.item(o);while(this._locator.isSpecialRow(u));u.parentNode.insertBefore(r,u)}this._bodyElement.appendChild(r)}return this._backBinder.backBind(r,f.BackbindInfo),r},i.prototype.prependRow=function(t){var e=this._tpl.beginProcess(),f,r,i,u;if(n.Lattice.Templating.Driver.row(e,t),f=this._tpl.endProcess(e),r=this.createElement(f.Html),this._bodyElement.childElementCount===0)this._bodyElement.appendChild(r);else if(i=this._bodyElement.firstElementChild,this._locator.isSpecialRow(i)){u=0;do u++,i=this._bodyElement.children.item(u);while(this._locator.isSpecialRow(i)||u<this._bodyElement.childElementCount);u===this._bodyElement.childElementCount?this._bodyElement.appendChild(r):i.parentNode.insertBefore(r,i)}else i.parentNode.insertBefore(r,i);return this._backBinder.backBind(r,f.BackbindInfo),r},i.prototype.destroyRowByIndex=function(n){var t=this._locator.getRowElementByIndex(n);t&&this.destroyElement(t)},i.prototype.destroyRowByNumber=function(n){var t=this._locator.getRowElements();n>t.length||this.destroyElement(t.item(n))},i.prototype.hideRowByIndex=function(n){var t=this._locator.getRowElementByIndex(n);t&&this.hideElement(t)},i.prototype.showRowByIndex=function(n){var t=this._locator.getRowElementByIndex(n);t&&this.showElement(t)},i.prototype.redrawCell=function(t){var i=this._tpl.beginProcess();n.Lattice.Templating.Driver.cell(i,t);var r=this._tpl.endProcess(i),f=this._locator.getCellElement(t),u=this.replaceElement(f,r.Html);return this._backBinder.backBind(u,r.BackbindInfo),u},i.prototype.destroyCell=function(n){var t=this._locator.getCellElement(n);t&&t.parentElement.removeChild(t)},i.prototype.hideCell=function(n){var t=this._locator.getCellElement(n);t&&this.hideElement(t)},i.prototype.showCell=function(n){var t=this._locator.getCellElement(n);t&&this.hideElement(t)},i.prototype.destroyCellsByColumn=function(n){var t=this._locator.getColumnCellsElements(n);this.destroyElements(t)},i.prototype.hideCellsByColumn=function(n){var t=this._locator.getColumnCellsElements(n);this.hideElements(t)},i.prototype.showCellsByColumn=function(n){var t=this._locator.getColumnCellsElements(n);this.showElements(t)},i.prototype.destroyColumnCellsElementsByColumnIndex=function(n){var t=this._locator.getColumnCellsElementsByColumnIndex(n);this.destroyElements(t)},i.prototype.hideColumnCellsElementsByColumnIndex=function(n){var t=this._locator.getColumnCellsElementsByColumnIndex(n);this.hideElements(t)},i.prototype.showColumnCellsElementsByColumnIndex=function(n){var t=this._locator.getColumnCellsElementsByColumnIndex(n);this.showElements(t)},i.prototype.redrawHeader=function(t){var i=this._tpl.beginProcess();n.Lattice.Templating.Driver.header(i,t);var r=this._tpl.endProcess(i),f=this._locator.getHeaderElement(t.Header),u=this.replaceElement(f,r.Html);return this._backBinder.backBind(u,r.BackbindInfo),u},i.prototype.destroyHeader=function(n){var t=this._locator.getHeaderElement(n.Header);t&&this.destroyElement(t)},i.prototype.hideHeader=function(n){var t=this._locator.getHeaderElement(n.Header);t&&this.hideElement(t)},i.prototype.showHeader=function(n){var t=this._locator.getHeaderElement(n.Header);t&&this.showElement(t)},i.prototype.createElement=function(n){var i=new t.Html2Dom.HtmlParser;return i.html2Dom(n)},i.prototype.createElementFromTemplate=function(n,i){var r=this._tpl.execute(i,n),f=new t.Html2Dom.HtmlParser,u=f.html2Dom(r.Html);return this._backBinder.backBind(u,r.BackbindInfo),u},i.prototype.replaceElement=function(n,t){if(!n)return null;var i=this.createElement(t);return n.parentElement.replaceChild(i,n),this._ed.handleElementDestroy(n),i},i}();t.DOMModifier=i})(i=t.Rendering||(t.Rendering={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(){}return n.makeMap=function(n){for(var i={},r=n.split(","),t=0;t<r.length;t++)i[r[t]]=!0;return i},n.startTag=/^<([-A-Za-z0-9_]+)((?:[\s\w\-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,n.endTag=/^<\/([-A-Za-z0-9_]+)[^>]*>/,n.attr=/([-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,n.empty=n.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),n.block=n.makeMap("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul,span"),n.inline=n.makeMap("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var"),n.closeSelf=n.makeMap("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),n.fillAttrs=n.makeMap("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),n.special=n.makeMap("script,style"),n}(),i;n.HtmlParserDefinitions=t;i=function(){function n(){this._elems=[];this._topNodes=[];this._stack=[];this._stack.last=function(){return this.length===0?null:this[this.length-1]};this._parseStartBound=this.parseStartTag.bind(this);this._parseEndBound=this.parseEndTag.bind(this)}return n.prototype.parse=function(n){for(var c=this,i,u,r,o=n,f,e,s,h;n;){if(u=!0,f=this._stack.last(),f&&t.special[f])f==="script",n=n.replace(new RegExp("([\\s\\S]*)<\/"+this._stack.last()+"[^>]*>","gm"),function(n,t){return t=t.replace(/<!--(.*?)-->/g,"$1").replace(/<!\[CDATA\[(.*?)]]>/g,"$1"),c.chars(t),""}),this.parseEndTag("",this._stack.last());else if(n.indexOf("<!--")===0?(i=n.indexOf("-->"),i>=0&&(n=n.substring(i+3),u=!1)):n.indexOf("<\/")===0?(r=n.match(t.endTag),r&&(n=n.substring(r[0].length),r[0].replace(t.endTag,this._parseEndBound),u=!1)):n.indexOf("<")===0&&(r=n.match(t.startTag),r&&(n=n.substring(r[0].length),r[0].replace(t.startTag,this._parseStartBound),u=!1)),u){e=0;do if(i=n.indexOf("<",e),i>=0&&i<n.length-1)s=n[i+1],e=i+1;else break;while(!s.match(/[a-zA-Z\/]/));h=i<0?n:n.substring(0,i);n=i<0?"":n.substring(i);this.chars(h)}if(n===o)throw new Error("HTML Parse Error: "+n);o=n}this.parseEndTag()},n.prototype.parseStartTag=function(n,i,r,u){i=i.toLowerCase();t.closeSelf[i]&&this._stack.last()===i&&this.parseEndTag("",i);u=t.empty[i]||!!u;u||this._stack.push(i);var f=[];return r.replace(t.attr,function(n,i){var r=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:t.fillAttrs[i]?i:"";f.push({name:i,value:r,escaped:r.replace(/(^|[^\\])"/g,'$1\\"')})}),this.start(i,f,u),""},n.prototype.parseEndTag=function(n,t){var i,r;if(t){for(i=this._stack.length-1;i>=0;i--)if(this._stack[i]===t)break}else i=0;if(i>=0){for(r=this._stack.length-1;r>=i;r--)this.end(this._stack[r]);this._stack.length=i}return""},n.prototype.start=function(n,t,i){for(var r=document.createElement(n),u=0;u<t.length;u++)r.setAttribute(t[u].name,t[u].value);this._curParentNode&&this._curParentNode.appendChild&&this._curParentNode.appendChild(r);i||(this._elems.push(r),this._curParentNode=r)},n.prototype.end=function(){this._elems.length===1&&this._topNodes.push(this._elems[0]);this._elems.length-=1;this._curParentNode=this._elems[this._elems.length-1]},n.prototype.chars=function(n){var i=n.trim(),t;i.length!==0&&(n.indexOf("&")>-1&&(t=document.createElement("div"),t.innerHTML=n,n=t.textContent,t.textContent=""),this._elems.length===0?this._topNodes.push(document.createTextNode(n)):this._curParentNode.appendChild(document.createTextNode(n)))},n.prototype.html2Dom=function(n){if(this.parse(n.trim()),this._topNodes.length>1)throw new Error("Wrapper must have root element. Templates with multiple root elements are not supported yet");return this._topNodes.length?this._topNodes[0]:null},n.prototype.html2DomElements=function(n){return this.parse(n.trim()),this._topNodes},n}();n.HtmlParser=i})(t=n.Html2Dom||(n.Html2Dom={}))})(t=n.Rendering||(n.Rendering={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i=function(){function t(n,t,i){this._bodyElement=n;this._rootElement=t;this._rootIdPrefix="#"+i}return t.prototype.getCellElement=function(t){var i=n.TrackHelper.getCellTrack(t);return this._bodyElement.querySelector('[data-track="'+i+'"]')},t.prototype.getCellElementByIndex=function(t,i){var r=n.TrackHelper.getCellTrackByIndexes(t,i);return this._bodyElement.querySelector('[data-track="'+r+'"]')},t.prototype.getRowElement=function(t){var i=n.TrackHelper.getRowTrack(t);return this._bodyElement.querySelector('[data-track="'+i+'"]')},t.prototype.getRowElementByObject=function(t){var i=n.TrackHelper.getRowTrackByObject(t);return this._bodyElement.querySelector('[data-track="'+i+'"]')},t.prototype.getPartitionRowElement=function(){var t=n.TrackHelper.getPartitionRowTrack();return this._bodyElement.querySelector('[data-track="'+t+'"]')},t.prototype.getRowElements=function(){return this._bodyElement.querySelectorAll('[data-track^="r-"]')},t.prototype.getRowElementByIndex=function(t){var i=n.TrackHelper.getRowTrackByIndex(t);return this._bodyElement.querySelector('[data-track="'+i+'"]')},t.prototype.getColumnCellsElements=function(n){var t=n.Order;return this._bodyElement.querySelectorAll('[data-track$="-c'+t+'"]')},t.prototype.getColumnCellsElementsByColumnIndex=function(n){return this._bodyElement.querySelectorAll('[data-track$="-c'+n+'"]')},t.prototype.getRowCellsElements=function(n){return this.getRowCellsElementsByIndex(n.Index)},t.prototype.getRowCellsElementsByIndex=function(n){return this._bodyElement.querySelectorAll('[data-track^="c-r'+n+'-"]')},t.prototype.getHeaderElement=function(t){var i=n.TrackHelper.getHeaderTrack(t);return this._rootElement.querySelector('[data-track="'+i+'"]')},t.prototype.getPluginElement=function(t){var i=n.TrackHelper.getPluginTrack(t);return this._rootElement.querySelector('[data-track="'+i+'"]')},t.prototype.getPluginElementsByPositionPart=function(t){var i=n.TrackHelper.getPluginTrackByLocation(t);return this._rootElement.querySelectorAll('[data-track^="'+i+'"]')},t.prototype.isRow=function(n){if(!n||!n.getAttribute)return!1;var t=n.getAttribute("data-track");return t?t.charAt(0)==="r"&&t.charAt(1)==="-":!1},t.prototype.isSpecialRow=function(n){if(!n||!n.getAttribute)return!1;var t=n.getAttribute("data-spr");return t?!0:!1},t.prototype.isCell=function(n){if(!n||!n.getAttribute)return!1;var t=n.getAttribute("data-track");return t?t.charAt(0)==="c"&&t.charAt(1)==="-"&&t.charAt(2)==="r":!1},t}();t.DOMLocator=i})(t=n.Rendering||(n.Rendering={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(t){var i=function(){function i(i,r,u){this._columnsRenderFunctions={};this._masterTable=u;this._instances=u.InstanceManager;this.RootElement=document.getElementById(i);this._rootId=i;this._events=u.Events;this._prefix=r;this.Executor=n.Lattice.Templating._ltcTpl.executor(r,u);this.BackBinder=new t.BackBinder(this._masterTable.Date)}return i.prototype.layout=function(){var r,i;if(this._events.LayoutRendered.invokeBefore(this,null),r=this.Executor.executeLayout(),this.RootElement.innerHTML=r.Html,i=this.RootElement.querySelector('[data-track="tableBodyHere"]'),!i)throw new Error("Body placeholder is missing in table layout template");this.BodyElement=i.parentElement;this.BodyElement.removeChild(i);this.Locator=new t.DOMLocator(this.BodyElement,this.RootElement,this._rootId);this.Delegator=new n.Lattice.Services.EventsDelegatorService(this.Locator,this.BodyElement,this.RootElement,this._rootId,this._masterTable);this.BackBinder.Delegator=this.Delegator;this.Modifier=new t.DOMModifier(this.Executor,this.Locator,this.BackBinder,this._instances,this.Delegator,this.BodyElement);this.BackBinder.backBind(this.RootElement,r.BackbindInfo);this._events.LayoutRendered.invokeAfter(this,null)},i.prototype.body=function(t){for(var f,r,u=this.Executor.beginProcess(),i=0;i<t.length;i++)f=t[i],n.Lattice.Templating.Driver.row(u,f);r=this.Executor.endProcess(u);this.Delegator.handleElementDestroy(this.BodyElement);this.BodyElement.innerHTML=r.Html;this.BackBinder.backBind(this.BodyElement,r.BackbindInfo);this._events.DataRendered.invokeAfter(this,null)},i.prototype.renderObjectContent=function(n){var t=this.Executor.beginProcess();return t.nestContent(n,null),this.Executor.endProcess(t).Html},i.prototype.renderToString=function(n,t){var i=this.Executor.execute(t,n);return i.Html},i.prototype.renderObject=function(n,t,i){var r=document.querySelector(i);return this.renderObjectTo(n,t,r)},i.prototype.renderObjectTo=function(n,i,r){var f=this.Executor.execute(i,n),o=new t.Html2Dom.HtmlParser,e=o.html2DomElements(f.Html),u;for(r.innerHTML="",u=0;u<e.length;u++)r.appendChild(e[u]);return this.BackBinder.backBind(r,f.BackbindInfo),r},i.prototype.clearBody=function(){this.Delegator&&this.Delegator.handleElementDestroy(this.BodyElement);this.BodyElement.innerHTML=""},i}();t.Renderer=i})(i=t.Rendering||(t.Rendering={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i=function(){function i(){this._contextStack=[];this.Current=null}return i.prototype.clear=function(){(this.Current=null,this._contextStack.length!==0)&&(this._contextStack=[])},i.prototype.pushContext=function(n){this._contextStack.push(n);this.Current=n},i.prototype.push=function(n,t){var i={Type:n,Object:t,CurrentTrack:this.getTrack(n,t),IsTrackWritten:!1,TrackBuffer:""};this._contextStack.push(i);this.Current=i},i.prototype.getTrack=function(i,r){var u;switch(i){case t.RenderedObject.Plugin:u=n.TrackHelper.getPluginTrack(r);break;case t.RenderedObject.Header:u=n.TrackHelper.getHeaderTrack(r);break;case t.RenderedObject.Cell:u=n.TrackHelper.getCellTrack(r);break;case t.RenderedObject.Row:u=n.TrackHelper.getRowTrack(r);break;case t.RenderedObject.Message:u=n.TrackHelper.getMessageTrack();break;case t.RenderedObject.Partition:u=n.TrackHelper.getPartitionRowTrack();break;case t.RenderedObject.Custom:u=null;break;default:throw new Error("Invalid context element type");}return u},i.prototype.popContext=function(){this._contextStack.pop();this.Current=this._contextStack.length===0?null:this._contextStack[this._contextStack.length-1]},i}();t.RenderingStack=i})(t=n.Templating||(n.Templating={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(){this.States={};this._subscribers=[];this._stopEvents=!1;this.Current=""}return n.prototype.subscribeStateChange=function(n){this._subscribers.push(n)},n.prototype.fireHandlers=function(n){if(!this._stopEvents)for(var t=0;t<this._subscribers.length;t++)this._subscribers[t](n)},n.prototype.changeState=function(n){(this.setNormal(),this.States[n])&&(this.applyState(this.States[n]),this.fireHandlers({State:n,CurrentState:this.Current,StateWasMixedIn:!1}))},n.prototype.mixinState=function(n){this.States[n]&&(this.Current+="+"+n,this.applyState(this.States[n]),this.fireHandlers({State:n,CurrentState:this.Current,StateWasMixedIn:!0}))},n.prototype.unmixinState=function(n){var i,t;if(this.States[n]){for(i=this.Current.split("+"),this._stopEvents=!0,this.normalState(),t=0;t<i.length;t++)i[t]!==null&&i[t].length>0&&i[t]!==n&&this.mixinState(i[t]);this._stopEvents=!1}},n.prototype.normalState=function(){this.setNormal()},n.prototype.applyState=function(n){for(var t,u,f,i,r,o,e=0;e<n.length;e++){for(t=n[e],u=0;u<t.classes.length;u++)f=t.classes[u].substring(1),t.classes[u].charAt(0)==="+"?t.Element.classList.contains(f)||t.Element.classList.add(f):t.Element.classList.contains(f)&&t.Element.classList.remove(f);for(i in t.attrs)t.attrs.hasOwnProperty(i)&&(t.attrs[i]==null?t.Element.hasAttribute(i)&&t.Element.removeAttribute(i):t.Element.hasAttribute(i)&&t.Element.getAttribute(i)===t.attrs[i]||t.Element.setAttribute(i,t.attrs[i]));for(r in t.styles)t.styles.hasOwnProperty(r)&&t.Element.style.getPropertyValue(r)!==t.styles[r]&&t.Element.style.setProperty(r,t.styles[r]);t.content&&(o=this.getContent(t.Receiver,t.content),t.Element.innerHTML=o.length>0?o:o)}},n.prototype.getContent=function(n,t){for(var f,u=t.split("."),i=n,r=0;r<u.length;r++)if((r!==0||u[0]!=="o")&&(i=i[u[r]],i==null||i==undefined))throw new Error("Visual state owner does not contain property or function "+t);return f="",typeof i=="function"?i.call(n):i},n.prototype.setNormal=function(){var f,r,n,u,t,i;for(this.Current="normal",this.fireHandlers({State:"normal",CurrentState:this.Current,StateWasMixedIn:!1}),f=this.States._normal,r=0;r<f.length;r++){n=f[r];u=n.classes.join(" ");(!n.Element.hasAttribute("class")&&u.length>0||n.Element.getAttribute("class")!==u)&&n.Element.setAttribute("class",u);n.Element.innerHTML!==n.content&&n.content!=null&&(n.Element.innerHTML=n.content);for(t in n.attrs)n.attrs.hasOwnProperty(t)&&(n.attrs[t]==null?n.Element.hasAttribute(t)&&n.Element.removeAttribute(t):n.Element.hasAttribute(t)&&n.Element.getAttribute(t)===n.attrs[t]||n.Element.setAttribute(t,n.attrs[t]));for(i in n.styles)n.styles.hasOwnProperty(i)&&n.Element.style.getPropertyValue(i)!==n.styles[i]&&n.Element.style.setProperty(i,n.styles[i])}},n}();n.VisualState=t})(t=n.Rendering||(n.Rendering={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i=function(){function i(n){this.Configuration=n;this.bindReady()}return i.prototype.bindReady=function(){var n=this;document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1);n.initialize()},!1):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&(document.detachEvent("onreadystatechange",arguments.callee),n.initialize())}),document.documentElement.doScroll&&window==window.top&&function(){if(!n._isReady){try{document.documentElement.doScroll("left")}catch(t){setTimeout(arguments.callee,0);return}n.initialize()}}());window.addEventListener("load",function(){n._isReady||n.initialize()})},i.prototype.initialize=function(){this._isReady=!0;window.__latticeInstances||(window.__latticeInstances={});window.__latticeInstances[this.Configuration.TableRootId]=this;this.Stats=new n.Lattice.Services.StatsService(this);this.Date=new n.Lattice.Services.DateService(this.Configuration.DatepickerOptions);this.Events=new n.Lattice.Services.EventsService(this);this.InstanceManager=new n.Lattice.Services.InstanceManagerService(this.Configuration,this,this.Events);this.DataHolder=new n.Lattice.Services.DataHolderService(this);this.Loader=new n.Lattice.Services.LoaderService(this.Configuration.StaticData,this.Configuration.OperationalAjaxUrl,this);this.Renderer=new t.Rendering.Renderer(this.Configuration.TableRootId,this.Configuration.Prefix,this);this.Controller=new n.Lattice.Services.Controller(this);this.Selection=new n.Lattice.Services.SelectionService(this);this.Commands=new n.Lattice.Services.CommandsService(this);switch(this.Configuration.Partition.Type){case n.Lattice.PartitionType.Client:this.Partition=new n.Lattice.Services.Partition.ClientPartitionService(this);break;case n.Lattice.PartitionType.Server:this.Partition=new n.Lattice.Services.Partition.ServerPartitionService(this);break;case n.Lattice.PartitionType.Sequential:this.Partition=new n.Lattice.Services.Partition.SequentialPartitionService(this)}this.MessageService=new n.Lattice.Services.MessagesService(this.Configuration.MessageFunction,this.InstanceManager,this.Controller,this.Renderer);this.InstanceManager.initPlugins();this.Renderer.layout();this.Configuration.CallbackFunction&&this.Configuration.CallbackFunction(this);this.InstanceManager._subscribeConfiguredEvents();this.Partition.initial(this.Configuration.Partition.InitialSkip,this.Configuration.Partition.InitialTake);this.Configuration.PrefetchedData!=null&&this.Configuration.PrefetchedData.length>0?(this.Loader.prefetchData(this.Configuration.PrefetchedData),this.Controller.redrawVisibleData()):this.Configuration.LoadImmediately?this.Controller.reload():this.MessageService.showMessage({Class:"initial",Title:"No filtering specified",Details:"To retrieve query results please specify several filters",Type:t.MessageType.Banner})},i.prototype.reload=function(n){this.Controller.reload(n)},i.fireDomEvent=function(n,t){if("createEvent"in document){var i=document.createEvent("HTMLEvents");i.initEvent(n,!1,!0);t.dispatchEvent(i)}else t.fireEvent(n)},i.prototype.proceedAdjustments=function(n){var t=this.DataHolder.proceedAdjustments(n);t!=null&&this.Controller.drawAdjustmentResult(t)},i.prototype.getStaticData=function(){return this.Configuration.StaticData?JSON.parse(this.Configuration.StaticData):null},i.prototype.setStaticData=function(n){this.Configuration.StaticData=JSON.stringify(n)},i}();t.Master=i})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(){this.afterDrawn=null}return n.prototype.init=function(n){this.MasterTable=n;this.Configuration=this.RawConfig.Configuration;n.Events!=null&&this.subscribe(n.Events)},n.prototype.subscribe=function(){this.afterDrawn!=null&&this.MasterTable.Events.LayoutRendered.subscribeAfter(this.afterDrawn.bind(this),this.RawConfig.PluginId)},n.prototype.defaultRender=function(n){return n.nest(this,this.RawConfig.TemplateId)},n}();n.PluginBase=t})(t=n.Plugins||(n.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(t){var i=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.modifyQuery=function(){},t.prototype.init=function(t){n.prototype.init.call(this,t);this.MasterTable.Loader.registerQueryPartProvider(this)},t.prototype.itIsClientFilter=function(){this.MasterTable.DataHolder.registerClientFilter(this)},t.prototype.filterPredicate=function(){throw new Error("Please override this method");},t}(n.Lattice.Plugins.PluginBase);t.FilterBase=i})(i=t.Filters||(t.Filters={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=function(i){function r(){i.apply(this,arguments);this._clientOrderings={};this._serverOrderings={}}return __extends(r,i),r.prototype.subscribe=function(n){var t=this;n.ColumnsCreation.subscribe(function(n){t.overrideHeadersTemplates(n.EventArgs)},"ordering")},r.prototype.overrideHeadersTemplates=function(n){var u=this,f=this.RawConfig.TemplateId,t,i,r;for(t in n)if(n.hasOwnProperty(t)){if(i=this.Configuration.DefaultOrderingsForColumns[t],this.updateOrdering(t,i),n[t].Configuration.IsDataOnly)continue;if(i==null||i==undefined)continue;r={Column:n[t],switchOrdering:function(n){u.switchOrderingForColumn(n.Receiver.Column.RawName)},TemplateIdOverride:f,IsClientOrdering:this.isClient(t)};this.specifyOrdering(r,i);n[t].Header=r}},r.prototype.updateOrdering=function(n,t){this.isClient(n)?this._clientOrderings[n]=t:this._serverOrderings[n]=t},r.prototype.specifyOrdering=function(t,i){t.IsNeutral=t.IsDescending=t.IsAscending=!1;switch(i){case n.Lattice.Ordering.Neutral:t.IsNeutral=!0;break;case n.Lattice.Ordering.Descending:t.IsDescending=!0;break;case n.Lattice.Ordering.Ascending:t.IsAscending=!0}},r.prototype.isClient=function(n){return this.Configuration.ClientSortableColumns.hasOwnProperty(n)},r.prototype.switchOrderingForColumn=function(n){if(this.Configuration.DefaultOrderingsForColumns[n]==null||this.Configuration.DefaultOrderingsForColumns[n]==undefined)throw new Error("Ordering is not configured for column "+n);var t=this.isClient(n)?this._clientOrderings:this._serverOrderings,i=this.nextOrdering(t[n]);this.setOrderingForColumn(n,i)},r.prototype.setOrderingForColumn=function(n,t){var i=this.MasterTable.InstanceManager.Columns[n].Header;this.specifyOrdering(i,t);this.updateOrdering(n,t);this.MasterTable.Renderer.Modifier.redrawHeader(i.Column);this.MasterTable.Controller.reload()},r.prototype.nextOrdering=function(t){switch(t){case n.Lattice.Ordering.Neutral:return n.Lattice.Ordering.Ascending;case n.Lattice.Ordering.Descending:return n.Lattice.Ordering.Neutral;case n.Lattice.Ordering.Ascending:return n.Lattice.Ordering.Descending}},r.prototype.makeDefaultOrderingFunction=function(n){var t=this;return function(n){return function(t,i){var r=t[n],u=i[n];return r===u?0:r==null||r==undefined?-1:u==null||u==undefined?1:typeof r=="string"?r.localeCompare(u):r>u?1:-1}}(n)},r.prototype.init=function(n){var f,t,r,u;i.prototype.init.call(this,n);f=!1;for(r in this.Configuration.ClientSortableColumns)this.Configuration.ClientSortableColumns.hasOwnProperty(r)&&(f=!0,t=this.Configuration.ClientSortableColumns[r],t||(t=this.makeDefaultOrderingFunction(r),this.Configuration.ClientSortableColumns[r]=t),this.MasterTable.DataHolder.registerClientOrdering(r,t));if(f)for(u in this.Configuration.DefaultOrderingsForColumns)this.isClient(u)||(t=this.makeDefaultOrderingFunction(u),this.MasterTable.DataHolder.registerClientOrdering(u,t))},r.prototype.mixinOrderings=function(n,t){for(var i in n)n.hasOwnProperty(i)&&(t.Orderings[i]=n[i])},r.prototype.modifyQuery=function(n,i){this.mixinOrderings(this._serverOrderings,n);(i===t.QueryScope.Client||i===t.QueryScope.Transboundary)&&this.mixinOrderings(this._clientOrderings,n)},r}(n.Lattice.Filters.FilterBase);i.OrderingPlugin=r;t.ComponentsContainer.registerComponent("Ordering",r)})(r=i.Ordering||(i.Ordering={}))})(i=t.Plugins||(t.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=function(n){function t(){n.apply(this,arguments);this._limitSize=0;this.Sizes=[]}return __extends(t,n),t.prototype.renderContent=function(n){this.defaultRender(n)},t.prototype.changeLimitHandler=function(n){var t=n.EventArguments[0];typeof t=="string"&&(t=0);this.MasterTable.Partition.setTake(t)},t.prototype.changeLimit=function(n){var r=n,u=this._limitSize!==r,i,t;if(u){for(this._limitSize=r,i=null,t=0;t<this.Sizes.length;t++)if(this.Sizes[t].Value===r){i=this.Sizes[t];break}this.SelectedValue=i!=null?i:{IsSeparator:!1,Label:n.toString(),Value:n};this.MasterTable.Renderer.Modifier.redrawPlugin(this)}},t.prototype.onPartitionChange=function(n){n.EventArgs.Take!==n.EventArgs.PreviousTake&&this.changeLimit(n.EventArgs.Take)},t.prototype.init=function(t){var i,f,r,u;for(n.prototype.init.call(this,t),i=null,f=this.MasterTable.Configuration.Partition.InitialTake.toString(),r=0;r<this.Configuration.LimitValues.length;r++)u={Value:this.Configuration.LimitValues[r],Label:this.Configuration.LimitLabels[r],IsSeparator:this.Configuration.LimitLabels[r]==="-"},this.Sizes.push(u),u.Value===this.MasterTable.Configuration.Partition.InitialTake&&(i=u);i==null&&(i={Value:this.MasterTable.Configuration.Partition.InitialTake,Label:f,IsSeparator:!1},this.Sizes.push(u));this.SelectedValue=i;this._limitSize=i.Value},t.prototype.subscribe=function(n){n.PartitionChanged.subscribeAfter(this.onPartitionChange.bind(this),"limit")},t}(n.Lattice.Plugins.PluginBase);i.LimitPlugin=r;t.ComponentsContainer.registerComponent("Limit",r)})(r=i.Limit||(i.Limit={}))})(i=t.Plugins||(t.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.CurrentPage=function(){return this.MasterTable.Stats.CurrentPage()+1},t.prototype.TotalPages=function(){return this.MasterTable.Stats.Pages()},t.prototype.PageSize=function(){return this.MasterTable.Partition.Take},t.prototype.goToPage=function(n){var t=parseInt(n);this.MasterTable.Partition.setSkip(t*this.MasterTable.Partition.Take,!1)},t.prototype.gotoPageClick=function(){if(this.GotoInput){var n=this.GotoInput.value;n=(parseInt(n)-1).toString();this.goToPage(n)}},t.prototype.navigateToPage=function(n){this.goToPage(n.EventArguments[0])},t.prototype.nextClick=function(){this.MasterTable.Stats.CurrentPage()<this.MasterTable.Stats.Pages()&&this.goToPage((this.MasterTable.Stats.CurrentPage()+1).toString())},t.prototype.previousClick=function(){this.MasterTable.Stats.CurrentPage()>0&&this.goToPage((this.MasterTable.Stats.CurrentPage()-1).toString())},t.prototype.constructPagesElements=function(){var n=[],i=this.MasterTable.Stats.Pages(),t=this.MasterTable.Stats.CurrentPage(),e=this.Configuration.PagesToHideUnderPeriod,f=this.MasterTable.Partition.isAmountFinite(),r,o,u;if(i>1)if(this.Shown=!0,this.Configuration.ArrowsMode)this.NextArrow=f?t<i-1:!0,this.PrevArrow=t>0;else{if(this.Configuration.UseFirstLastPage&&n.push({Page:0,First:!0}),t>0&&n.push({Page:0,Prev:!0}),this.Configuration.UsePeriods)t-1>=e&&n.push({Page:0,Period:!0}),t-1>0&&n.push({Page:t-1,InActivePage:!0}),n.push({Page:t,ActivePage:!0}),t+1<i&&n.push({Page:t+1,InActivePage:!0}),i-(t+1)>=e&&n.push({Page:0,Period:!0});else{for(r=0;r<i;r++)t===r?n.push({Page:r,ActivePage:!0}):n.push({Page:r,InActivePage:!0});f||n.push({Page:0,Period:!0})}for(t<i-1&&n.push({Page:0,Next:!0}),this.Configuration.UseFirstLastPage&&f&&n.push({Page:i-1,Last:!0}),o=function(){return this.Page+1},u=0;u<n.length;u++)n[u].DisPage=o;this.Pages=n}else this.Shown=!1},t.prototype.renderContent=function(t){this.constructPagesElements();n.prototype.defaultRender.call(this,t)},t.prototype.validateGotopage=function(){var t=this.GotoInput.value,n=parseInt(t),i=this.MasterTable.Partition.isAmountFinite()?!isNaN(n)&&n>0&&n<=this.MasterTable.Stats.Pages():!0;i?this.VisualStates.normalState():this.VisualStates.changeState("invalid")},t.prototype.init=function(t){n.prototype.init.call(this,t)},t.prototype.onPartitionChanged=function(n){(n.EventArgs.Take!==n.EventArgs.PreviousTake||n.EventArgs.Skip!==n.EventArgs.PreviousSkip)&&this.MasterTable.Renderer.Modifier.redrawPlugin(this)},t.prototype.onClientDataProcessing=function(){this.MasterTable.Renderer.Modifier.redrawPlugin(this)},t.prototype.subscribe=function(n){n.PartitionChanged.subscribeAfter(this.onPartitionChanged.bind(this),"paging");n.ClientDataProcessing.subscribeAfter(this.onClientDataProcessing.bind(this),"paging")},t}(n.Lattice.Plugins.PluginBase);i.PagingPlugin=r;t.ComponentsContainer.registerComponent("Paging",r)})(r=i.Paging||(i.Paging={}))})(i=t.Plugins||(t.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=function(n){function i(){var t=this;n.apply(this,arguments);this._filteringIsBeingExecuted=!1;this._isInitializing=!0;this.afterDrawn=function(){if(!t.Configuration.Hidden){if(t.AssociatedColumn.IsDateTime){var n=t.MasterTable.Date.parse(t.Configuration.DefaultValue);t.MasterTable.Date.putDateToDatePicker(t.FilterValueProvider,n)}t._isInitializing=!1}}}return __extends(i,n),i.prototype.getValue=function(){return this.AssociatedColumn.Configuration.IsDataOnly&&this.Configuration.DefaultValue?this.Configuration.DefaultValue:this.FilterValueProvider?this.AssociatedColumn.IsDateTime?this.MasterTable.Date.serialize(this.MasterTable.Date.getDateFromDatePicker(this.FilterValueProvider)):this.FilterValueProvider.value:""},i.prototype.handleValueChanged=function(){var n=this;this._isInitializing||this._filteringIsBeingExecuted||this.getValue()!==this._previousValue&&(this._previousValue=this.getValue(),this.Configuration.InputDelay>0?(clearTimeout(this._inpTimeout),this._inpTimeout=setTimeout(function(){n._filteringIsBeingExecuted=!0;n.MasterTable.Controller.reload();n._filteringIsBeingExecuted=!1},this.Configuration.InputDelay)):(this._filteringIsBeingExecuted=!0,this.MasterTable.Controller.reload(),this._filteringIsBeingExecuted=!1))},i.prototype.renderContent=function(n){this.Configuration.Hidden||this.defaultRender(n)},i.prototype.init=function(t){n.prototype.init.call(this,t);this.Configuration.ClientFiltering&&this.itIsClientFilter();this.AssociatedColumn=this.MasterTable.InstanceManager.Columns[this.Configuration.ColumnName]},i.prototype.filterPredicate=function(n,t){var i=t.Filterings[this.AssociatedColumn.RawName],r,o,f,s,h,c,e,u;if(i==null||i==undefined)return!0;if(i==="$$lattice_not_present$$"&&this.AssociatedColumn.Configuration.IsNullable&&(i=null),this.Configuration.ClientFilteringFunction)return this.Configuration.ClientFilteringFunction(n,i,t);if(!t.Filterings.hasOwnProperty(this.AssociatedColumn.RawName))return!0;if(r=n[this.AssociatedColumn.RawName],r==null)return i==null;if(this.AssociatedColumn.IsString){for(r=r.toString(),o=i.split(/\s/),f=0;f<o.length;f++)if(s=o[f].trim(),s.length>0&&r.toLocaleLowerCase().indexOf(s.toLocaleLowerCase())<0)return!1;return!0}return this.AssociatedColumn.IsFloat?(h=parseFloat(i),r===h):this.AssociatedColumn.IsInteger||this.AssociatedColumn.IsEnum?(c=parseInt(i),r===c):this.AssociatedColumn.IsBoolean?(e=i.toLocaleUpperCase()==="TRUE"?!0:i.toLocaleUpperCase()==="FALSE"?!1:null,e==null&&(e=parseInt(i)>0),r===e):this.AssociatedColumn.IsDateTime?(u=this.MasterTable.Date.parse(i),this.Configuration.CompareOnlyDates)?u.getFullYear()===r.getFullYear()&&u.getDate()===r.getDate()&&u.getMonth()===r.getMonth():u===r:!0},i.prototype.modifyQuery=function(n,i){if(!this.Configuration.Hidden){var r=this.getValue();r&&r.length!==0&&((this.Configuration.ClientFiltering&&i===t.QueryScope.Client||i===t.QueryScope.Transboundary)&&(n.Filterings[this.AssociatedColumn.RawName]=r),(this.Configuration.ClientFiltering||i!==t.QueryScope.Server)&&i!==t.QueryScope.Transboundary||(n.Filterings[this.AssociatedColumn.RawName]=r))}},i}(n.Lattice.Filters.FilterBase);i.ValueFilterPlugin=r;t.ComponentsContainer.registerComponent("ValueFilter",r)})(r=i.Value||(i.Value={}))})(i=t.Filters||(t.Filters={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=function(n){function i(){var t=this;n.apply(this,arguments);this._filteringIsBeingExecuted=!1;this._isInitializing=!0;this.afterDrawn=function(){if(!t.Configuration.Hidden){if(t.AssociatedColumn.IsDateTime){var n=t.MasterTable.Date.parse(t.Configuration.FromValue),i=t.MasterTable.Date.parse(t.Configuration.ToValue);t.MasterTable.Date.putDateToDatePicker(t.FromValueProvider,n);t.MasterTable.Date.putDateToDatePicker(t.ToValueProvider,i)}t._isInitializing=!1}}}return __extends(i,n),i.prototype.getFromValue=function(){if(this.AssociatedColumn.Configuration.IsDataOnly)return this.Configuration.FromValue;if(!this.FromValueProvider)return"";if(this.AssociatedColumn.IsDateTime){var n=this.MasterTable.Date.getDateFromDatePicker(this.FromValueProvider);return this.MasterTable.Date.serialize(n)}return this.FromValueProvider.value},i.prototype.getToValue=function(){if(this.AssociatedColumn.Configuration.IsDataOnly)return this.Configuration.ToValue;if(!this.ToValueProvider)return"";if(this.AssociatedColumn.IsDateTime){var n=this.MasterTable.Date.getDateFromDatePicker(this.ToValueProvider);return this.MasterTable.Date.serialize(n)}return this.ToValueProvider.value},i.prototype.handleValueChanged=function(){var n=this;this._isInitializing||this._filteringIsBeingExecuted||(this._fromPreviousValue!==this.getFromValue()||this._toPreviousValue!==this.getToValue())&&(this._fromPreviousValue=this.getFromValue(),this._toPreviousValue=this.getToValue(),this.Configuration.InputDelay>0?(clearTimeout(this._inpTimeout),this._inpTimeout=setTimeout(function(){n._filteringIsBeingExecuted=!0;n.MasterTable.Controller.reload();n._filteringIsBeingExecuted=!1},this.Configuration.InputDelay)):(this._filteringIsBeingExecuted=!0,this.MasterTable.Controller.reload(),this._filteringIsBeingExecuted=!1))},i.prototype.getFilterArgument=function(){var n=[],t=this.getFromValue(),i=this.getToValue();return n.push(t),n.push(i),n.join("|")},i.prototype.modifyQuery=function(n,i){if(!this.Configuration.Hidden){var r=this.getFilterArgument();r&&r.length!==0&&((this.Configuration.ClientFiltering&&i===t.QueryScope.Client||i===t.QueryScope.Transboundary)&&(n.Filterings[this.AssociatedColumn.RawName]=r),(this.Configuration.ClientFiltering||i!==t.QueryScope.Server)&&i!==t.QueryScope.Transboundary||(n.Filterings[this.AssociatedColumn.RawName]=r))}},i.prototype.init=function(t){n.prototype.init.call(this,t);this.Configuration.ClientFiltering&&this.itIsClientFilter();this.AssociatedColumn=this.MasterTable.InstanceManager.Columns[this.Configuration.ColumnName]},i.prototype.renderContent=function(n){this.Configuration.Hidden||this.defaultRender(n)},i.prototype.filterPredicate=function(n,t){var h=t.Filterings[this.AssociatedColumn.RawName],e,r,i,s,o;if(!h)return!0;var c=h.split("|"),u=c[0],f=c[1];return this.Configuration.ClientFilteringFunction?this.Configuration.ClientFilteringFunction(n,u,f,t):(e=u.trim().length===0,r=f.trim().length===0,e&&r)?!0:t.Filterings.hasOwnProperty(this.AssociatedColumn.RawName)?(i=n[this.AssociatedColumn.RawName],i==null)?!1:this.AssociatedColumn.IsString?(s=i.toString(),(e||s.localeCompare(u)>=0)&&(r||s.localeCompare(f)<=0)):this.AssociatedColumn.IsFloat?(e||i>=parseFloat(u))&&(r||i<=parseFloat(f)):this.AssociatedColumn.IsInteger||this.AssociatedColumn.IsEnum?(e||i>=parseInt(u))&&(r||i<=parseInt(f)):this.AssociatedColumn.IsDateTime?(r||(o=this.MasterTable.Date.parse(f),this.Configuration.TreatEqualDateAsWholeDay&&(o.setHours(23),o.setMinutes(59),o.setSeconds(59))),(e||i>=this.MasterTable.Date.parse(u))&&(r||i<=o)):!0:!0},i}(n.Lattice.Filters.FilterBase);i.RangeFilterPlugin=r;t.ComponentsContainer.registerComponent("RangeFilter",r)})(r=i.Range||(i.Range={}))})(i=t.Filters||(t.Filters={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=function(n){function i(){n.apply(this,arguments)}return __extends(i,n),i.prototype.getSerializedValue=function(){return this.AssociatedColumn.Configuration.IsDataOnly&&this.Configuration.SelectedValue?this.Configuration.SelectedValue:this.getArrayValue().join("|")},i.prototype.getArrayValue=function(){var r,t,n,u,i;if(!this.FilterValueProvider)return[];if(this.Configuration.IsMultiple){for(t=[],n=0,u=this.FilterValueProvider.options.length;n<u;n++)i=this.FilterValueProvider.options[n],i.selected&&t.push(i.value);return t}return r=this.FilterValueProvider.options[this.FilterValueProvider.selectedIndex],[r.value]},i.prototype.modifyQuery=function(n,i){if(!this.Configuration.Hidden){var r=this.getSerializedValue();r&&r.length!==0&&((this.Configuration.ClientFiltering&&i===t.QueryScope.Client||i===t.QueryScope.Transboundary)&&(n.Filterings[this.AssociatedColumn.RawName]=r),(this.Configuration.ClientFiltering||i!==t.QueryScope.Server)&&i!==t.QueryScope.Transboundary||(n.Filterings[this.AssociatedColumn.RawName]=r))}},i.prototype.renderContent=function(n){this.Configuration.Hidden||this.defaultRender(n)},i.prototype.handleValueChanged=function(){this.MasterTable.Controller.reload()},i.prototype.init=function(t){var r,i;if(n.prototype.init.call(this,t),this.AssociatedColumn=this.MasterTable.InstanceManager.Columns[this.Configuration.ColumnName],r=this.Configuration.SelectedValue,r!==undefined&&r!==null)for(i=0;i<this.Configuration.Items.length;i++)this.Configuration.Items[i].Selected=this.Configuration.Items[i].Value!==r?!1:!0;this.Configuration.ClientFiltering&&this.itIsClientFilter()},i.prototype.filterPredicate=function(n,t){var r=t.Filterings[this.AssociatedColumn.RawName],u,f,i;return r==null||r==undefined?!0:(r==="$$lattice_not_present$$"&&this.AssociatedColumn.Configuration.IsNullable&&(r=null),u=null,u=this.Configuration.IsMultiple?r!=null?r.split("|"):[null]:[r],this.Configuration.ClientFilteringFunction)?this.Configuration.ClientFilteringFunction(n,u,t):t.Filterings.hasOwnProperty(this.AssociatedColumn.RawName)?(f=n[this.AssociatedColumn.RawName],f==null)?u.indexOf(null)>-1:this.AssociatedColumn.IsString?u.indexOf(f)>=0:(i=!1,this.AssociatedColumn.IsFloat)?(u.map(function(n){parseFloat(n)===f&&(i=!0)}),i):this.AssociatedColumn.IsInteger||this.AssociatedColumn.IsEnum?(i=!1,u.map(function(n){parseInt(n)===f&&(i=!0)}),i):this.AssociatedColumn.IsBoolean?(i=!1,u.map(function(n){var t=n.toLocaleUpperCase()==="TRUE"?!0:n.toLocaleUpperCase()==="FALSE"?!1:null;t==null&&(t=parseInt(r)>0);t===f&&(i=!0)}),i):!0:!0},i}(n.Lattice.Filters.FilterBase);i.SelectFilterPlugin=r;t.ComponentsContainer.registerComponent("SelectFilter",r)})(r=i.Select||(i.Select={}))})(i=t.Filters||(t.Filters={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i;(function(i){var r=function(t){function i(){t.apply(this,arguments);this.ColumnStates=[];this._columnStates={};this._isInitializing=!0}return __extends(i,t),i.prototype.isColumnVisible=function(n){return this.isColumnInstanceVisible(this.MasterTable.InstanceManager.Columns[n])},i.prototype.isColumnInstanceVisible=function(n){return n?this._columnStates[n.RawName].Visible:!0},i.prototype.hideColumnByName=function(n){this.hideColumnInstance(this.MasterTable.InstanceManager.Columns[n])},i.prototype.showColumnByName=function(n){this.showColumnInstance(this.MasterTable.InstanceManager.Columns[n])},i.prototype.toggleColumn=function(n){this.toggleColumnByName(n.EventArguments[0])},i.prototype.showColumn=function(n){this.showColumnByName(n.EventArguments[0])},i.prototype.hideColumn=function(n){this.hideColumnByName(n.EventArguments[0])},i.prototype.toggleColumnByName=function(n){return this.isColumnVisible(n)?(this.hideColumnByName(n),!1):(this.showColumnByName(n),!0)},i.prototype.modifyQuery=function(t,i){for(var u=[],f=[],r=0;r<this.ColumnStates.length;r++)i!==n.QueryScope.Transboundary&&this.Configuration.ColumnInitiatingReload.indexOf(this.ColumnStates[r].RawName)<0||(this.ColumnStates[r].Visible?f.push(this.ColumnStates[r].RawName):u.push(this.ColumnStates[r].RawName));t.AdditionalData.HideoutHidden=u.join(",");t.AdditionalData.HideoutShown=f.join(",")},i.prototype.hideColumnInstance=function(n){n&&((this._columnStates[n.RawName].Visible=!1,this._columnStates[n.RawName].DoesNotExists=!1,this.MasterTable.Renderer.Modifier.hideHeader(n),this.MasterTable.Renderer.Modifier.hidePluginsByPosition("filter-"+n.RawName),this._isInitializing)||(this.MasterTable.Renderer.Modifier.hideCellsByColumn(n),this.Configuration.ColumnInitiatingReload.indexOf(n.RawName)>-1&&this.MasterTable.Controller.reload(),this.MasterTable.Renderer.Modifier.redrawPlugin(this)))},i.prototype.showColumnInstance=function(n){if(n){this._columnStates[n.RawName].Visible=!0;var t=this._columnStates[n.RawName].DoesNotExists;(this._columnStates[n.RawName].DoesNotExists=!1,this.MasterTable.Renderer.Modifier.showHeader(n),this.MasterTable.Renderer.Modifier.showPluginsByPosition("filter-"+n.RawName),this._isInitializing)||(t?this.Configuration.ColumnInitiatingReload.indexOf(n.RawName)>-1?(this.MasterTable.Controller.redrawVisibleData(),this.MasterTable.Controller.reload()):this.MasterTable.Controller.redrawVisibleData():(this.MasterTable.Renderer.Modifier.showCellsByColumn(n),this.Configuration.ColumnInitiatingReload.indexOf(n.RawName)>-1&&this.MasterTable.Controller.reload()),this.MasterTable.Renderer.Modifier.redrawPlugin(this))}},i.prototype.onBeforeDataRendered=function(){for(var t,n=0;n<this.ColumnStates.length;n++)t=this.MasterTable.InstanceManager.Columns[this.ColumnStates[n].RawName],t.Configuration.IsDataOnly=this.ColumnStates[n].Visible?!1:!0},i.prototype.onDataRendered=function(){for(var n=0;n<this.ColumnStates.length;n++)this.ColumnStates[n].Visible||(this.ColumnStates[n].DoesNotExists=!0);this.MasterTable.Renderer.Modifier.redrawPlugin(this)},i.prototype.onLayourRendered=function(){for(var n=0;n<this.ColumnStates.length;n++)this.Configuration.HiddenColumns[this.ColumnStates[n].RawName]&&this.hideColumnByName(this.ColumnStates[n].RawName);this._isInitializing=!1},i.prototype.init=function(n){var i;for(t.prototype.init.call(this,n),this.MasterTable.Loader.registerQueryPartProvider(this),i=0;i<this.Configuration.HideableColumnsNames.length;i++){var r=this.Configuration.HideableColumnsNames[i],u=this.MasterTable.InstanceManager.Columns[r],f={DoesNotExists:this.Configuration.HiddenColumns.hasOwnProperty(r),Visible:!0,RawName:r,Name:u.Configuration.Title};if(u.Configuration.IsDataOnly)throw new Error("Column "+u.RawName+" is .DataOnly but\nincluded into hideable columns list.\n.DataOnly columns are invalid for Hideout plugin. Please remove it from selectable columns list");this._columnStates[r]=f;this.ColumnStates.push(f)}},i.prototype.renderContent=function(n){this.defaultRender(n)},i.prototype.subscribe=function(n){n.DataRendered.subscribeAfter(this.onDataRendered.bind(this),"hideout");n.DataRendered.subscribeBefore(this.onBeforeDataRendered.bind(this),"hideout");n.LayoutRendered.subscribeAfter(this.onLayourRendered.bind(this),"hideout")},i.prototype.isColVisible=function(n){var i=!1,t;if(this._isInitializing)i=!this.Configuration.HiddenColumns.hasOwnProperty(n);else for(t=0;t<this.ColumnStates.length;t++)if(this.ColumnStates[t].RawName===n){i=this.ColumnStates[t].Visible;break}return i},i}(t.PluginBase);i.HideoutPlugin=r;n.ComponentsContainer.registerComponent("Hideout",r)})(i=t.Hideout||(t.Hideout={}))})(t=n.Plugins||(n.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i;(function(i){var r=function(n){function t(){n.apply(this,arguments);this._recentData={};this._isReadyForRendering=!1}return __extends(t,n),t.prototype.onResponse=function(){this._isServerRequest=!0;this.Configuration.ResponseObjectOverriden||(this._recentServerData=this.MasterTable.Stats)},t.prototype.addClientData=function(n){for(var t in this.Configuration.ClientCalculators)this.Configuration.ClientCalculators.hasOwnProperty(t)&&(this._recentData[t]=this.Configuration.ClientCalculators[t](n))},t.prototype.onClientDataProcessed=function(n){if(this.Configuration.ResponseObjectOverriden){this.addClientData(n.EventArgs);this.MasterTable.Renderer.Modifier.redrawPlugin(this);return}this._recentData=this.MasterTable.Stats;this.addClientData(n.EventArgs);this._isServerRequest=!1;this._isReadyForRendering=!0;this.MasterTable.Renderer.Modifier.redrawPlugin(this)},t.prototype.renderContent=function(n){this._isReadyForRendering&&(this.Configuration.ClientTemplateFunction?n.w(this.Configuration.ClientTemplateFunction(this._recentData)):n.nest(this._recentData,this._recentTemplate))},t.prototype.init=function(t){n.prototype.init.call(this,t);this._recentTemplate=this.RawConfig.TemplateId;this.Configuration.ResponseObjectOverriden&&this.MasterTable.Loader.registerAdditionalDataReceiver("ResponseInfo",this);this.MasterTable.Events.ClientDataProcessing.subscribeAfter(this.onClientDataProcessed.bind(this),"responseInfo");this.MasterTable.Events.DataReceived.subscribeBefore(this.onResponse.bind(this),"responseInfo");try{this._pagingPlugin=this.MasterTable.InstanceManager.getPlugin("Paging");this._pagingEnabled=!0}catch(i){this._pagingEnabled=!1}},t.prototype.handleAdditionalData=function(n){this._recentData=n;this._isReadyForRendering=!0;this.MasterTable.Renderer.Modifier.redrawPlugin(this)},t}(t.PluginBase);i.ResponseInfoPlugin=r;n.ComponentsContainer.registerComponent("ResponseInfo",r)})(i=t.ResponseInfo||(t.ResponseInfo={}))})(t=n.Plugins||(n.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i;(function(i){var r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.makeTotalsRow=function(){for(var t,i,e,r,o,s,n=this.MasterTable.InstanceManager.getUiColumns(),u={},f=0;f<n.length;f++)t=null,i=n[f],this._totalsForColumns.hasOwnProperty(i.RawName)&&(t=this._totalsForColumns[i.RawName],this.Configuration.ColumnsValueFunctions[i.RawName]&&(t=this.Configuration.ColumnsValueFunctions[i.RawName](t))),u[n[f].RawName]=t;for(e={Index:-1,MasterTable:this.MasterTable,DataObject:u,Cells:{},renderContent:null,renderElement:null,IsSpecial:!0},r=0;r<n.length;r++)o=n[r],s={DataObject:u,renderElement:null,renderContent:function(n){n.w(this.Data)},Column:n[r],Row:e,Data:u[o.RawName]},e.Cells[o.RawName]=s;return e},t.prototype.onAdjustments=function(n){var i=n.EventArgs,t;i.NeedRefilter||(t=this.makeTotalsRow(),this.MasterTable.Renderer.Modifier.redrawRow(t))},t.prototype.onClientDataProcessed=function(n){this._totalsForColumns||(this._totalsForColumns={});for(var t in this.Configuration.ColumnsCalculatorFunctions)this.Configuration.ColumnsCalculatorFunctions.hasOwnProperty(t)&&(this._totalsForColumns[t]=this.Configuration.ColumnsCalculatorFunctions[t](n.EventArgs))},t.prototype.subscribe=function(n){n.ClientDataProcessing.subscribeAfter(this.onClientDataProcessed.bind(this),"totals");n.Adjustment.subscribeAfter(this.onAdjustments.bind(this),"totals");this.MasterTable.Controller.registerAdditionalRowsProvider(this)},t.prototype.handleAdditionalData=function(n){var t=n;for(var i in t.TotalsForColumns)this._totalsForColumns||(this._totalsForColumns={}),this._totalsForColumns[i]=t.TotalsForColumns[i]},t.prototype.init=function(t){n.prototype.init.call(this,t);this.MasterTable.Loader.registerAdditionalDataReceiver("Total",this)},t.prototype.provide=function(n){this._totalsForColumns&&(this.Configuration.ShowOnTop?n.splice(0,0,this.makeTotalsRow()):n.push(this.makeTotalsRow()))},t}(t.PluginBase);i.TotalsPlugin=r;n.ComponentsContainer.registerComponent("Total",r)})(i=t.Total||(t.Total={}))})(t=n.Plugins||(n.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.redrawHeader=function(){this._ourColumn.Header.IsAllSelected=this.MasterTable.Selection.isAllSelected();this._ourColumn.Header.CanSelectAll=this.MasterTable.Selection.canSelectAll();this.MasterTable.Renderer.Modifier.redrawHeader(this._ourColumn)},t.prototype.init=function(t){var i=this,u,r;n.prototype.init.call(this,t);this._ourColumn=this.MasterTable.InstanceManager.Columns._checkboxify;u=function(){return i.MasterTable.Selection.toggleAll()};r={Column:this._ourColumn,renderContent:null,renderElement:null,TemplateIdOverride:this.Configuration.SelectAllTemplateId,selectAllEvent:function(){return i.MasterTable.Selection.toggleAll()}};this._ourColumn.Header=r},t.prototype.subscribe=function(n){var t=this;n.SelectionChanged.subscribeAfter(function(){return t.redrawHeader()},"checkboxify");n.ClientDataProcessing.subscribeAfter(function(){return t.redrawHeader()},"checkboxify");n.DataReceived.subscribeAfter(function(){return t.redrawHeader()},"checkboxify")},t}(n.Lattice.Plugins.PluginBase);i.CheckboxifyPlugin=r;t.ComponentsContainer.registerComponent("Checkboxify",r)})(r=i.Checkboxify||(i.Checkboxify={}))})(i=t.Plugins||(t.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i;(function(i){var r=function(n){function t(){n.apply(this,arguments);this.AllButtons={};this._buttonsConfig={}}return __extends(t,n),t.prototype.buttonHandleEvent=function(n){var t=n.EventArguments[0];this.handleButtonAction(this._buttonsConfig[t])},t.prototype.redrawMe=function(){this.MasterTable.Renderer.Modifier.redrawPlugin(this)},t.prototype.handleButtonAction=function(n){var t=this;n.OnClick&&n.OnClick.call(this.MasterTable,this.MasterTable,this.AllButtons[n.InternalId]);n.Command&&(n.BlackoutWhileCommand?(n.IsDisabled=!0,this.redrawMe(),this.MasterTable.Commands.triggerCommand(n.Command,null,function(){n.IsDisabled=!1;t.redrawMe()})):this.MasterTable.Commands.triggerCommand(n.Command,null))},t.prototype.renderContent=function(n){this.defaultRender(n)},t.prototype.traverseButtons=function(n){for(var t=0;t<n.length;t++)this._buttonsConfig[n[t].InternalId]=n[t],n[t].HasSubmenu&&this.traverseButtons(n[t].Submenu)},t.prototype.onSelectionChanged=function(n){var r=!1,i=!0,u,t;for(u in n.EventArgs){i=!1;break}for(t in this._buttonsConfig)this._buttonsConfig.hasOwnProperty(t)&&this._buttonsConfig[t].DisableIfNothingChecked&&this._buttonsConfig[t].IsDisabled!==i&&(r=!0,this._buttonsConfig[t].IsDisabled=i);r&&this.MasterTable.Renderer.Modifier.redrawPlugin(this)},t.prototype.init=function(t){var r,i;for(n.prototype.init.call(this,t),r=this.MasterTable.Selection.getSelectedKeys().length===0,i=0;i<this.Configuration.Buttons.length;i++)this.Configuration.Buttons[i].DisableIfNothingChecked&&(this.Configuration.Buttons[i].IsDisabled=r);this.traverseButtons(this.Configuration.Buttons);this.MasterTable.Events.SelectionChanged.subscribe(this.onSelectionChanged.bind(this),"toolbar")},t}(t.PluginBase);i.ToolbarPlugin=r;n.ComponentsContainer.registerComponent("Toolbar",r)})(i=t.Toolbar||(t.Toolbar={}))})(t=n.Plugins||(n.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=function(t){function i(){t.apply(this,arguments);this._needUpdateCoords=!1;this._availableSpaceRaw=!1;this._availableSpaceRawCorrection=0;this._previousAmout=0;this._skipOnUp=-1;this._upArrowActive=!1;this._downArrowActive=!1}return __extends(i,t),i.prototype.init=function(n){t.prototype.init.call(this,n);this.IsVertical=!this.Configuration.IsHorizontal;this._boundScrollerMove=this.scrollerMove.bind(this);this._boundScrollerEnd=this.scrollerEnd.bind(this)},i.prototype.updatePosition=function(){if(this._scollbar&&this._stickElement){var n=this.getCoords();if(n==null){this.hideScroll();this._needUpdateCoords=!0;return}this._needUpdateCoords=!1;n.height!=undefined&&(this._scollbar.style.height=n.height+"px");n.width!=undefined&&(this._scollbar.style.width=n.width+"px");n.left!=undefined&&(this._scollbar.style.left=n.left+"px");n.top!=undefined&&(this._scollbar.style.top=n.top+"px");this.calculateAvailableSpace();this.adjustScrollerHeight();this.adjustScrollerPosition(this.MasterTable.Partition.Skip)}},i.prototype.adjustScrollerPosition=function(n){if(this.Scroller){var i=this.MasterTable.Partition.amount(),r=this._availableSpace/i,t=r*n;n<=0&&(t=0);this.Configuration.IsHorizontal?this.Scroller.style.left=t+"px":this.Scroller.style.top=t+"px";this._scrollerPos=t}},i.prototype.adjustScrollerHeight=function(){var t,n,i;this.Scroller&&(t=this.MasterTable.Partition.amount(),this._previousAmout=t,this._availableSpaceRaw||(this._availableSpace+=this._availableSpaceRawCorrection,this._availableSpaceRaw=!0),n=this.MasterTable.Partition.Take*this._availableSpace/t,n<this.Configuration.ScrollerMinSize&&(i=n,n=this.Configuration.ScrollerMinSize,this._availableSpace-=n-i,this._availableSpaceRawCorrection=n-i,this._availableSpaceRaw=!1,this.adjustScrollerPosition(this.MasterTable.Partition.Skip)),this.Configuration.IsHorizontal?this.Scroller.style.width=n+"px":this.Scroller.style.height=n+"px",this._scrollerSize=n)},i.prototype.calculateAvailableSpace=function(){var n=this._scollbar.getBoundingClientRect(),t=this.Configuration.IsHorizontal?n.width:n.height;this.UpArrow&&(n=this.UpArrow.getBoundingClientRect(),t-=this.Configuration.IsHorizontal?n.width:n.height);this.DownArrow&&(n=this.DownArrow.getBoundingClientRect(),t-=this.Configuration.IsHorizontal?n.width:n.height);this._availableSpace=t;this._availableSpaceRaw=!0},i.prototype.getCoords=function(){var i={},r=this._stickElement.getBoundingClientRect(),e=!0,o,t,u,s,f;for(o in r)if(r[o]!==0){e=!1;break}if(e)return null;t={top:0,height:0,left:0,width:0};this.Configuration.AppendToElement==="body"?(u=document.body.getBoundingClientRect(),t={top:r.top-u.top,height:this._stickElement.clientHeight,left:r.left-u.left,width:this._stickElement.clientWidth}):(s=this.getElement(this.Configuration.AppendToElement),f=s.getBoundingClientRect(),t={top:r.top-f.top,left:r.left-f.left,height:this._stickElement.clientHeight,width:this._stickElement.clientWidth});switch(this.Configuration.StickDirection){case n.Lattice.Plugins.Scrollbar.StickDirection.Right:i.top=t.top;i.height=t.height;switch(this.Configuration.StickHollow){case n.Lattice.Plugins.Scrollbar.StickHollow.External:i.left=t.left+t.width;break;case n.Lattice.Plugins.Scrollbar.StickHollow.Internal:i.left=t.left+t.width-this._scrollWidth}break;case n.Lattice.Plugins.Scrollbar.StickDirection.Left:i.top=t.top;i.height=t.height;switch(this.Configuration.StickHollow){case n.Lattice.Plugins.Scrollbar.StickHollow.External:i.left=t.left;break;case n.Lattice.Plugins.Scrollbar.StickHollow.Internal:i.left=t.left-this._scrollWidth}break;case n.Lattice.Plugins.Scrollbar.StickDirection.Top:i.left=t.left;i.width=t.width;switch(this.Configuration.StickHollow){case n.Lattice.Plugins.Scrollbar.StickHollow.External:i.top=t.top-this._scrollHeight;break;case n.Lattice.Plugins.Scrollbar.StickHollow.Internal:i.top=t.top}break;case n.Lattice.Plugins.Scrollbar.StickDirection.Bottom:i.left=t.left;i.width=t.width;switch(this.Configuration.StickHollow){case n.Lattice.Plugins.Scrollbar.StickHollow.External:i.top=t.top+t.height;break;case n.Lattice.Plugins.Scrollbar.StickHollow.Internal:i.top=t.top+t.height-this._scrollHeight}}return i},i.prototype.getElement=function(n){if(!n)return null;switch(n){case"$Body":return this.MasterTable.Renderer.BodyElement;case"$Parent":return this.MasterTable.Renderer.BodyElement.parentElement;case"$All":return this.MasterTable.Renderer.RootElement;case"document":return document;case"body":return document.body}return document.querySelector(n)},i.prototype.onLayoutRendered=function(){var i,t,r;this._stickElement=this.getElement(this.Configuration.StickToElementSelector);this._kbListener=this.getElement(this.Configuration.KeyboardEventsCatcher);this._wheelListener=this.getElement(this.Configuration.WheelEventsCatcher);this._scollbar=this.MasterTable.Renderer.Modifier.createElementFromTemplate(this.RawConfig.TemplateId,this);i=this.getElement(this.Configuration.AppendToElement);this.Configuration.AppendToElement==="$All"&&(i.style.position="relative");i.appendChild(this._scollbar);this.subscribeUiEvents();t=this._scollbar.style;r=this._scollbar.getBoundingClientRect();this.Configuration.IsHorizontal?this._scrollHeight=t.height?parseInt(t.height):r.height:this._scrollWidth=t.width?parseInt(t.width):r.width;this._sensor=new n.Lattice.Rendering.Resensor(this._stickElement.parentElement,this.updatePosition.bind(this));this.updatePosition();this._sensor.attach()},i.prototype.subscribeUiEvents=function(){this.UpArrow&&(n.Lattice.Services.EventsDelegatorService.addHandler(this.UpArrow,"mousedown",this.upArrowStart.bind(this)),n.Lattice.Services.EventsDelegatorService.addHandler(document.body,"mouseup",this.upArrowEnd.bind(this)),n.Lattice.Services.EventsDelegatorService.addHandler(this.UpArrow,"click",this.upArrow.bind(this)));this.DownArrow&&(n.Lattice.Services.EventsDelegatorService.addHandler(this.DownArrow,"mousedown",this.downArrowStart.bind(this)),n.Lattice.Services.EventsDelegatorService.addHandler(document.body,"mouseup",this.downArrowEnd.bind(this)),n.Lattice.Services.EventsDelegatorService.addHandler(this.DownArrow,"click",this.downArrow.bind(this)));this._wheelListener&&n.Lattice.Services.EventsDelegatorService.addHandler(this._wheelListener,"wheel",this.handleWheel.bind(this));this.Scroller&&n.Lattice.Services.EventsDelegatorService.addHandler(this.Scroller,"mousedown",this.scrollerStart.bind(this));this.ScrollerActiveArea&&(n.Lattice.Services.EventsDelegatorService.addHandler(this.ScrollerActiveArea,"mousedown",this.activeAreaMouseDown.bind(this)),n.Lattice.Services.EventsDelegatorService.addHandler(this.ScrollerActiveArea,"click",this.activeAreaClick.bind(this)));this._kbListener&&(n.Lattice.Services.EventsDelegatorService.addHandler(window,"keydown",this.keydownHook.bind(this)),this._kbListener.enableKeyboardScroll=this.enableKb.bind(this),this._kbListener.disableKeyboardScroll=this.disableKb.bind(this),this.Configuration.FocusMode===n.Lattice.Plugins.Scrollbar.KeyboardScrollFocusMode.MouseOver&&(n.Lattice.Services.EventsDelegatorService.addHandler(this._kbListener,"mouseenter",this._kbListener.enableKeyboardScroll),n.Lattice.Services.EventsDelegatorService.addHandler(this._kbListener,"mouseleave",this._kbListener.disableKeyboardScroll)),this.Configuration.FocusMode===n.Lattice.Plugins.Scrollbar.KeyboardScrollFocusMode.MouseClick&&n.Lattice.Services.EventsDelegatorService.addHandler(window,"click",this.trackKbListenerClick.bind(this)))},i.prototype.trackKbListenerClick=function(n){for(var t=n.target;t!=null;){if(t===this._kbListener){this._kbActive=!0;return}t=t.parentElement}this._kbActive=!1},i.prototype.isKbListenerHidden=function(){return this._kbListener.offsetParent==null},i.prototype.enableKb=function(){this._kbActive=!0},i.prototype.disableKb=function(){this._kbActive=!1},i.prototype.keydownHook=function(n){return n.target&&n.target.nodeName&&i._forbiddenNodes.indexOf(n.target.nodeName)>-1?!0:this._kbActive?this.isKbListenerHidden()?!0:this._isHidden?!0:this.handleKey(n.keyCode)?(n.preventDefault(),n.stopPropagation(),!1):!0:!0},i.prototype.handleKey=function(n){var t=!1,i=this.Configuration.Keys;return i.SingleDown.indexOf(n)>-1&&(this.deferScroll(this.MasterTable.Partition.Skip+this.Configuration.Forces.SingleForce),t=!0),i.SingleUp.indexOf(n)>-1&&(this.deferScroll(this.MasterTable.Partition.Skip-this.Configuration.Forces.SingleForce),t=!0),i.PageDown.indexOf(n)>-1&&(this.deferScroll(this.MasterTable.Partition.Skip+(this.Configuration.UseTakeAsPageForce?this.MasterTable.Partition.Take:this.Configuration.Forces.PageForce)),t=!0),i.PageUp.indexOf(n)>-1&&(this.deferScroll(this.MasterTable.Partition.Skip-(this.Configuration.UseTakeAsPageForce?this.MasterTable.Partition.Take:this.Configuration.Forces.PageForce)),t=!0),i.Home.indexOf(n)>-1&&(this.deferScroll(0),t=!0),i.End.indexOf(n)>-1&&(this.deferScroll(this.MasterTable.Partition.amount()-this.MasterTable.Partition.Take),t=!0),t},i.prototype.activeAreaClick=function(n){if(n.target===this.ScrollerActiveArea){var t=this.Scroller.getBoundingClientRect(),i=this.Configuration.IsHorizontal?t.left:t.top,r=this.Configuration.IsHorizontal?n.clientX:n.clientY,u=this.MasterTable.Partition.amount()/this._availableSpace,f=(r-(i+this._scrollerSize/2))*u;this.MasterTable.Partition.setSkip(this.MasterTable.Partition.Skip+Math.floor(f));n.stopPropagation()}},i.prototype.activeAreaMouseDown=function(n){this.activeAreaClick(n);this.scrollerStart(n)},i.prototype.scrollerStart=function(t){this._mouseStartPos=this.Configuration.IsHorizontal?t.clientX:t.clientY;this._startSkip=this.MasterTable.Partition.Skip;this._skipOnUp=-1;n.Lattice.Services.EventsDelegatorService.addHandler(document.body,"mousemove",this._boundScrollerMove);n.Lattice.Services.EventsDelegatorService.addHandler(document.body,"mouseup",this._boundScrollerEnd);this.startDeferring()},i.prototype.scrollerMove=function(n){n.buttons===0&&this.scrollerEnd(n);var r=this.Configuration.IsHorizontal?n.clientX:n.clientY,i=this.MasterTable.Partition.amount(),u=i/this._availableSpace,f=(r-this._mouseStartPos)*u,t=this._startSkip+Math.floor(f);t<0&&(t=0);t>i-this.MasterTable.Partition.Take&&(t=i-this.MasterTable.Partition.Take);this.MasterTable.Partition.isServer()?this.MasterTable.Partition.hasEnoughDataToSkip(t)?(this.deferScroll(t),this._skipOnUp=-1):(this._skipOnUp=t,this.adjustScrollerPosition(t)):this.deferScroll(t);n.stopPropagation();n.preventDefault()},i.prototype.scrollerEnd=function(t){this.endDeferring();n.Lattice.Services.EventsDelegatorService.removeHandler(document.body,"mousemove",this._boundScrollerMove);n.Lattice.Services.EventsDelegatorService.removeHandler(document.body,"mouseup",this._boundScrollerEnd);t!=null&&(t.stopPropagation(),t.preventDefault())},i.prototype.handleWheel=function(n){if(!this._isHidden){var t=0;n.deltaMode===n.DOM_DELTA_PIXEL&&(t=(n.deltaY>0?1:-1)*this.Configuration.Forces.WheelForce);n.deltaMode===n.DOM_DELTA_LINE&&(t=n.deltaY*this.Configuration.Forces.WheelForce);n.deltaMode===n.DOM_DELTA_PAGE&&(t=n.deltaY*(this.Configuration.UseTakeAsPageForce?this.MasterTable.Partition.Take:this.Configuration.Forces.PageForce));t!==0&&this.MasterTable.Partition.Skip+t>=0&&(this.MasterTable.Partition.setSkip(this.MasterTable.Partition.Skip+t),n.preventDefault(),n.stopPropagation())}},i.prototype.upArrowStart=function(n){this._upArrowActive=!0;this._upArrowInterval=setInterval(this.upArrow.bind(this),this.Configuration.ArrowsDelayMs);n.stopPropagation()},i.prototype.upArrow=function(){this.MasterTable.Partition.Skip!=0&&this.MasterTable.Partition.setSkip(this.MasterTable.Partition.Skip-this.Configuration.Forces.SingleForce)},i.prototype.upArrowEnd=function(n){this._upArrowActive&&(this._upArrowActive=!1,clearInterval(this._upArrowInterval),n.stopPropagation())},i.prototype.downArrowStart=function(n){this._downArrowActive=!0;this._downArrowInterval=setInterval(this.downArrow.bind(this),this.Configuration.ArrowsDelayMs);n.stopPropagation()},i.prototype.downArrow=function(){this.MasterTable.Partition.Type!==n.Lattice.PartitionType.Sequential&&this.MasterTable.Partition.Skip+this.MasterTable.Partition.Take>=this.MasterTable.Partition.amount()||this.MasterTable.Partition.setSkip(this.MasterTable.Partition.Skip+this.Configuration.Forces.SingleForce)},i.prototype.downArrowEnd=function(n){this._downArrowActive&&(this._downArrowActive=!1,clearInterval(this._downArrowInterval),n.stopPropagation())},i.prototype.startDeferring=function(){this._moveCheckInterval=setInterval(this.moveCheck.bind(this),this.Configuration.ScrollDragSmoothness)},i.prototype.deferScroll=function(n){this._moveCheckInterval?this._needMoveTo=n:this.MasterTable.Partition.setSkip(n)},i.prototype.moveCheck=function(){var n=this._needMoveTo;n!==this._movedTo&&(this.MasterTable.Partition.setSkip(n),this._movedTo=n)},i.prototype.endDeferring=function(){clearInterval(this._moveCheckInterval);this.MasterTable.Partition.isServer()&&this._skipOnUp!==-1&&(this._needMoveTo=this._skipOnUp);this.moveCheck()},i.prototype.hideScroll=function(){this._isHidden=!0;this._scollbar.style.visibility="hidden"},i.prototype.showScroll=function(){this._isHidden=!1;this._scollbar.style.visibility="visible";this._needUpdateCoords&&this.updatePosition()},i.prototype.onPartitionChange=function(n){if(!this.MasterTable.DataHolder.Ordered||this.MasterTable.Partition.isClient()&&this.MasterTable.DataHolder.Ordered.length<=n.MasterTable.Partition.Take||this.MasterTable.DataHolder.DisplayedData.length===0||n.EventArgs.Take===0){this.hideScroll();return}this.showScroll();this.MasterTable.Partition.amount()!==this._previousAmout&&this.adjustScrollerHeight();this.adjustScrollerPosition(n.EventArgs.Skip)},i.prototype.onClientDataProcessing=function(t){if(!t.EventArgs.OnlyPartitionPerformed){if(t.MasterTable.Partition.Take===0||(this.MasterTable.Partition.Type===n.Lattice.PartitionType.Client||this.MasterTable.Partition.Type===n.Lattice.PartitionType.Sequential)&&t.EventArgs.Ordered.length<=t.MasterTable.Partition.Take||t.EventArgs.Displaying.length===0){this.hideScroll();return}this.showScroll();this.adjustScrollerHeight();this.adjustScrollerPosition(this.MasterTable.Partition.Skip)}},i.prototype.subscribe=function(n){n.LayoutRendered.subscribeAfter(this.onLayoutRendered.bind(this),"scrollbar");n.PartitionChanged.subscribeAfter(this.onPartitionChange.bind(this),"scrollbar");n.ClientDataProcessing.subscribeAfter(this.onClientDataProcessing.bind(this),"scrollbar")},i._forbiddenNodes=["input","INPUT","textarea","TEXTAREA","select","SELECT","object","OBJECT","iframe","IFRAME"],i}(n.Lattice.Plugins.PluginBase);i.ScrollbarPlugin=r;t.ComponentsContainer.registerComponent("Scrollbar",r)})(r=i.Scrollbar||(i.Scrollbar={}))})(i=t.Plugins||(t.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i;(function(i){var r=function(t){function i(){t.apply(this,arguments);this._existingValues={};this._filteringExecuted={};this._timeouts={}}return __extends(i,t),i.extractValueFromMultiSelect=function(n){for(var i=[],t=0;t<n.options.length;t++)n.options[t].selected&&i.push(n.options[t].value);return i},i.extractInputValue=function(n,t,r){var u=null;return n.type==="select-multiple"?u=i.extractValueFromMultiSelect(n):n.type==="checkbox"?u=n.checked:n.type==="radio"?n.checked&&(u=n.value):t.IsDateTime?(u=r.getDateFromDatePicker(n),r.isValidDate(u)||(u=r.parse(n.value),r.isValidDate(u)||(u=null)),u!=null&&(u=r.serialize(u))):u=n.value,u!=null&&u!=undefined&&typeof u=="string"&&t.IsBoolean&&(u=u.toUpperCase()==="TRUE"||u==="1"||u==="YES"),u},i.extractData=function(n,t,r){var u=null,f=n.length>0?n.item(0):null,e,o,s,h,c;if(f)if(t.IsArray)if(t.ArrayDelimiter)u=f.value==null||f.value.length===0?[]:f.value.split(t.ArrayDelimiter);else if(n.length===1&&f.type==="select-multiple")u=i.extractValueFromMultiSelect(f);else for(u=[],e=0;e<n.length;e++){if(o=n.item(e),s=i.extractInputValue(o,t,r),o.type==="checkbox")if(s===!0)s=o.value;else continue;u.push(s)}else for(h=0;h<n.length;h++)if(c=i.extractInputValue(n.item(h),t,r),c!=null&&c!=undefined){u=c;break}return u},i.extractFormData=function(n,t,r){for(var h,e={},o=0;o<n.length;o++){var u=n[o],f=null,s=u.FieldJsonName;u.ConstantValue?f=u.ConstantValue:(u.FieldValueFunction?f=u.FieldValueFunction():(h=t.querySelectorAll(u.FieldSelector),f=i.extractData(h,u,r)),u.SetConstantIfNotSupplied&&f==null&&(f=u.ConstantValue));(f!=null||e[s]==null||e[s]==undefined)&&(e[s]=f)}return e},i.prototype.modifyQuery=function(t,r){var f=i.extractFormData(this.Configuration.FieldsConfiguration,document,this.MasterTable.Date),e,u,c,o,h,s,l;for(e in this.Configuration.FiltersMappings)if(this.Configuration.FiltersMappings.hasOwnProperty(e)&&(u=this.Configuration.FiltersMappings[e],c=u.ForClient&&u.ForServer||u.ForClient&&r===n.QueryScope.Client||u.ForServer&&r===n.QueryScope.Server||r===n.QueryScope.Transboundary,c))switch(u.FilterType){case 0:if(o=f[u.FieldKeys[0]],!o||o.length===0)break;t.Filterings[e]=o;break;case 1:t.Filterings[e]=u.FieldKeys.length===1&&Object.prototype.toString.call(f[u[0]])==="[object Array]"?f[u[0]][0]+"|"+f[u[0]][1]:f[u.FieldKeys[0]]+"|"+f[u.FieldKeys[1]];break;case 2:if(u.FieldKeys.length===1&&Object.prototype.toString.call(f[u[0]])==="[object Array]")t.Filterings[e]=f[u[0]].join("|");else{for(h=[],s=0;s<u.FieldKeys.length;s++)h.push(f[u.FieldKeys[s]]);t.Filterings[e]=h.join("|")}}this.Configuration.DoNotEmbed||(l=JSON.stringify(f),t.AdditionalData.Formwatch=l)},i.prototype.subscribe=function(){for(var n,t,i,u,f=this,r=0;r<this.Configuration.FieldsConfiguration.length;r++)if(n=this.Configuration.FieldsConfiguration[r],t=document.querySelector(n.FieldSelector),n.AutomaticallyAttachDatepicker&&this.MasterTable.Date.createDatePicker(t),n.TriggerSearchOnEvents&&n.TriggerSearchOnEvents.length>0){for(i=0;i<n.TriggerSearchOnEvents.length;i++)u=n.TriggerSearchOnEvents[i],t.addEventListener(u,function(n,t){return function(i){f.fieldChange(n.FieldSelector,n.SearchTriggerDelay,t,i)}}(n,t));this._existingValues[n.FieldSelector]=t.value}},i.prototype.fieldChange=function(n,t,i){var r=this;this._filteringExecuted[n]||i.value!==this._existingValues[n]&&(this._existingValues[n]=i.value,t>0?(this._timeouts[n]&&clearTimeout(this._timeouts[n]),this._timeouts[n]=setTimeout(function(){r._filteringExecuted[n]=!0;r.MasterTable.Controller.reload();r._filteringExecuted[n]=!1},t)):(this._filteringExecuted[n]=!0,this.MasterTable.Controller.reload(),this._filteringExecuted[n]=!1))},i.prototype.init=function(n){t.prototype.init.call(this,n);this.MasterTable.Loader.registerQueryPartProvider(this)},i}(t.PluginBase);i.FormwatchPlugin=r;n.ComponentsContainer.registerComponent("Formwatch",r)})(i=t.Formwatch||(t.Formwatch={}))})(t=n.Plugins||(n.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(){function t(t,i){this._afterFn=null;this._indicationShown=!1;this._masterTable=t;this.Indicator=new n.Lattice.Services.Partition.PartitionIndicatorRow(t,this,i);this.LoadAhead=i.LoadAhead;this.AppendLoadingRow=i.AppendLoadingRow;this.UseLoadMore=i.UseLoadMore}return t.prototype.skipTake=function(n,t){this.Skip=n;this.Take=t},t.prototype.provideIndicator=function(n){this._indicationShown=!0;n.push(this.Indicator)},t.prototype.loadNextDataPart=function(n,t){if(this.IsLoadingNextPart){t!=null&&(this._afterFn=t);return}if(this.FinishReached){t!=null&&t();return}if(this._afterFn=t,this.UseLoadMore){this.showIndication();return}this.loadNextCore(n)},t.prototype.loadNextCore=function(n,i){var r=this;n==null&&(n=this.LoadAhead);i==null&&(i=!1);this.IsLoadingNextPart=!0;this.ClientSearchParameters=t.any(this._masterTable.DataHolder.RecentClientQuery.Filterings);this.AppendLoadingRow&&this.showIndication();this._masterTable.Loader.query(function(t){return r.dataAppendLoaded(t,n,i)},function(t){return r.modifyDataAppendQuery(t,n)},this._dataAppendError,!0)},t.prototype.dataAppendError=function(){this.IsLoadingNextPart=!1;this.AppendLoadingRow&&this.destroyIndication()},t.prototype.modifyDataAppendQuery=function(n,t){return n.IsBackgroundDataFetch=!0,n.Partition={NoCount:!0,Skip:this._masterTable.DataHolder.StoredData.length,Take:this.Take*t},n},t.any=function(n){for(var t in n)if(n.hasOwnProperty(t))return!0;return!1},t.prototype.dataAppendLoaded=function(n,t){var i=this;this.IsLoadingNextPart=!1;this.AppendLoadingRow&&this.destroyIndication();this.FinishReached=n.BatchSize<this.Take*t;this._masterTable.DataHolder.DisplayedData.length>0&&this._masterTable.Controller.redrawVisibleData();this._masterTable.DataHolder.Ordered.length<this.Take*t?this.UseLoadMore?(this.destroyIndication(),this.FinishReached||this.showIndication()):this.FinishReached||setTimeout(function(){return i.loadNextDataPart(t)},5):this._afterFn!=null&&(this._afterFn(),this._afterFn=null)},t.prototype.showIndication=function(){this._indicationShown||(this._masterTable.Renderer.Modifier.appendRow(this.Indicator),this._indicationShown=!0)},t.prototype.destroyIndication=function(){this._indicationShown&&(this._masterTable.Renderer.Modifier.destroyPartitionRow(),this._indicationShown=!1)},t.prototype.loadMore=function(n,t){this.destroyIndication();this.loadNextCore(t,n)},t}();t.BackgroundDataLoader=i})(i=t.Partition||(t.Partition={}))})(i=t.Services||(t.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var i=function(){function n(n,i,r){this.IsSpecial=!0;this.Index=0;this.Cells={};this.DataObject=new t(n,i);this.MasterTable=n;this._dataLoader=i;this.TemplateIdOverride=r.LoadingRowTemplateId;this.Show=!0}return n.prototype.loadMore=function(){var n=null;this.PagesInput&&(n=parseInt(this.PagesInput.value),isNaN(n)&&(n=null));this._dataLoader.loadMore(this.Show,n)},n}(),t;n.PartitionIndicatorRow=i;t=function(){function n(n,t){this._masterTable=n;this._dataLoader=t}return n.prototype.UiColumnsCount=function(){return this._masterTable.InstanceManager.getUiColumns().length},n.prototype.IsLoading=function(){return this._dataLoader.IsLoadingNextPart},n.prototype.Stats=function(){return this._masterTable.Stats},n.prototype.IsClientSearchPending=function(){return this._dataLoader.ClientSearchParameters},n.prototype.CanLoadMore=function(){return!this._dataLoader.FinishReached},n.prototype.LoadAhead=function(){return this._dataLoader.LoadAhead},n}();n.PartitionIndicator=t})(t=n.Partition||(n.Partition={}))})(t=n.Services||(n.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(){function t(t){this._masterTable=t;this.Type=n.Lattice.PartitionType.Client}return t.prototype.setSkip=function(n,t){var i,r,c,o,e,a,v,s,y,h;if(t==null&&(t=!0),n<0&&(n=0),i=this.Take,i>0?n+i>this.amount()&&(t?n=this.amount()-i:i=this.amount()-n):i=this.amount()-n,r=this.Skip,r!==n){if(c={PreviousSkip:r,Skip:n,PreviousTake:this.Take,Take:this.Take},this._masterTable.Events.PartitionChanged.invokeBefore(this,c),n>=r+i||n<=r-i)this.cutDisplayed(n,i),this._masterTable.Controller.redrawVisibleData();else{o=this.displayedIndexes();this.cutDisplayed(n,i);var f=Math.abs(r-n),l=n>r,u=this._masterTable.Controller.produceRows();for(this.destroySpecialRows(u),e=0;e<f;e++)a=l?o[e]:o[o.length-1-e],this._masterTable.Renderer.Modifier.destroyRowByIndex(a);if(l)for(v=this.lastNonSpecialIndex(u)-f+1,s=0;s<f;s++)this._masterTable.Renderer.Modifier.appendRow(u[v+s]);else for(y=this.firstNonSpecialIndex(u)+f-1,h=0;h<f;h++)this._masterTable.Renderer.Modifier.prependRow(u[y-h]);this.restoreSpecialRows(u);this._masterTable.Events.DataRendered.invokeAfter(this,null)}this.Skip=n;this._masterTable.Events.PartitionChanged.invokeAfter(this,c)}},t.prototype.firstNonSpecialIndex=function(n){for(var t=0;t<n.length;t++)if(!n[t].IsSpecial)return t;return 0},t.prototype.lastNonSpecialIndex=function(n){if(n.length===0)return 0;if(!n[n.length-1].IsSpecial)return n.length-1;for(var t=n.length-1;t>=0;t--)if(!n[t].IsSpecial)return t;return 0},t.prototype.displayedIndexes=function(){for(var t=[],n=0;n<this._masterTable.DataHolder.DisplayedData.length;n++)t.push(this._masterTable.DataHolder.DisplayedData[n].__i);return t},t.prototype.setTake=function(n){var i={PreviousSkip:this.Skip,Skip:this.Skip,PreviousTake:this.Take,Take:n},r,o,u,s,f,h,t,e;if(this._masterTable.Events.PartitionChanged.invokeBefore(this,i),!this._masterTable.DataHolder.RecentClientQuery){this.Take=n;this._masterTable.Controller.reload();this._masterTable.Events.PartitionChanged.invokeAfter(this,i);return}if(n===0){this.Skip=0;this.Take=0;i.Skip=0;this.cutDisplayed(this.Skip,n);this._masterTable.Events.PartitionChanged.invokeAfter(this,i);this._masterTable.Controller.redrawVisibleData();return}if(r=this.Take,r===0)for(o=this.displayedIndexes(),this.cutDisplayed(this.Skip,n),u=n;u<o.length;u++)this._masterTable.Renderer.Modifier.destroyRowByIndex(o[u]);else if(n<r)for(s=this.displayedIndexes(),this.cutDisplayed(this.Skip,n),f=n;f<r;f++)this._masterTable.Renderer.Modifier.destroyRowByIndex(s[f]);else{for(h=this.displayedIndexes(),t=this._masterTable.Controller.produceRows(),this.destroySpecialRows(t),this.cutDisplayed(this.Skip,n),t=this._masterTable.Controller.produceRows(),n>t.length&&(n=t.length,i.Take=n),e=h.length;e<t.length;e++)this._masterTable.Renderer.Modifier.appendRow(t[e]);this.restoreSpecialRows(t);this._masterTable.Events.DataRendered.invokeAfter(this,null)}this.Take=n;this._masterTable.Events.PartitionChanged.invokeAfter(this,i)},t.prototype.restoreSpecialRows=function(n){for(var t=0;t<n.length;t++)n[t].IsSpecial&&(t===0?this._masterTable.Renderer.Modifier.prependRow(n[t]):t===n.length-1?this._masterTable.Renderer.Modifier.appendRow(n[t]):n[t+1].IsSpecial?this._masterTable.Renderer.Modifier.appendRow(n[t]):this._masterTable.Renderer.Modifier.appendRow(n[t],n[t+1].Index))},t.prototype.destroySpecialRows=function(n){for(var t=0;t<n.length/2;t++)n[t].IsSpecial&&this._masterTable.Renderer.Modifier.destroyRowByIndex(n[t].Index),n[n.length-t-1].IsSpecial&&this._masterTable.Renderer.Modifier.destroyRowByIndex(n[n.length-t-1].Index)},t.prototype.partitionBeforeQuery=function(n,t,i){return n.Partition={NoCount:!0,Take:0,Skip:0},t.Partition={NoCount:!0,Take:this.Take,Skip:this.Skip},i},t.prototype.partitionBeforeCommand=function(n){n.Partition={NoCount:!0,Take:this.Take,Skip:this.Skip}},t.prototype.partitionAfterQuery=function(n,t){var i;return n.length!==0&&this.Skip+this.Take>n.length&&(i=this.Skip,this.Skip=n.length-this.Take,this.Skip<0&&(this.Skip=0),this._masterTable.Events.PartitionChanged.invokeAfter(this,{PreviousSkip:i,Skip:0,PreviousTake:this.Take,Take:this.Take})),this.skipTakeSet(n,t)},t.prototype.skipTakeSet=function(n){return this.cut(n,this.Skip,this.Take)},t.prototype.cut=function(n,t,i){var r=n;return t>n.length&&(t=0),i===0?n.slice(t):n.slice(t,t+i)},t.prototype.cutDisplayed=function(n,t){this._masterTable.DataHolder.RecentClientQuery.Partition={NoCount:!0,Skip:n,Take:t};this._masterTable.Events.ClientDataProcessing.invokeBefore(this,this._masterTable.DataHolder.RecentClientQuery);this._masterTable.DataHolder.DisplayedData=this.cut(this._masterTable.DataHolder.Ordered,n,t);this._masterTable.Events.ClientDataProcessing.invokeAfter(this,{Displaying:this._masterTable.DataHolder.DisplayedData,Filtered:this._masterTable.DataHolder.Filtered,Ordered:this._masterTable.DataHolder.Ordered,Source:this._masterTable.DataHolder.StoredData,OnlyPartitionPerformed:!0})},t.prototype.amount=function(){return this._masterTable.DataHolder.Ordered?this._masterTable.DataHolder.Ordered.length:0},t.prototype.isAmountFinite=function(){return!0},t.prototype.totalAmount=function(){return this._masterTable.DataHolder.StoredData.length},t.prototype.initial=function(n,t){this.Skip=n;this.Take=t;this._masterTable.Events.PartitionChanged.invokeAfter(this,{PreviousSkip:0,Skip:n,PreviousTake:0,Take:t})},t.prototype.isClient=function(){return!0},t.prototype.isServer=function(){return!1},t.prototype.hasEnoughDataToSkip=function(n){return n<0?!1:n>this.amount()-this.Take?!1:!0},t.prototype.any=function(n){for(var t in n)if(n.hasOwnProperty(t))return!0;return!1},t}();t.ClientPartitionService=i})(i=t.Partition||(t.Partition={}))})(i=t.Services||(t.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i){t.call(this,i);this._serverSkip=0;this._masterTable=i;this._conf=i.Configuration.Partition.Server;this._seq=new n.Lattice.Services.Partition.SequentialPartitionService(i);this._dataLoader=new n.Lattice.Services.Partition.BackgroundDataLoader(i,this._conf);this._dataLoader.UseLoadMore=this._conf.UseLoadMore;this._dataLoader.AppendLoadingRow=this._conf.AppendLoadingRow;this._dataLoader.Indicator.Show=!1;this.Type=n.Lattice.PartitionType.Server}return __extends(i,t),i.prototype.setSkip=function(n,i){var r,u,f;if((this.Skip!==0||!(n<=0)||this._serverSkip!==0)&&(!(this.Skip+this.Take>=this._serverTotalCount)||!(n>=this.Skip))){if(i==null&&(i=!0),r=n-this._serverSkip,u=this.Take,r+this.Take*2>this._masterTable.DataHolder.Ordered.length||r<0){if(r>this._masterTable.DataHolder.Ordered.length||r<0){n+this.Take>this._serverTotalCount&&(i?n=this._serverTotalCount-this.Take:this.Take=this._serverTotalCount-n);f=this.Skip;this.Skip=n;this._masterTable.Events.PartitionChanged.invokeAfter(this,{PreviousSkip:f,Skip:this.Skip,PreviousTake:u,Take:this.Take});this._serverSkip=n;this._masterTable.Controller.reload(!0);return}this._dataLoader.skipTake(n,this.Take);this._dataLoader.loadNextDataPart(this._conf.LoadAhead);t.prototype.setSkip.call(this,n,i);return}t.prototype.setSkip.call(this,n,i)}},i.prototype.cut=function(n,t,i){return t=t-this._serverSkip,t>n.length&&(t=0),i===0?n.slice(t):n.slice(t,t+i)},i.prototype.setTake=function(n){var i=this,r=this.Skip-this._serverSkip,u=!this._masterTable.DataHolder.RecentClientQuery;(t.prototype.setTake.call(this,n),u)||r+n*2>this._masterTable.DataHolder.Ordered.length&&(this._dataLoader.skipTake(this.Skip,n),this._dataLoader.loadNextDataPart(this._conf.LoadAhead,function(){return t.prototype.setTake.call(i,n)}))},i.prototype.partitionBeforeQuery=function(n,t,i){if(n.IsBackgroundDataFetch)return i;this._dataLoader.skipTake(this.Skip,this.Take);var r=this.any(t.Filterings);return r?(this.switchToSequential(),this._seq.partitionBeforeQuery(n,t,i),!0):(n.Partition={NoCount:!1,Take:this.Take*this._conf.LoadAhead,Skip:this.Skip},t.Partition={NoCount:!0,Take:this.Take,Skip:this.Skip},i)},i.prototype.resetSkip=function(){if(this._serverSkip=0,this.Skip!==0){var n=this.Skip;this._dataLoader.skipTake(0,this.Take);this.Skip=0;this._masterTable.Events.PartitionChanged.invokeAfter(this,{PreviousSkip:n,Skip:this.Skip,PreviousTake:this.Take,Take:this.Take})}},i.prototype.switchToSequential=function(){this._masterTable.Partition=this._seq;this._seq.Owner=this;this._seq.Take=this.Take},i.prototype.switchBack=function(n,t,i){this._masterTable.Partition=this;this.Take=this._seq.Take;this.resetSkip();this.partitionBeforeQuery(n,t,i)},i.prototype.partitionAfterQuery=function(n,t,i){i!==-1&&(this._serverTotalCount=i);return this.skipTakeSet(n,t)},i.prototype.isAmountFinite=function(){return!0},i.prototype.totalAmount=function(){return this._serverTotalCount},i.prototype.amount=function(){return this._serverTotalCount},i.prototype.isClient=function(){return!1},i.prototype.isServer=function(){return!0},i.prototype.hasEnoughDataToSkip=function(n){if(n<0||n>this.amount()-this.Take)return!1;var t=n-this._serverSkip;return t>0&&t<=this._masterTable.DataHolder.Ordered.length-this.Take},i}(t.ClientPartitionService);t.ServerPartitionService=i})(i=t.Partition||(t.Partition={}))})(i=t.Services||(t.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i){t.call(this,i);this._takeDiff=0;this._provideIndication=!1;this._backgroundLoad=!1;this._masterTable=i;this._conf=i.Configuration.Partition.Sequential;this.DataLoader=new n.Lattice.Services.Partition.BackgroundDataLoader(i,this._conf);this.DataLoader.UseLoadMore=this._conf.UseLoadMore;this.DataLoader.AppendLoadingRow=this._conf.AppendLoadingRow;(this._conf.AppendLoadingRow||this._conf.UseLoadMore)&&this._masterTable.Controller.registerAdditionalRowsProvider(this);this.Type=n.Lattice.PartitionType.Sequential}return __extends(i,t),i.prototype.setSkip=function(n,i){this.Skip===0&&n<=0||(this.DataLoader.skipTake(n,this.Take),t.prototype.setSkip.call(this,n,i),n+this.Take>this._masterTable.DataHolder.Ordered.length?this.DataLoader.loadNextDataPart(this._conf.LoadAhead):this.DataLoader.destroyIndication())},i.prototype.setTake=function(n){var i=this,r=!this._masterTable.DataHolder.RecentClientQuery;r||(this.Skip+n>this._masterTable.DataHolder.Ordered.length?(this.DataLoader.skipTake(this.Skip,n),this.DataLoader.loadNextDataPart(this._conf.LoadAhead,function(){return t.prototype.setTake.call(i,n)})):t.prototype.setTake.call(this,n))},i.prototype.isAmountFinite=function(){return this.DataLoader.FinishReached},i.prototype.amount=function(){return t.prototype.amount.call(this)},i.prototype.resetSkip=function(){if(this.Skip!==0){var n=this.Skip;this.DataLoader.skipTake(0,this.Take);this.Skip=0;this._masterTable.Events.PartitionChanged.invokeAfter(this,{PreviousSkip:n,Skip:this.Skip,PreviousTake:this.Take,Take:this.Take})}},i.prototype.partitionBeforeQuery=function(n,t,i){if(n&&n.IsBackgroundDataFetch)return i;if(this.resetSkip(),this.Owner!=null){var r=this.any(t.Filterings);if(!r)return this.Owner.switchBack(n,t,i),!0}return n.Partition={NoCount:!0,Take:this.Take*this._conf.LoadAhead,Skip:this.Skip},t.Partition={NoCount:!0,Take:this.Take,Skip:this.Skip},i},i.prototype.partitionAfterQuery=function(n,t){var u=this.skipTakeSet(n,t),i,r;return t.IsBackgroundDataFetch||(i=this.any(t.Filterings),this.DataLoader.ClientSearchParameters=i,r=n.length>=this.Take*this._conf.LoadAhead,i&&!r&&(this._conf.UseLoadMore?this._provideIndication=!0:this._backgroundLoad=!0)),u},i.prototype.provide=function(n){this.DataLoader.skipTake(this.Skip,this.Take);this._provideIndication&&(this.DataLoader.provideIndicator(n),this._provideIndication=!1);this._backgroundLoad&&(this._backgroundLoad=!1,this.DataLoader.loadNextDataPart(this._conf.LoadAhead))},i.prototype.hasEnoughDataToSkip=function(n){return n<0?!1:n>this.amount()-this.Take?!1:n>0&&n<=this._masterTable.DataHolder.Ordered.length-this.Take},i.prototype.isClient=function(){return!1},i.prototype.isServer=function(){return!0},i}(t.ClientPartitionService);t.SequentialPartitionService=i})(i=t.Partition||(t.Partition={}))})(i=t.Services||(t.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(r){var u=function(t){function i(){var i=this;t.apply(this,arguments);this._overlappingElement=[];this._overlapLayer=[];this._isOverlapped=!1;this.afterDrawn=function(){i.MasterTable.Events.Loading.subscribeBefore(function(n){return i.onBeforeLoading(n)},"overlapLoading");i.MasterTable.Events.DataRendered.subscribeAfter(function(){return i.deoverlap()},"overlapLoading");i.MasterTable.Events.Loading.subscribeAfter(function(){return i.deoverlap()},"overlapLoading");n.Lattice.Services.EventsDelegatorService.addHandler(window,"resize",i.updateCoordsAll.bind(i))}}return __extends(i,t),i.prototype.overlapAll=function(){var n,t,r,u,i;if(!this._isOverlapped){this._overlapLayer=[];this._overlappingElement=[];for(n in this.Configuration.Overlaps)if(this.Configuration.Overlaps.hasOwnProperty(n)){for(t=null,t=n==="$All"?[this.MasterTable.Renderer.RootElement]:n==="$BodyOnly"?[this.MasterTable.Renderer.BodyElement]:n==="$Parent"?[this.MasterTable.Renderer.RootElement.parentElement]:document.querySelectorAll(n),r=[],u=[],i=0;i<t.length;i++)r.push(t[i]),u.push(this.createOverlap(t[i],this.Configuration.Overlaps[n]));this._overlappingElement.push(r);this._overlapLayer.push(u)}this._isOverlapped=!0}},i.prototype.createOverlap=function(n,t){var i=this.MasterTable.Renderer.Modifier.createElement(this.MasterTable.Renderer.renderToString(t,null)),r=null;return this._overlappingElement.currentStyle?r=this._overlappingElement.currentStyle.zIndex:window.getComputedStyle&&(r=window.getComputedStyle(i,null).zIndex),i.style.position="absolute",i.style.display="block",i.style.zIndex=(parseInt(r)+1).toString(),window.document.body.appendChild(i),this.updateCoords(i,n),i},i.prototype.updateCoords=function(n,t){n.style.display="none";var i=t.getBoundingClientRect();n.style.left=i.left+"px";n.style.top=i.top+"px";n.style.width=i.width+"px";n.style.height=i.height+"px";n.style.display="block"},i.prototype.updateCoordsAll=function(){for(var t,n=0;n<this._overlapLayer.length;n++)for(t=0;t<this._overlapLayer[n].length;t++)this.updateCoords(this._overlapLayer[n][t],this._overlappingElement[n][t])},i.prototype.deoverlap=function(){var n,t;if(this._isOverlapped){for(n=0;n<this._overlapLayer.length;n++)for(t=0;t<this._overlapLayer[n].length;t++)window.document.body.removeChild(this._overlapLayer[n][t]);this._overlapLayer=[];this._overlappingElement=[];this._isOverlapped=!1}},i.prototype.onBeforeLoading=function(){this.overlapAll()},i}(i.PluginBase);r.LoadingOverlapPlugin=u;t.ComponentsContainer.registerComponent("LoadingOverlap",u)})(r=i.LoadingOverlap||(i.LoadingOverlap={}))})(i=t.Plugins||(t.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=function(n){function t(){n.apply(this,arguments);this._isSelecting=!1;this._reset=!1;this._prevUiCols=[]}return __extends(t,n),t.prototype.init=function(t){n.prototype.init.call(this,t)},t.prototype.startSelection=function(n){this._isSelecting=!0;this._startRow=n.Row;this._startColumn=n.Column;this._endRow=n.Row;this._endColumn=this.MasterTable.InstanceManager.getColumnByOrder(n.Column).UiOrder;this._reset=!1;n.OriginalEvent.preventDefault()},t.prototype.endSelection=function(n){this._isSelecting=!1;n.OriginalEvent.preventDefault()},t.prototype.diff=function(n,t){var u,f,e,o,r,s,a,v,h;if(this.Configuration.Mode===i.RegularSelectMode.Rows){for(u=Math.abs(this._endRow-this._startRow)<Math.abs(n-this._startRow),f=n<this._endRow?n:this._endRow,e=n>this._endRow?n:this._endRow,o=f;o<=e;o++)this.MasterTable.Selection.toggleDisplayingRow(o,u);this._endRow=n;this._endColumn=t}else{u=Math.abs(this._endRow-this._startRow)<Math.abs(n-this._startRow);f=n<this._endRow?n:this._endRow;e=n>this._endRow?n:this._endRow;var c=[],y=this._startColumn<t?this._startColumn:t,p=this._startColumn>t?this._startColumn:t,l=this.MasterTable.InstanceManager.getColumnNames();for(r=y;r<=p;r++)this.MasterTable.InstanceManager.Columns[l[r]].Configuration.IsDataOnly||c.push(this.MasterTable.InstanceManager.Columns[l[r]].RawName);if(!u)for(s=f;s<=e;s++)this.MasterTable.Selection.toggleDisplayingRow(s,!1);for(a=this._startRow<n?this._startRow:n,v=this._startRow>n?this._startRow:n,h=a;h<=v;h++)this.MasterTable.Selection.setCellsByDisplayIndex(h,c);this._prevUiCols=c;this._endRow=n;this._endColumn=t}},t.prototype.move=function(n){this._isSelecting&&(this._reset||(this.MasterTable.Selection.resetSelection(),this._reset=!0),this.diff(n.Row,n.Column),n.OriginalEvent.preventDefault())},t}(n.Lattice.Plugins.PluginBase);i.RegularSelectPlugin=r;t.ComponentsContainer.registerComponent("RegularSelect",r)})(r=i.RegularSelect||(i.RegularSelect={}))})(i=t.Plugins||(t.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i=function(){function t(n,t,i,r){this._noresultsOverrideRow=null;this._usersMessageFn=n;this._instances=t;this._controller=i;this._templatesProvider=r;n||(this._usersMessageFn=function(n){alert(n.Title+"\r\n"+n.Details)});this._controller.registerAdditionalRowsProvider(this)}return t.prototype.showMessage=function(t){t.Type===n.MessageType.UserMessage?this._usersMessageFn(t):this.showTableMessage(t)},t.prototype.showTableMessage=function(n){if(!this._templatesProvider.Executor.hasTemplate("ltmsg-"+n.Class)){this._controller.replaceVisibleData([]);return}var t={DataObject:n,IsSpecial:!0,TemplateIdOverride:"ltmsg-"+n.Class,MasterTable:null,Index:0,Cells:{}};n.UiColumnsCount=this._instances.getUiColumns().length;n.IsMessageObject=!0;this._controller.replaceVisibleData([t])},t.prototype.overrideNoresults=function(n){this._noresultsOverrideRow=n},t.prototype.provide=function(t){if(t.length===0){if(this._noresultsOverrideRow!=null){t.push(this._noresultsOverrideRow);return}var i={Class:"noresults",Title:"No data found",Details:"Try specifying different filter settings",Type:n.MessageType.Banner,UiColumnsCount:this._instances.getUiColumns().length,IsMessageObject:!0},r={DataObject:i,IsSpecial:!0,TemplateIdOverride:"ltmsg-"+i.Class,MasterTable:null,Index:0,Cells:{}};t.push(r)}},t}();t.MessagesService=i})(t=n.Services||(n.Services={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=function(n){function t(){var t=this;n.apply(this,arguments);this.afterDrawn=function(){t._renderedExternally&&(t._externalReloadBtn=new u(t.MasterTable.Controller,t.Configuration.ForceReload),t.MasterTable.Renderer.renderObject(t.RawConfig.TemplateId,t._externalReloadBtn,t.Configuration.RenderTo),t._ready=!0)}}return __extends(t,n),t.prototype.triggerReload=function(){this.MasterTable.Controller.reload(this.Configuration.ForceReload)},t.prototype.renderContent=function(n){this._renderedExternally||this.defaultRender(n)},t.prototype.startLoading=function(){if(this._renderedExternally){if(!this._ready)return;this._externalReloadBtn.VisualStates&&this._externalReloadBtn.VisualStates.mixinState("loading")}else this.VisualStates&&this.VisualStates.mixinState("loading")},t.prototype.stopLoading=function(){if(this._renderedExternally){if(!this._ready)return;this._externalReloadBtn.VisualStates&&this._externalReloadBtn.VisualStates.unmixinState("loading")}else this.VisualStates&&this.VisualStates.unmixinState("loading")},t.prototype.subscribe=function(t){var i=this;n.prototype.subscribe.call(this,t);t.Loading.subscribeBefore(function(){return i.startLoading()},"reload");t.Loading.subscribeAfter(function(){return i.stopLoading()},"reload");t.LayoutRendered.subscribeAfter(function(){i.stopLoading()},"reload")},t.prototype.init=function(t){n.prototype.init.call(this,t);this._renderedExternally=this.Configuration.RenderTo!=null&&this.Configuration.RenderTo!=undefined&&this.Configuration.RenderTo.length>0},t}(n.Lattice.Plugins.PluginBase),u;i.ReloadPlugin=r;u=function(){function n(n,t){this._controller=n;this._forceReload=t}return n.prototype.triggerReload=function(){this._controller.reload(this._forceReload)},n}();t.ComponentsContainer.registerComponent("Reload",r)})(r=i.Reload||(i.Reload={}))})(i=t.Plugins||(t.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i;(function(i){var r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.subscribe=function(n){var t=this;n.Loading.subscribeBefore(function(){return t.showLoadingIndicator()},"loading");n.Loading.subscribeAfter(function(){return t.hideLoadingIndicator()},"loading");n.LayoutRendered.subscribeAfter(function(){t.hideLoadingIndicator()},"loading")},t.prototype.showLoadingIndicator=function(){this.MasterTable.Renderer.Modifier.showElement(this.BlinkElement)},t.prototype.hideLoadingIndicator=function(){this.MasterTable.Renderer.Modifier.hideElement(this.BlinkElement)},t.prototype.renderContent=function(n){this.defaultRender(n)},t.Id="Loading",t}(t.PluginBase);i.LoadingPlugin=r;n.ComponentsContainer.registerComponent("Loading",r)})(i=t.Loading||(t.Loading={}))})(t=n.Plugins||(n.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(){t.apply(this,arguments);this.ValidationMessages=[]}return __extends(i,t),i.prototype.renderedValidationMessages=function(){return this.MasterTable.Renderer.renderToString(this.Configuration.ValidationMessagesTemplateId,{Messages:this.ValidationMessages,IsRowEdit:this.IsRowEdit,IsFormEdit:this.IsFormEdit})},i.prototype.getThisOriginalValue=function(){return this.DataObject[this.Column.RawName]},i.prototype.reset=function(){this.setValue(this.getThisOriginalValue())},i.prototype.getValue=function(){throw new Error("Not implemented");},i.prototype.setValue=function(){throw new Error("Not implemented");},i.prototype.changedHandler=function(){this.IsInitialValueSetting||this.Row.notifyChanged(this)},i.prototype.commitHandler=function(){this.Row.commit(this)},i.prototype.rejectHandler=function(){this.Row.reject(this)},i.prototype.onAfterRender=function(){},i.prototype.focus=function(){},i.prototype.OriginalContent=function(t){n.Lattice.Templating.Driver.cellContent(this,t)},i.prototype.notifyObjectChanged=function(){},i.prototype.defineMessages=function(){return{}},i.prototype.getErrorMessage=function(n){return this._errorMessages.hasOwnProperty(n)?this._errorMessages[n]:"Error"},i.prototype.init=function(n){t.prototype.init.call(this,n);this._errorMessages=this.defineMessages();for(var i in this.Configuration.ValidationMessagesOverride)this._errorMessages[i]=this.Configuration.ValidationMessagesOverride[i]},i}(n.Lattice.Plugins.PluginBase);t.EditorBase=i})(i=t.Editing||(t.Editing={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var u=function(n){function i(){n.apply(this,arguments);this.Cells={};this.IsSpecial=!1;this.ValidationMessages=[];this.EditorConfigurations={}}return __extends(i,n),i.prototype.commit=function(){throw Error("Not implemented");},i.prototype.notifyChanged=function(){throw Error("Not implemented");},i.prototype.reject=function(){throw Error("Not implemented");},i.prototype.dispatchEditResponse=function(n,t){t&&t()},i.prototype.isEditable=function(n){return this.EditorConfigurations.hasOwnProperty(n.RawName)},i.prototype.sendDataObjectToServer=function(n){var t=this;this.MasterTable.Loader.command("Edit",function(i){return t.dispatchEditResponse(i,n)},function(n){return n.AdditionalData.Edit=JSON.stringify(t.CurrentDataObjectModified),n})},i.prototype.hasChanges=function(){for(var n in this.DataObject)if(this.DataObject[n]!==this.CurrentDataObjectModified[n])return!0;return!1},i.prototype.setEditorValue=function(n){n.IsInitialValueSetting=!0;n.setValue(this.CurrentDataObjectModified[n.FieldName]);n.IsInitialValueSetting=!1},i.prototype.createEditor=function(n,i,u,f){var o=this.EditorConfigurations[n],e=t.ComponentsContainer.resolveComponent(o.PluginId);return e.DataObject=this.DataObject,e.ModifiedDataObject=this.CurrentDataObjectModified,e.Data=this.DataObject[n],e.FieldName=n,e.Column=i,e.CanComplete=u,e.IsFormEdit=f===r.Form,e.IsRowEdit=f===r.Row,e.IsCellEdit=!(e.IsFormEdit||e.IsRowEdit),e.Row=this,e.RawConfig={Configuration:o,Order:0,PluginId:o.PluginId,Placement:"",TemplateId:o.TemplateId},e.init(this.MasterTable),e},i.prototype.retrieveEditorData=function(n,t){var f=!!t,i,r,u;for(t=t||[],i=[],this.CurrentDataObjectModified[n.FieldName]=n.getValue(i),r=0;r<i.length;r++)i[r].Message=n.getErrorMessage(i[r].Code);for(n.Data=this.CurrentDataObjectModified[n.FieldName],n.ValidationMessages=i,u=0;u<i.length;u++)t.push(i[u]);i.length>0?(n.IsValid=!1,n.VisualStates!=null&&n.VisualStates.changeState("invalid")):(n.IsValid=!0,n.VisualStates!=null&&n.VisualStates.normalState());f||this.ValidationMessages.concat(t)},i.prototype.init=function(t){n.prototype.init.call(this,t);for(var i=0;i<this.Configuration.Fields.length;i++)this.EditorConfigurations[this.Configuration.Fields[i].FieldName]=this.Configuration.Fields[i]},i}(n.Lattice.Plugins.PluginBase),r;i.EditHandlerBase=u,function(n){n[n.Cell=0]="Cell";n[n.Row=1]="Row";n[n.Form=2]="Form"}(i.EditorMode||(i.EditorMode={}));r=i.EditorMode})(i=t.Editing||(t.Editing={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=function(n){function i(){var t=this;n.apply(this,arguments);this._isEditing=!1;this.afterDrawn=function(){t.MasterTable.Events.DataRendered.subscribeAfter(t.onAfterRender.bind(t),"editor")}}return __extends(i,n),i.prototype.ensureEditing=function(n){var t,i;if(!this._isEditing){this.DataObject=this.MasterTable.DataHolder.StoredCache[n];this.CurrentDataObjectModified={};for(t in this.DataObject)this.DataObject.hasOwnProperty(t)&&(this.CurrentDataObjectModified[t]=this.DataObject[t]);this.MasterTable.Events.Edit.invokeBefore(this,this.CurrentDataObjectModified);i=this.MasterTable.Controller.produceRow(this.DataObject);this.Cells=i.Cells;this.Index=n;this._isEditing=!0}},i.prototype.beginCellEdit=function(n,i){var r,u;if(this.isEditable(n)){this.ensureEditing(i);r=this.createEditor(n.RawName,n,!0,t.EditorMode.Cell);this.Cells[n.RawName]=r;this._activeEditor=r;u=this.MasterTable.Renderer.Modifier.redrawCell(r);r.onAfterRender(u);return this.setEditorValue(r),r.focus(),r}},i.prototype.beginCellEditHandle=function(n){if(!this._isEditing){var t=this.MasterTable.InstanceManager.getColumnByOrder(n.Column);this.beginCellEdit(t,n.Row);n.Stop=!0}},i.prototype.onAfterRender=function(){if(this._isEditing&&this._activeEditor!=null){this._activeEditor.onAfterRender(null);this.setEditorValue(this._activeEditor)}},i.prototype.commit=function(n){var t=this,i=[];if(this.retrieveEditorData(n,i),i.length!==0){this.MasterTable.Events.EditValidationFailed.invokeAfter(this,{OriginalDataObject:this.DataObject,ModifiedDataObject:this.CurrentDataObjectModified,Messages:i});return}n.VisualStates!=null&&n.VisualStates.changeState("saving");this.finishEditing(n,!1);this.sendDataObjectToServer(function(){t._isEditing||(t.MasterTable.Events.Edit.invokeAfter(t,t.CurrentDataObjectModified),t.CurrentDataObjectModified=null)})},i.prototype.finishEditing=function(n,t){t&&n.VisualStates!=null&&n.VisualStates.normalState();this._activeEditor=null;this.Cells[n.Column.RawName]=this.MasterTable.Controller.produceCell(this.DataObject,n.Column,this);t&&this.MasterTable.Renderer.Modifier.redrawCell(this.Cells[n.Column.RawName]);this.cleanupAfterEdit()},i.prototype.cleanupAfterEdit=function(){this._isEditing=!1;this._activeEditor=null;this.Cells={}},i.prototype.notifyChanged=function(n){this.retrieveEditorData(n)},i.prototype.reject=function(n){this.finishEditing(n,!0)},i.prototype.provide=function(n){if(this._isEditing)for(var t=0;t<n.length;t++)n[t].DataObject.__key===this.DataObject.__key&&(n[t]=this)},i.prototype.init=function(t){n.prototype.init.call(this,t);t.Controller.registerAdditionalRowsProvider(this)},i}(t.EditHandlerBase);i.CellsEditHandler=r;n.ComponentsContainer.registerComponent("CellsEditHandler",r)})(r=i.Cells||(i.Cells={}))})(i=t.Editors||(t.Editors={}))})(t=n.Editing||(n.Editing={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=function(n){function i(){var t=this;n.apply(this,arguments);this._isEditing=!1;this._activeEditors=[];this._isAddingNewRow=!1;this.afterDrawn=function(){t.MasterTable.Events.DataRendered.subscribeAfter(t.onAfterRender.bind(t),"roweditor")}}return __extends(i,n),i.prototype.onAfterRender=function(){if(this._isEditing)for(var n=0;n<this._activeEditors.length;n++){this._activeEditors[n].onAfterRender(null);this.setEditorValue(this._activeEditors[n])}},i.prototype.ensureEditing=function(n){var i,t,r;if(!this._isEditing){if(n>=0){this._isAddingNewRow=!1;this.DataObject=this.MasterTable.DataHolder.StoredCache[n];this.CurrentDataObjectModified={};for(i in this.DataObject)this.DataObject.hasOwnProperty(i)&&(this.CurrentDataObjectModified[i]=this.DataObject[i])}else for(this._isAddingNewRow=!0,this.DataObject=this.MasterTable.DataHolder.defaultObject(),this.CurrentDataObjectModified=this.MasterTable.DataHolder.defaultObject(),t=0;t<this.Configuration.Fields.length;t++)this.Configuration.Fields[t].PluginId!=="DisplayEditor"&&(this.DataObject[this.Configuration.Fields[t].FieldName]=null,this.CurrentDataObjectModified[this.Configuration.Fields[t].FieldName]=null);this.MasterTable.Events.Edit.invokeBefore(this,this.CurrentDataObjectModified);r=this.MasterTable.Controller.produceRow(this.DataObject);this.Cells=r.Cells;this.Index=n<0?-1:n;this._isEditing=!0}},i.prototype.beginRowEdit=function(n){var f,i,e,u,r;this._isEditing&&(f=this.MasterTable.DataHolder.StoredCache[n],this.DataObject!==f&&this.rejectAll());this.ensureEditing(n);for(i in this.Cells)if(this.Cells.hasOwnProperty(i)){if(!this.isEditable(this.Cells[i].Column)){this.Cells[i].IsEditing=!0;continue}e=this.Cells[i].Column.RawName;u=this.createEditor(this.Cells[i].Column.RawName,this.Cells[i].Column,!1,t.EditorMode.Row);this.Cells[e]=u;this._activeEditors.push(u)}for(n<0?this.MasterTable.Renderer.Modifier.prependRow(this):this.MasterTable.Renderer.Modifier.redrawRow(this),r=0;r<this._activeEditors.length;r++)this.setEditorValue(this._activeEditors[r]);this._activeEditors.length>0&&this._activeEditors[0].focus()},i.prototype.commitAll=function(){var t=this,i,n;for(this.ValidationMessages=[],i=[],n=0;n<this._activeEditors.length;n++)this.retrieveEditorData(this._activeEditors[n],i);if(this.ValidationMessages=i,this.ValidationMessages.length>0){this.MasterTable.Events.EditValidationFailed.invokeAfter(this,{OriginalDataObject:this.DataObject,ModifiedDataObject:this.CurrentDataObjectModified,Messages:this.ValidationMessages});return}for(this._isEditing=!1,n=0;n<this._activeEditors.length;n++)this._activeEditors[n].VisualStates!=null&&this._activeEditors[n].VisualStates.changeState("saving");this._isEditing=!1;this._activeEditors=[];this.sendDataObjectToServer(function(){t._isEditing||(t.MasterTable.Events.Edit.invokeAfter(t,t.CurrentDataObjectModified),t.CurrentDataObjectModified=null)})},i.prototype.commit=function(n){var t=this._activeEditors.indexOf(n),i;if(this._activeEditors.length>t+1){for(t=-1,i=0;i<this._activeEditors.length;i++)if(!this._activeEditors[i].IsValid){t=i;break}t!==-1&&this._activeEditors[t].focus()}},i.prototype.notifyChanged=function(n){this.retrieveEditorData(n);for(var t=0;t<this._activeEditors.length;t++)this._activeEditors[t].notifyObjectChanged()},i.prototype.rejectAll=function(){for(var t,n=0;n<this._activeEditors.length;n++)this.reject(this._activeEditors[n]);this._isEditing=!1;this.CurrentDataObjectModified=null;this.Cells={};this._isAddingNewRow?this.MasterTable.Renderer.Modifier.destroyRow(this):(t=this.MasterTable.DataHolder.localLookupDisplayedDataObject(this.DataObject),t.IsCurrentlyDisplaying&&this.MasterTable.Controller.redrawVisibleDataObject(this.DataObject))},i.prototype.reject=function(n){this.CurrentDataObjectModified[n.FieldName]=this.DataObject[n.FieldName];this.setEditorValue(n)},i.prototype.add=function(){this.beginRowEdit(-1)},i.prototype.beginRowEditHandle=function(n){this.beginRowEdit(n.Row)},i.prototype.commitRowEditHandle=function(){this._isEditing&&this.commitAll()},i.prototype.rejectRowEditHandle=function(){this._isEditing&&this.rejectAll()},i.prototype.provide=function(n){if(this._isEditing)for(var t=0;t<n.length;t++)n[t].DataObject.__key===this.DataObject.__key&&(n[t]=this)},i.prototype.init=function(t){n.prototype.init.call(this,t);t.Controller.registerAdditionalRowsProvider(this)},i}(t.EditHandlerBase);i.RowsEditHandler=r;n.ComponentsContainer.registerComponent("RowsEditHandler",r)})(r=i.Cells||(i.Cells={}))})(i=t.Editors||(t.Editors={}))})(t=n.Editing||(n.Editing={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(r){var f=function(t){function r(){t.apply(this,arguments);this._activeEditors=[]}return __extends(r,t),r.prototype.ensureEditing=function(n){if(!this._isEditing){var t=this.MasterTable.DataHolder.StoredCache[n];this.ensureEditingObject(t)}},r.prototype.ensureEditingObject=function(n){this.DataObject=n;this.CurrentDataObjectModified={};for(var t in this.DataObject)this.DataObject.hasOwnProperty(t)&&(this.CurrentDataObjectModified[t]=this.DataObject[t]);this._isEditing=!0},r.prototype.add=function(){this._isEditing&&this.rejectAll();this.DataObject=this.MasterTable.DataHolder.defaultObject();this.CurrentDataObjectModified=this.MasterTable.DataHolder.defaultObject();for(var n=0;n<this.Configuration.Fields.length;n++)this.Configuration.Fields[n].PluginId!=="DisplayEditor"&&(this.DataObject[this.Configuration.Fields[n].FieldName]=null,this.CurrentDataObjectModified[this.Configuration.Fields[n].FieldName]=null);this.startupForm()},r.prototype.beginEdit=function(n){this._isEditing&&this.rejectAll();this.ensureEditing(n);this.startupForm()},r.prototype.beginFormEditHandler=function(n){if(this._isEditing){var t=this.MasterTable.DataHolder.StoredCache[n.Row];this.DataObject!==t&&this.rejectAll()}this.ensureEditing(n.Row);this.startupForm()},r.prototype.startupForm=function(){var t,f,r,s,e,o;for(this.MasterTable.Events.Edit.invokeBefore(this,this.CurrentDataObjectModified),t=new u,f=0;f<this.Configuration.Fields.length;f++)r=this.Configuration.Fields[f],s=null,s=r.FakeColumn!=null?n.Lattice.Services.InstanceManagerService.createColumn(r.FakeColumn,this.MasterTable):this.MasterTable.InstanceManager.Columns[r.FieldName],e=this.createEditor(r.FieldName,s,!1,i.EditorMode.Form),this._activeEditors.push(e),t.EditorsSet[r.FieldName]=e,t.ActiveEditors.push(e);for(t.DataObject=this.DataObject,t.Handler=this,this._currentForm=t,this._currentFormElement=this.MasterTable.Renderer.renderObject(this.Configuration.FormTemplateId,t,this.Configuration.FormTargetSelector),t.RootElement=this._currentFormElement,this.stripNotRenderedEditors(),o=0;o<this._activeEditors.length;o++)this.setEditorValue(this._activeEditors[o])},r.prototype.stripNotRenderedEditors=function(){for(var t=[],n=0;n<this._activeEditors.length;n++)this._activeEditors[n]._IsRendered&&t.push(this._activeEditors[n]);t.length!==this._activeEditors.length&&(this._activeEditors=t)},r.prototype.commitAll=function(){var n=this,i,t;for(this.ValidationMessages=[],i=[],t=0;t<this._activeEditors.length;t++)this.retrieveEditorData(this._activeEditors[t],i);if(this.ValidationMessages=i,this.ValidationMessages.length>0){this.MasterTable.Events.EditValidationFailed.invokeAfter(this,{OriginalDataObject:this.DataObject,ModifiedDataObject:this.CurrentDataObjectModified,Messages:this.ValidationMessages});return}for(this._isEditing=!1,t=0;t<this._activeEditors.length;t++)this._activeEditors[t].VisualStates!=null&&this._activeEditors[t].VisualStates.changeState("saving");this._isEditing=!1;this._activeEditors=[];this.sendDataObjectToServer(function(){n._isEditing||(n.MasterTable.Events.Edit.invokeAfter(n,n.CurrentDataObjectModified),n.CurrentDataObjectModified=null,n.MasterTable.Renderer.Modifier.cleanSelector(n.Configuration.FormTargetSelector),n._currentFormElement=null,n._currentForm=null)})},r.prototype.rejectAll=function(){for(var n=0;n<this._activeEditors.length;n++)this.reject(this._activeEditors[n]);this._isEditing=!1;this.CurrentDataObjectModified=null;this.MasterTable.Renderer.Modifier.cleanSelector(this.Configuration.FormTargetSelector);this._currentFormElement=null;this._currentForm=null},r.prototype.notifyChanged=function(n){this.retrieveEditorData(n);for(var t=0;t<this._activeEditors.length;t++)this._activeEditors[t].notifyObjectChanged()},r.prototype.commit=function(n){var t=this._activeEditors.indexOf(n),i;if(this._activeEditors.length>t+1){for(t=-1,i=0;i<this._activeEditors.length;i++)if(!this._activeEditors[i].IsValid){t=i;break}t!==-1&&this._activeEditors[t].focus()}},r.prototype.reject=function(n){this.CurrentDataObjectModified[n.FieldName]=this.DataObject[n.FieldName];this.setEditorValue(n)},r}(n.Lattice.Editing.EditHandlerBase),u;r.FormEditHandler=f;u=function(){function n(){this.EditorsSet={};this.ActiveEditors=[]}return n.prototype.Editors=function(n){for(var t=0;t<this.ActiveEditors.length;t++)this.editor(n,this.ActiveEditors[t])},n.prototype.editor=function(n,t){t._IsRendered=!0;t.renderContent(n)},n.prototype.Editor=function(n,t){var i=this.EditorsSet[t];this.editor(n,i)},n.prototype.commit=function(){this.Handler.commitAll()},n.prototype.reject=function(){this.Handler.rejectAll()},n}();r.FormEditFormModel=u;t.ComponentsContainer.registerComponent("FormEditHandler",f)})(r=i.Form||(i.Form={}))})(i=t.Editing||(t.Editing={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){var r=function(n){function t(){n.apply(this,arguments);this._floatRegex=new RegExp("^[0-9]+(.[0-9]+)?$")}return __extends(t,n),t.prototype.getValue=function(n){if(this.Column.IsDateTime){var t=this.MasterTable.Date.getDateFromDatePicker(this.Input);return t==null&&!this.Column.Configuration.IsNullable?(n.push({Code:"NULL"}),null):t}return this._parseFunction(this.Input.value,this.Column,n)},t.prototype.setValue=function(n){this.Input&&(this.Column.IsDateTime?this.MasterTable.Date.putDateToDatePicker(this.Input,n):this.Input.value=this._formatFunction(n,this.Column))},t.prototype.init=function(t){n.prototype.init.call(this,t);this.Configuration.ValidationRegex&&(this.ValidationRegex=new RegExp(this.Configuration.ValidationRegex));this._dotSeparators=new RegExp(this.Configuration.FloatDotReplaceSeparatorsRegex);this._removeSeparators=new RegExp(this.Configuration.FloatRemoveSeparatorsRegex);this._parseFunction=this.Configuration.ParseFunction||this.defaultParse;this._formatFunction=this.Configuration.FormatFunction||this.defaultFormat},t.prototype.defaultParse=function(n,t,i){var e,r,u,f;return this.ValidationRegex?(e=this.ValidationRegex.test(n),!e)?(i.push({Code:"REGEX"}),null):n:n==null||n==undefined||n.length===0?!t.Configuration.IsNullable&&!t.IsString?(i.push({Code:"NULL"}),null):t.IsString&&!this.Configuration.AllowEmptyString?(i.push({Code:"EMPTYSTRING"}),null):"":this.Configuration.MaxAllowedLength>0&&n.length>this.Configuration.MaxAllowedLength?(i.push({Code:"MAXCHARS"}),null):t.IsInteger||t.IsEnum?(n=n.replace(this._removeSeparators,""),r=parseInt(n),isNaN(r))?(i.push({Code:"NONINT"}),null):r:t.IsFloat?(u=n.length>0&&n.charAt(0)==="-",n=u?n.substring(1):n,n=n.replace(this._removeSeparators,""),n=n.replace(this._dotSeparators,"."),r=parseFloat(u?"-"+n:n),isNaN(r)||!this._floatRegex.test(n))?(i.push({Code:"NONFLOAT"}),null):r:t.IsBoolean?(f=n.toUpperCase().trim(),f==="TRUE")?!0:f==="FALSE"?!1:(i.push({Code:"NONBOOL"}),null):n},t.prototype.defaultFormat=function(n){return n==null||n==undefined?"":n.toString()},t.prototype.changedHandler=function(t){n.prototype.changedHandler.call(this,t)},t.prototype.renderContent=function(n){this.defaultRender(n)},t.prototype.focus=function(){this.Input.focus();this.Input.setSelectionRange(0,this.Input.value.length)},t.prototype.defineMessages=function(){return{NONBOOL:"Invalid boolean value provided for "+this.Column.Configuration.Title,NONFLOAT:"Invalid number provided for "+this.Column.Configuration.Title,NONINT:"Invalid number provided for "+this.Column.Configuration.Title,MAXCHARS:"Maximum "+this.Column.Configuration.Title+" length exceeded",EMPTYSTRING:this.Column.Configuration.Title+" must not be an empty string",NULL:this.Column.Configuration.Title+" value is mandatory",REGEX:"Validation failed for "+this.Column.Configuration.Title}},t}(n.Lattice.Editing.EditorBase);i.PlainTextEditor=r;t.ComponentsContainer.registerComponent("PlainTextEditor",r)})(r=i.PlainText||(i.PlainText={}))})(r=i.Editors||(i.Editors={}))})(i=t.Editing||(t.Editing={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){var r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getValue=function(n){var r=this.List.options.item(this.List.selectedIndex),i=r==null?"":r.value.toString(),t=null;return i.length===0?this.Column.IsString&&this.Configuration.AllowEmptyString?t=i:this.Column.Configuration.IsNullable?t=null:n.push({Code:"NULLVALUE"}):this.Column.IsEnum||this.Column.IsInteger?t=parseInt(i):this.Column.IsFloat?t=parseFloat(i):this.Column.IsBoolean?t=i.toUpperCase()==="TRUE":this.Column.IsDateTime?t=this.MasterTable.Date.parse(i):this.Column.IsString?t=i.toString():n.push({Code:"UNKNOWN"}),t},t.prototype.setValue=function(n){var i,u,f,r,t;if(this.List){for(i=this.Column.IsDateTime?this.MasterTable.Date.serialize(n):n==null?null:n.toString(),u=!1,t=0;t<this.List.options.length;t++)this.List.options.item(t).value===i&&(this.List.options.item(t).selected=!0,u=!0);for(this.IsInitialValueSetting&&(u||this.Configuration.MissingKeyFunction==null||this.Configuration.MissingValueFunction==null||(i=this.Configuration.MissingKeyFunction(this.DataObject),i!=null&&(i=i.toString(),f=this.Configuration.MissingValueFunction(this.DataObject).toString(),r=document.createElement("option"),r.value=i,r.text=f,r.selected=!0,this.List.add(r)))),t=0;t<this.Items.length;t++)if(this.Items[t].Value==i){this.SelectedItem=this.Items[t];break}this.VisualStates.mixinState("selected")}},t.prototype.onStateChange=function(n){n.State!=="selected"&&n.State!=="saving"&&this.VisualStates.mixinState("selected")},t.prototype.init=function(t){if(n.prototype.init.call(this,t),this.Items=this.Configuration.SelectListItems,this.Configuration.AddEmptyElement){var i={Text:this.Configuration.EmptyElementText,Value:"",Disabled:!1,Selected:!1};this.Items=[i].concat(this.Items)}},t.prototype.renderContent=function(n){this.defaultRender(n)},t.prototype.onAfterRender=function(){this.VisualStates&&this.VisualStates.subscribeStateChange(this.onStateChange.bind(this))},t.prototype.changedHandler=function(t){var r,i;for(n.prototype.changedHandler.call(this,t),r=this.List.options.item(this.List.selectedIndex).value,i=0;i<this.Items.length;i++)if(this.Items[i].Value==r){this.SelectedItem=this.Items[i];break}this.VisualStates.mixinState("selected")},t.prototype.focus=function(){this.List.focus()},t.prototype.defineMessages=function(){return{NULLVALUE:"Value must be provided for "+this.Column.Configuration.Title,UNKNOWN:"Unknown value for "+this.Column.Configuration.Title}},t}(n.Lattice.Editing.EditorBase);i.SelectListEditor=r;t.ComponentsContainer.registerComponent("SelectListEditor",r)})(r=i.SelectList||(i.SelectList={}))})(r=i.Editors||(i.Editors={}))})(i=t.Editing||(t.Editing={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){var r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.renderContent=function(n){this.defaultRender(n)},t.prototype.changedHandler=function(t){this._value=!this._value;this.updateState();n.prototype.changedHandler.call(this,t)},t.prototype.updateState=function(){this._value?this.VisualStates.mixinState("checked"):this.VisualStates.unmixinState("checked")},t.prototype.getValue=function(n){return this.Configuration.IsMandatory&&!this._value?(n.push({Code:"MANDATORY"}),null):this._value},t.prototype.setValue=function(n){(this._value=!!n,this.VisualStates)&&this.updateState()},t.prototype.focus=function(){this.FocusElement&&this.FocusElement.focus()},t.prototype.defineMessages=function(){return{MANDATORY:this.Column.Configuration.Title+" is required"}},t}(n.Lattice.Editing.EditorBase);i.CheckEditor=r;t.ComponentsContainer.registerComponent("CheckEditor",r)})(r=i.Check||(i.Check={}))})(r=i.Editors||(i.Editors={}))})(i=t.Editing||(t.Editing={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){var r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.init=function(t){n.prototype.init.call(this,t);this.MaxChars=this.Configuration.MaxChars;this.WarningChars=this.Configuration.WarningChars;this.Rows=this.Configuration.Rows;this.Columns=this.Configuration.Columns;this.CurrentChars=0},t.prototype.changedHandler=function(t){this.CurrentChars=this.TextArea.value.length;this.WarningChars!==0&&this.CurrentChars>=this.WarningChars&&this.CurrentChars<=this.MaxChars?this.VisualStates.mixinState("warning"):this.VisualStates.unmixinState("warning");n.prototype.changedHandler.call(this,t)},t.prototype.setValue=function(n){this.TextArea&&(this.TextArea.value=n)},t.prototype.getValue=function(n){var t=this.TextArea.value;return this.MaxChars>0&&t.length>this.MaxChars?(n.push({Code:"MAXCHARS"}),null):t},t.prototype.renderContent=function(n){this.defaultRender(n)},t.prototype.focus=function(){this.TextArea.focus();this.TextArea.setSelectionRange(0,this.TextArea.value.length)},t.prototype.defineMessages=function(){return{MAXCHARS:"Maximum "+this.Column.Configuration.Title+" length exceeded",EMPTYSTRING:this.Column.Configuration.Title+" must not be an empty string"}},t}(n.Lattice.Editing.EditorBase);i.MemoEditor=r;t.ComponentsContainer.registerComponent("MemoEditor",r)})(r=i.Memo||(i.Memo={}))})(r=i.Editors||(i.Editors={}))})(i=t.Editing||(t.Editing={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){var r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.renderContent=function(n){this.defaultRender(n)},t.prototype.Render=function(n){this._previousContent=this.Configuration.Template(this);n.w(this._previousContent)},t.prototype.notifyObjectChanged=function(){var n=this.Configuration.Template(this);n!==this._previousContent&&(this.ContentElement.innerHTML=n,this._previousContent=n)},t.prototype.getValue=function(){return this.DataObject[this.Column.RawName]},t.prototype.setValue=function(){},t.prototype.init=function(t){n.prototype.init.call(this,t);(this.Configuration.Template==null||this.Configuration.Template==undefined)&&(this.Configuration.Template=function(n){return n.Data.toString()})},t}(n.Lattice.Editing.EditorBase);i.DisplayEditor=r;t.ComponentsContainer.registerComponent("DisplayEditor",r)})(r=i.Display||(i.Display={}))})(r=i.Editors||(i.Editors={}))})(i=t.Editing||(t.Editing={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=function(t){function i(){var i=this;t.apply(this,arguments);this._isAwaitingSelection=!1;this.afterDrawn=function(){n.Lattice.Services.EventsDelegatorService.addHandler(i.MasterTable.Renderer.RootElement,"mousedown",function(n){return i._isAwaitingSelection=!0,setTimeout(function(){i._isAwaitingSelection&&(i._isSelecting||(n.stopPropagation(),n.preventDefault()),i.selectStart(n.pageX,n.pageY))},10),!0});n.Lattice.Services.EventsDelegatorService.addHandler(i.MasterTable.Renderer.RootElement,"mousemove",function(n){return i._isSelecting&&(n.stopPropagation(),n.preventDefault()),i.move(n.pageX,n.pageY),!0});n.Lattice.Services.EventsDelegatorService.addHandler(document.documentElement,"mouseup",function(n){return i._isAwaitingSelection=!1,i.selectEnd(),i._isSelecting&&(n.stopPropagation(),n.preventDefault()),!0})}}return __extends(i,t),i.prototype.init=function(n){t.prototype.init.call(this,n)},i.prototype.selectStart=function(n,t){if(this._isSelecting){this.selectEnd();return}this.selectPane=this.MasterTable.Renderer.Modifier.createElement(this.MasterTable.Renderer.renderToString(this.RawConfig.TemplateId,null));this.selectPane.style.left=n+"px";this.selectPane.style.top=t+"px";this.selectPane.style.width="0";this.selectPane.style.height="0";this.selectPane.style.position="absolute";this.selectPane.style.zIndex="9999";this.selectPane.style.pointerEvents="none";this.originalX=n;this.originalY=t;document.body.appendChild(this.selectPane);this._isSelecting=!0},i.prototype.move=function(n,t){if(this._isSelecting){var i=n<=this.originalX?n:this.originalX,r=t<=this.originalY?t:this.originalY,u=n>=this.originalX?n:this.originalX,f=t>=this.originalY?t:this.originalY;this.selectPane.style.left=i+"px";this.selectPane.style.top=r+"px";this.selectPane.style.width=u-i+"px";this.selectPane.style.height=f-r+"px"}},i.prototype.selectEnd=function(){this._isSelecting&&(document.body.removeChild(this.selectPane),this._isSelecting=!1)},i}(n.Lattice.Plugins.PluginBase);i.MouseSelectPlugin=r;t.ComponentsContainer.registerComponent("MouseSelect",r)})(r=i.MouseSelect||(i.MouseSelect={}))})(i=t.Plugins||(t.Plugins={}))})(t=n.Lattice||(n.Lattice={}))}(Reinforced||(Reinforced={}));